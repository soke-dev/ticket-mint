"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[97251],{97251:function(t,a,n){n.d(a,{relayBiconomyTransaction:function(){return l}});var e=n(8580),o=n(71548),r=n(47275),s=n(1793),i=n(81990),c=n(49859),d=n(94293);async function h(t){var a;let{account:n,serializableTransaction:s,transaction:c,gasless:h}=t,l=(0,r.getContract)({address:h.relayerForwarderAddress,chain:c.chain,client:c.client}),u=await (0,d.readContract)({contract:l,method:"function getNonce(address,uint256) view returns (uint256)",params:[n.address,0n]}),p=Math.floor(Date.now()/1e3)+(null!==(a=h.deadlineSeconds)&&void 0!==a?a:3600),w={from:n.address,to:s.to,token:o.je,txGas:s.gas,tokenGasPrice:0n,batchId:0n,batchNonce:u,deadline:p,data:s.data};if(!w.to)throw Error("Cannot send a transaction without a `to` address");if(!w.txGas)throw Error("Cannot send a transaction without a `gas` value");if(!w.data)throw Error("Cannot send a transaction without a `data` value");let y=(0,e.E)([{type:"address"},{type:"address"},{type:"address"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"bytes32"}],[w.from,w.to,w.token,w.txGas,w.tokenGasPrice,w.batchId,w.batchNonce,(0,i.w)(w.data)]);return[w,await n.signMessage({message:y})]}async function l(t){let[a,n]=await h(t),e=await fetch("https://api.biconomy.io/api/v2/meta-tx/native",{method:"POST",body:(0,c.P)({apiId:t.gasless.apiId,params:[a,n],from:a.from,to:a.to,gasLimit:a.txGas}),headers:{"x-api-key":t.gasless.apiKey,"Content-Type":"application/json;charset=utf-8"}});if(!e.ok){var o;throw null===(o=e.body)||void 0===o||o.cancel(),Error("Failed to send transaction: ".concat(await e.text()))}let r=await e.json(),i=r.txHash;if((0,s.v)(i))return{transactionHash:i,chain:t.transaction.chain,client:t.transaction.client};throw Error("Failed to send transaction: ".concat((0,c.P)(r)))}}}]);