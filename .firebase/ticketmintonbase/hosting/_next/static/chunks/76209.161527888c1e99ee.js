"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[76209],{76209:function(a,e,t){t.d(e,{relayOpenZeppelinTransaction:function(){return l}});var n=t(47275),r=t(1793),s=t(49859),i=t(94293);async function o(a){let{account:e,serializableTransaction:t,transaction:r,gasless:s}=a,o=(0,n.getContract)({address:s.relayerForwarderAddress,chain:r.chain,client:r.client}),l=await (0,i.readContract)({contract:o,method:"function getNonce(address) view returns (uint256)",params:[e.address]}),[p,u]=await (async()=>{var a,n;if(!t.to)throw Error("OpenZeppelin transactions must have a 'to' address");if(!t.gas)throw Error("OpenZeppelin transactions must have a 'gas' value");if(!t.data)throw Error("OpenZeppelin transactions must have a 'data' value");if(s.experimentalChainlessSupport){let a={from:e.address,to:t.to,value:0n,gas:t.gas,nonce:l,data:t.data,chainid:BigInt(r.chain.id)};return[await e.signTypedData({domain:{name:"GSNv2 Forwarder",version:"0.0.1",verifyingContract:o.address},message:a,primaryType:"ForwardRequest",types:{ForwardRequest:c}}),a]}let i={from:e.address,to:t.to,value:0n,gas:t.gas,nonce:l,data:t.data};return[await e.signTypedData({domain:{name:null!==(a=s.domainName)&&void 0!==a?a:"GSNv2 Forwarder",version:null!==(n=s.domainVersion)&&void 0!==n?n:"0.0.1",chainId:r.chain.id,verifyingContract:o.address},message:i,primaryType:"ForwardRequest",types:{ForwardRequest:d}}),i]})();return{message:u,signature:p,messageType:"forward"}}let d=[{name:"from",type:"address"},{name:"to",type:"address"},{name:"value",type:"uint256"},{name:"gas",type:"uint256"},{name:"nonce",type:"uint256"},{name:"data",type:"bytes"}],c=[{name:"from",type:"address"},{name:"to",type:"address"},{name:"value",type:"uint256"},{name:"gas",type:"uint256"},{name:"nonce",type:"uint256"},{name:"data",type:"bytes"},{name:"chainid",type:"uint256"}];async function l(a){let{message:e,messageType:t,signature:n}=await o(a),i=await fetch(a.gasless.relayerUrl,{method:"POST",body:(0,s.P)({request:e,type:t,signature:n,forwarderAddress:a.gasless.relayerForwarderAddress})});if(!i.ok){var d;throw null===(d=i.body)||void 0===d||d.cancel(),Error("Failed to send transaction: ".concat(await i.text()))}let c=await i.json();if(!c.result)throw Error("Relay transaction failed: ".concat(c.message));let l=JSON.parse(c.result).txHash;if((0,r.v)(l))return{transactionHash:l,chain:a.transaction.chain,client:a.transaction.client};throw Error("Failed to send transaction: ".concat((0,s.P)(c)))}}}]);