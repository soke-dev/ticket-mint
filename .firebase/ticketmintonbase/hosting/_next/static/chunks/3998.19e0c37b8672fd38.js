"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3998],{3998:function(e,t,i){let s,n,r,a,A,o,l,h;i.r(t),i.d(t,{ModelViewer:function(){return oE},default:function(){return oC}});var c,g,u,d,p,m,I,f,E,C,B,Q,y,w,v,b,S,x,M,R,D,T,L,F,k,U,N,G,_,P,O,H,q,K,J,V,Y,j,z,W,X,Z,$,ee,et,ei=i(3827),es=i(3807),en=i(66376),er=i(59190);/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ea=null!=navigator.xr&&null!=self.XRSession&&null!=navigator.xr.isSessionSupported,eA=ea&&null!=self.XRSession.prototype.requestHitTestSource,eo=null!=self.ResizeObserver,el=null!=self.IntersectionObserver;(()=>{let e=navigator.userAgent||navigator.vendor||self.opera;/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))})(),/\bCrOS\b/.test(navigator.userAgent);let eh=/android/i.test(navigator.userAgent),ec=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1;/Safari\//.test(navigator.userAgent);let eg=/firefox/i.test(navigator.userAgent),eu=/OculusBrowser/.test(navigator.userAgent);ec&&/CriOS\//.test(navigator.userAgent);let ed=eh&&!eg&&!eu,ep=!!(window.webkit&&window.webkit.messageHandlers),em=(()=>{if(!ec)return!1;if(ep)return!!/CriOS\/|EdgiOS\/|FxiOS\/|GSA\/|DuckDuckGo\//.test(navigator.userAgent);{let e=document.createElement("a");return!!(e.relList&&e.relList.supports&&e.relList.supports("ar"))}})(),eI=e=>e&&"null"!==e?eE(e):null,ef=()=>{if(eA)return;let e=[];throw ea||e.push("WebXR Device API"),eA||e.push("WebXR Hit Test API"),Error("The following APIs are required for AR, but are missing in this browser: ".concat(e.join(", ")))},eE=e=>new URL(e,window.location.toString()).toString(),eC=(e,t)=>{let i=null,s=function(){for(var s=arguments.length,n=Array(s),r=0;r<s;r++)n[r]=arguments[r];null==i&&(e(...n),i=self.setTimeout(()=>i=null,t))};return s.flush=()=>{null!=i&&(self.clearTimeout(i),i=null)},s},eB=(e,t)=>{let i=null;return function(){for(var s=arguments.length,n=Array(s),r=0;r<s;r++)n[r]=arguments[r];null!=i&&self.clearTimeout(i),i=self.setTimeout(()=>{i=null,e(...n)},t)}},eQ=(e,t,i)=>Math.max(t,Math.min(i,e)),ey=(()=>{let e=(()=>{var e;if(null===(e=document.documentElement.getAttribute("itemtype"))||void 0===e?void 0:e.includes("schema.org/SearchResultsPage"))return!0;for(let e of null!=document.head?Array.from(document.head.querySelectorAll("meta")):[])if("viewport"===e.name)return!0;return!1})();return e||console.warn('No <meta name="viewport"> detected; <model-viewer> will cap pixel density at 1.'),()=>e?window.devicePixelRatio:1})(),ew=(()=>{let e=new RegExp("[?&]".concat("model-viewer-debug-mode","(&|$)"));return()=>self.ModelViewerElement&&self.ModelViewerElement.debugMode||self.location&&self.location.search&&self.location.search.match(e)})(),ev=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise(t=>setTimeout(t,e))},eb=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise(s=>{e.addEventListener(t,function n(r){(!i||i(r))&&(s(r),e.removeEventListener(t,n))})})};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eS=function(e,t,i,s){var n,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var A=e.length-1;A>=0;A--)(n=e[A])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};let ex=Symbol("currentEnvironmentMap"),eM=Symbol("currentBackground"),eR=Symbol("updateEnvironment"),eD=Symbol("cancelEnvironmentUpdate");var eT=i(56093);/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eL(){let e=(0,eT._)(['\n<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000">\n    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement\n         support for dynamic re-coloring of UI components -->\n    <defs>\n      <filter id="drop-shadow" x="-100%" y="-100%" width="300%" height="300%">\n        <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>\n        <feOffset dx="0" dy="0" result="offsetblur"/>\n        <feFlood flood-color="#000000"/>\n        <feComposite in2="offsetblur" operator="in"/>\n        <feMerge>\n          <feMergeNode/>\n          <feMergeNode in="SourceGraphic"/>\n        </feMerge>\n      </filter>\n    </defs>\n    <path filter="url(#drop-shadow)" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>']);return eL=function(){return e},e}var eF=(0,er.dy)(eL());/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(){let e=(0,eT._)(['\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="36">\n    <defs>\n        <path id="A" d="M.001.232h24.997V36H.001z" />\n    </defs>\n    <g transform="translate(-11 -4)" fill="none" fill-rule="evenodd">\n        <path fill-opacity="0" fill="#fff" d="M0 0h44v44H0z" />\n        <g transform="translate(11 3)">\n            <path d="M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z" fill-opacity=".5" fill="#e4e4e4" />\n            <path d="M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91" fill-opacity=".6" fill="#000" />\n            <path d="M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z" fill="#fff" />\n            <g transform="translate(0 .769)">\n                <mask id="B" fill="#fff">\n                    <use xlink:href="#A" />\n                </mask>\n                <path d="M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325" fill-opacity=".05" fill="#000" mask="url(#B)" />\n            </g>\n        </g>\n    </g>\n</svg>']);return ek=function(){return e},e}var eU=(0,er.dy)(ek());/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(){let e=(0,eT._)(['\n<svg version="1.1" id="view_x5F_in_x5F_AR_x5F_icon"\n	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px"\n	 viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">\n<rect id="Bounding_Box" x="0" y="0" fill="none" width="24" height="24"/>\n<g id="Art_layer">\n	<path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z"/>\n	<path d="M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z"/>\n	<path d="M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z"/>\n	<path d="M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z"/>\n	<g>\n		<path d="M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3\n			l5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62\n			l4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z"/>\n	</g>\n</g>\n</svg>']);return eN=function(){return e},e}var eG=(0,er.dy)(eN());/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_(){let e=(0,eT._)(['\n<style>\n:host {\n  display: block;\n  position: relative;\n  contain: strict;\n  width: 300px;\n  height: 150px;\n}\n\n/* NOTE: This rule set is our integration surface area with the\n * :focus-visible polyfill.\n *\n * @see https://github.com/WICG/focus-visible/pull/196 */\n:host([data-js-focus-visible]:focus:not(.focus-visible)),\n:host([data-js-focus-visible]) :focus:not(.focus-visible) {\n  outline: none;\n}\n\n.container {\n  position: relative;\n  overflow: hidden;\n}\n\n.userInput {\n  width: 100%;\n  height: 100%;\n  display: none;\n  position: relative;\n}\n\ncanvas {\n  position: absolute;\n  display: none;\n  pointer-events: none;\n  /* NOTE(cdata): Chrome 76 and below apparently have a bug\n   * that causes our canvas not to display pixels unless it is\n   * on its own render layer\n   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893\n   */\n  transform: translateZ(0);\n}\n\n.show {\n  display: block;\n}\n\n/* Adapted from HTML5 Boilerplate\n *\n * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */\n.screen-reader-only {\n  border: 0;\n  left: 0;\n  top: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  white-space: nowrap;\n  width: 1px;\n  pointer-events: none;\n}\n\n.slot {\n  position: absolute;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.slot > * {\n  pointer-events: initial;\n}\n\n.annotation-wrapper ::slotted(*) {\n  opacity: var(--max-hotspot-opacity, 1);\n  transition: opacity 0.3s;\n}\n\n.pointer-tumbling .annotation-wrapper ::slotted(*) {\n  pointer-events: none;\n}\n\n.annotation-wrapper ::slotted(*) {\n  pointer-events: initial;\n}\n\n.annotation-wrapper.hide ::slotted(*) {\n  opacity: var(--min-hotspot-opacity, 0.25);\n}\n\n.slot.poster {\n  display: none;\n  background-color: inherit;\n}\n\n.slot.poster.show {\n  display: inherit;\n}\n\n.slot.poster > * {\n  pointer-events: initial;\n}\n\n.slot.poster:not(.show) > * {\n  pointer-events: none;\n}\n\n#default-poster {\n  width: 100%;\n  height: 100%;\n  /* The default poster is a <button> so we need to set display\n   * to prevent it from being affected by text-align: */\n  display: block;\n  position: absolute;\n  border: none;\n  padding: 0;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-color: #fff0;\n}\n\n#default-progress-bar {\n  display: block;\n  position: relative;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  overflow: hidden;\n}\n\n#default-progress-bar > .bar {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: var(--progress-bar-height, 5px);\n  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));\n  transition: transform 0.09s;\n  transform-origin: top left;\n  transform: scaleX(0);\n  overflow: hidden;\n}\n\n#default-progress-bar > .bar.hide {\n  transition: opacity 0.3s 1s;\n  opacity: 0;\n}\n\n.centered {\n  align-items: center;\n  justify-content: center;\n}\n\n.cover {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n}\n\n.slot.interaction-prompt {\n  display: var(--interaction-prompt-display, flex);\n  overflow: hidden;\n  opacity: 0;\n  will-change: opacity;\n  transition: opacity 0.3s;\n}\n\n.slot.interaction-prompt.visible {\n  opacity: 1;\n}\n\n.animated-container {\n  will-change: transform, opacity;\n  opacity: 0;\n  transition: opacity 0.3s;\n}\n\n.slot.interaction-prompt > * {\n  pointer-events: none;\n}\n\n.slot.ar-button {\n  -moz-user-select: none;\n  -webkit-tap-highlight-color: transparent;\n  user-select: none;\n\n  display: var(--ar-button-display, block);\n}\n\n.slot.ar-button:not(.enabled) {\n  display: none;\n}\n\n.fab {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-sizing: border-box;\n  width: 40px;\n  height: 40px;\n  cursor: pointer;\n  background-color: #fff;\n  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);\n  border-radius: 100px;\n}\n\n.fab > * {\n  opacity: 0.87;\n}\n\n#default-ar-button {\n  position: absolute;\n  bottom: 16px;\n  right: 16px;\n  transform: scale(var(--ar-button-scale, 1));\n  transform-origin: bottom right;\n}\n\n.slot.pan-target {\n  display: block;\n  position: absolute;\n  width: 0;\n  height: 0;\n  left: 50%;\n  top: 50%;\n  transform: translate3d(-50%, -50%, 0);\n  background-color: transparent;\n  opacity: 0;\n  transition: opacity 0.3s;\n}\n\n#default-pan-target {\n  width: 6px;\n  height: 6px;\n  border-radius: 6px;\n  border: 1px solid white;\n  box-shadow: 0px 0px 2px 1px rgba(0, 0, 0, 0.8);\n}\n\n.slot.default {\n  pointer-events: none;\n}\n\n.slot.progress-bar {\n  pointer-events: none;\n}\n\n.slot.exit-webxr-ar-button {\n  pointer-events: none;\n}\n\n.slot.exit-webxr-ar-button:not(.enabled) {\n  display: none;\n}\n\n#default-exit-webxr-ar-button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  top: env(safe-area-inset-top, 16px);\n  right: 16px;\n  width: 40px;\n  height: 40px;\n  box-sizing: border-box;\n}\n\n#default-exit-webxr-ar-button > svg {\n  fill: #fff;\n}\n</style>\n<div class="container">\n  <div class="userInput" tabindex="0" role="img"\n      aria-label="3D model">\n      <div class="slot canvas">\n        <slot name="canvas">\n          <canvas></canvas>\n        </slot>\n      </div>\n\n  </div>\n\n  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM\n        will have their <slot> elements removed by ShadyCSS -->\n  <div class="slot poster">\n    <slot name="poster">\n      <button type="button" id="default-poster" aria-hidden="true" aria-label="Loading 3D model"></button>\n    </slot>\n  </div>\n\n  <div class="slot ar-button">\n    <slot name="ar-button">\n      <a id="default-ar-button" part="default-ar-button" class="fab"\n          tabindex="2"\n          aria-label="View in your space">\n        ','\n      </a>\n    </slot>\n  </div>\n\n  <div class="slot pan-target">\n    <slot name="pan-target">\n      <div id="default-pan-target">\n      </div>\n    </slot>\n  </div>\n\n  <div class="slot interaction-prompt cover centered">\n    <div id="prompt" class="animated-container">\n      <slot name="interaction-prompt" aria-hidden="true">\n        ','\n      </slot>\n    </div>\n  </div>\n\n  <div id="finger0" class="animated-container cover">\n    <slot name="finger0" aria-hidden="true">\n    </slot>\n  </div>\n  <div id="finger1" class="animated-container cover">\n    <slot name="finger1" aria-hidden="true">\n    </slot>\n  </div>\n\n  <div class="slot default">\n    <slot></slot>\n\n    <div class="slot progress-bar">\n      <slot name="progress-bar">\n        <div id="default-progress-bar" aria-hidden="true">\n          <div class="bar" part="default-progress-bar"></div>\n        </div>\n      </slot>\n    </div>\n\n    <div class="slot exit-webxr-ar-button">\n      <slot name="exit-webxr-ar-button">\n        <a id="default-exit-webxr-ar-button" part="default-exit-webxr-ar-button"\n            tabindex="3"\n            aria-label="Exit AR"\n            aria-hidden="true">\n          ','\n        </a>\n      </slot>\n    </div>\n  </div>\n</div>\n<div class="screen-reader-only" role="region" aria-label="Live announcements">\n  <span id="status" role="status"></span>\n</div>']);return e_=function(){return e},e}let eP=(0,er.dy)(e_(),eG,eU,eF),eO=e=>{(0,er.sY)(eP,e)},eH=new WeakMap;class eq extends en.aNw{setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,s){let n=new en.hH6(this.manager);n.setPath(this.path),n.setResponseType("arraybuffer"),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(e,e=>{this.decodeDracoFile(e,t).catch(s)},i,s)}decodeDracoFile(e,t,i,s){let n={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!i};return this.decodeGeometry(e,n).then(t)}decodeGeometry(e,t){let i;let s=JSON.stringify(t);if(eH.has(e)){let t=eH.get(e);if(t.key===s)return t.promise;if(0===e.byteLength)throw Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let n=this.workerNextTaskID++,r=e.byteLength,a=this._getWorker(n,r).then(s=>(i=s,new Promise((s,r)=>{i._callbacks[n]={resolve:s,reject:r},i.postMessage({type:"decode",id:n,taskConfig:t,buffer:e},[e])}))).then(e=>this._createGeometry(e.geometry));return a.catch(()=>!0).then(()=>{i&&n&&this._releaseTask(i,n)}),eH.set(e,{key:s,promise:a}),a}_createGeometry(e){let t=new en.u9r;e.index&&t.setIndex(new en.TlE(e.index.array,1));for(let i=0;i<e.attributes.length;i++){let s=e.attributes[i],n=s.name,r=s.array,a=s.itemSize;t.setAttribute(n,new en.TlE(r,a))}return t}_loadLibrary(e,t){let i=new en.hH6(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((t,s)=>{i.load(e,t,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(t=>{let i=t[0];e||(this.decoderConfig.wasmBinary=t[1]);let s=eK.toString(),n=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([n]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){let i=t.data;switch(i.type){case"decode":e._callbacks[i.id].resolve(i);break;case"error":e._callbacks[i.id].reject(i);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+i.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort(function(e,t){return e._taskLoad>t._taskLoad?-1:1});let i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}}function eK(){let e,t;onmessage=function(i){let s=i.data;switch(s.type){case"init":e=s.decoderConfig,t=new Promise(function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)});break;case"decode":let n=s.buffer,r=s.taskConfig;t.then(e=>{let t=e.draco,i=new t.Decoder,a=new t.DecoderBuffer;a.Init(new Int8Array(n),n.byteLength);try{let e=function(e,t,i,s){let n,r;let a=s.attributeIDs,A=s.attributeTypes,o=t.GetEncodedGeometryType(i);if(o===e.TRIANGULAR_MESH)n=new e.Mesh,r=t.DecodeBufferToMesh(i,n);else if(o===e.POINT_CLOUD)n=new e.PointCloud,r=t.DecodeBufferToPointCloud(i,n);else throw Error("THREE.DRACOLoader: Unexpected geometry type.");if(!r.ok()||0===n.ptr)throw Error("THREE.DRACOLoader: Decoding failed: "+r.error_msg());let l={index:null,attributes:[]};for(let i in a){let r,o;let h=self[A[i]];if(s.useUniqueIDs)o=a[i],r=t.GetAttributeByUniqueId(n,o);else{if(-1===(o=t.GetAttributeId(n,e[a[i]])))continue;r=t.GetAttribute(n,o)}l.attributes.push(function(e,t,i,s,n,r){let a=r.num_components(),A=i.num_points()*a,o=A*n.BYTES_PER_ELEMENT,l=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,n),h=e._malloc(o);t.GetAttributeDataArrayForAllPoints(i,r,l,o,h);let c=new n(e.HEAPF32.buffer,h,A).slice();return e._free(h),{name:s,array:c,itemSize:a}}(e,t,n,i,h,r))}return o===e.TRIANGULAR_MESH&&(l.index=function(e,t,i){let s=3*i.num_faces(),n=4*s,r=e._malloc(n);t.GetTrianglesUInt32Array(i,n,r);let a=new Uint32Array(e.HEAPF32.buffer,r,s).slice();return e._free(r),{array:a,itemSize:1}}(e,t,n)),e.destroy(n),l}(t,i,a,r),n=e.attributes.map(e=>e.array.buffer);e.index&&n.push(e.index.array.buffer),self.postMessage({type:"decode",id:s.id,geometry:e},n)}catch(e){console.error(e),self.postMessage({type:"error",id:s.id,error:e.message})}finally{t.destroy(a),t.destroy(i)}})}}}class eJ extends en.aNw{load(e,t,i,s){let n;let r=this;n=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:en.Zp0.extractUrlBase(e),this.manager.itemStart(e);let a=function(t){s?s(t):console.error(t),r.manager.itemError(e),r.manager.itemEnd(e)},A=new en.hH6(this.manager);A.setPath(this.path),A.setResponseType("arraybuffer"),A.setRequestHeader(this.requestHeader),A.setWithCredentials(this.withCredentials),A.load(e,function(i){try{r.parse(i,n,function(i){t(i),r.manager.itemEnd(e)},a)}catch(e){a(e)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return -1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return -1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,s){let n;let r={},a={};if("string"==typeof e)n=JSON.parse(e);else if(e instanceof ArrayBuffer){if(en.Zp0.decodeText(new Uint8Array(e,0,4))===e9){try{r[eY.KHR_BINARY_GLTF]=new te(e)}catch(e){s&&s(e);return}n=JSON.parse(r[eY.KHR_BINARY_GLTF].content)}else n=JSON.parse(en.Zp0.decodeText(new Uint8Array(e)))}else n=e;if(void 0===n.asset||n.asset.version[0]<2){s&&s(Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let A=new tQ(n,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});A.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){let t=this.pluginCallbacks[e](A);a[t.name]=t,r[t.name]=!0}if(n.extensionsUsed)for(let e=0;e<n.extensionsUsed.length;++e){let t=n.extensionsUsed[e],i=n.extensionsRequired||[];switch(t){case eY.KHR_MATERIALS_UNLIT:r[t]=new ez;break;case eY.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:r[t]=new tn;break;case eY.KHR_DRACO_MESH_COMPRESSION:r[t]=new tt(n,this.dracoLoader);break;case eY.KHR_TEXTURE_TRANSFORM:r[t]=new ti;break;case eY.KHR_MESH_QUANTIZATION:r[t]=new tr;break;default:i.indexOf(t)>=0&&void 0===a[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}A.setExtensions(r),A.setPlugins(a),A.parse(i,s)}parseAsync(e,t){let i=this;return new Promise(function(s,n){i.parse(e,t,s,n)})}constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new eX(e)}),this.register(function(e){return new e4(e)}),this.register(function(e){return new e8(e)}),this.register(function(e){return new e$(e)}),this.register(function(e){return new e0(e)}),this.register(function(e){return new e1(e)}),this.register(function(e){return new e2(e)}),this.register(function(e){return new eW(e)}),this.register(function(e){return new e3(e)}),this.register(function(e){return new eZ(e)}),this.register(function(e){return new ej(e)}),this.register(function(e){return new e5(e)}),this.register(function(e){return new e6(e)})}}function eV(){let e={};return{get:function(t){return e[t]},add:function(t,i){e[t]=i},remove:function(t){delete e[t]},removeAll:function(){e={}}}}let eY={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class ej{_markDefs(){let e=this.parser,t=this.parser.json.nodes||[];for(let i=0,s=t.length;i<s;i++){let s=t[i];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){let t;let i=this.parser,s="light:"+e,n=i.cache.get(s);if(n)return n;let r=i.json,a=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e],A=new en.Ilk(16777215);void 0!==a.color&&A.fromArray(a.color);let o=void 0!==a.range?a.range:0;switch(a.type){case"directional":(t=new en.Ox3(A)).target.position.set(0,0,-1),t.add(t.target);break;case"point":(t=new en.cek(A)).distance=o;break;case"spot":(t=new en.PMe(A)).distance=o,a.spot=a.spot||{},a.spot.innerConeAngle=void 0!==a.spot.innerConeAngle?a.spot.innerConeAngle:0,a.spot.outerConeAngle=void 0!==a.spot.outerConeAngle?a.spot.outerConeAngle:Math.PI/4,t.angle=a.spot.outerConeAngle,t.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,t.target.position.set(0,0,-1),t.add(t.target);break;default:throw Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return t.position.set(0,0,0),t.decay=2,void 0!==a.intensity&&(t.intensity=a.intensity),t.name=i.createUniqueName(a.name||"light_"+e),n=Promise.resolve(t),i.cache.add(s,n),n}createNodeAttachment(e){let t=this,i=this.parser,s=i.json.nodes[e],n=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===n?null:this._loadLight(n).then(function(e){return i._getNodeRef(t.cache,n,e)})}constructor(e){this.parser=e,this.name=eY.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}}class ez{getMaterialType(){return en.vBJ}extendParams(e,t,i){let s=[];e.color=new en.Ilk(1,1,1),e.opacity=1;let n=t.pbrMetallicRoughness;if(n){if(Array.isArray(n.baseColorFactor)){let t=n.baseColorFactor;e.color.fromArray(t),e.opacity=t[3]}void 0!==n.baseColorTexture&&s.push(i.assignTexture(e,"map",n.baseColorTexture,en.knz))}return Promise.all(s)}constructor(){this.name=eY.KHR_MATERIALS_UNLIT}}class eW{extendMaterialParams(e,t){let i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let s=i.extensions[this.name].emissiveStrength;return void 0!==s&&(t.emissiveIntensity=s),Promise.resolve()}constructor(e){this.parser=e,this.name=eY.KHR_MATERIALS_EMISSIVE_STRENGTH}}class eX{getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?en.EJi:null}extendMaterialParams(e,t){let i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let n=[],r=s.extensions[this.name];if(void 0!==r.clearcoatFactor&&(t.clearcoat=r.clearcoatFactor),void 0!==r.clearcoatTexture&&n.push(i.assignTexture(t,"clearcoatMap",r.clearcoatTexture)),void 0!==r.clearcoatRoughnessFactor&&(t.clearcoatRoughness=r.clearcoatRoughnessFactor),void 0!==r.clearcoatRoughnessTexture&&n.push(i.assignTexture(t,"clearcoatRoughnessMap",r.clearcoatRoughnessTexture)),void 0!==r.clearcoatNormalTexture&&(n.push(i.assignTexture(t,"clearcoatNormalMap",r.clearcoatNormalTexture)),void 0!==r.clearcoatNormalTexture.scale)){let e=r.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new en.FM8(e,e)}return Promise.all(n)}constructor(e){this.parser=e,this.name=eY.KHR_MATERIALS_CLEARCOAT}}class eZ{getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?en.EJi:null}extendMaterialParams(e,t){let i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let n=[],r=s.extensions[this.name];return void 0!==r.iridescenceFactor&&(t.iridescence=r.iridescenceFactor),void 0!==r.iridescenceTexture&&n.push(i.assignTexture(t,"iridescenceMap",r.iridescenceTexture)),void 0!==r.iridescenceIor&&(t.iridescenceIOR=r.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==r.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=r.iridescenceThicknessMinimum),void 0!==r.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=r.iridescenceThicknessMaximum),void 0!==r.iridescenceThicknessTexture&&n.push(i.assignTexture(t,"iridescenceThicknessMap",r.iridescenceThicknessTexture)),Promise.all(n)}constructor(e){this.parser=e,this.name=eY.KHR_MATERIALS_IRIDESCENCE}}class e${getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?en.EJi:null}extendMaterialParams(e,t){let i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let n=[];t.sheenColor=new en.Ilk(0,0,0),t.sheenRoughness=0,t.sheen=1;let r=s.extensions[this.name];return void 0!==r.sheenColorFactor&&t.sheenColor.fromArray(r.sheenColorFactor),void 0!==r.sheenRoughnessFactor&&(t.sheenRoughness=r.sheenRoughnessFactor),void 0!==r.sheenColorTexture&&n.push(i.assignTexture(t,"sheenColorMap",r.sheenColorTexture,en.knz)),void 0!==r.sheenRoughnessTexture&&n.push(i.assignTexture(t,"sheenRoughnessMap",r.sheenRoughnessTexture)),Promise.all(n)}constructor(e){this.parser=e,this.name=eY.KHR_MATERIALS_SHEEN}}class e0{getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?en.EJi:null}extendMaterialParams(e,t){let i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let n=[],r=s.extensions[this.name];return void 0!==r.transmissionFactor&&(t.transmission=r.transmissionFactor),void 0!==r.transmissionTexture&&n.push(i.assignTexture(t,"transmissionMap",r.transmissionTexture)),Promise.all(n)}constructor(e){this.parser=e,this.name=eY.KHR_MATERIALS_TRANSMISSION}}class e1{getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?en.EJi:null}extendMaterialParams(e,t){let i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let n=[],r=s.extensions[this.name];t.thickness=void 0!==r.thicknessFactor?r.thicknessFactor:0,void 0!==r.thicknessTexture&&n.push(i.assignTexture(t,"thicknessMap",r.thicknessTexture)),t.attenuationDistance=r.attenuationDistance||1/0;let a=r.attenuationColor||[1,1,1];return t.attenuationColor=new en.Ilk(a[0],a[1],a[2]),Promise.all(n)}constructor(e){this.parser=e,this.name=eY.KHR_MATERIALS_VOLUME}}class e2{getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?en.EJi:null}extendMaterialParams(e,t){let i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let s=i.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}constructor(e){this.parser=e,this.name=eY.KHR_MATERIALS_IOR}}class e3{getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?en.EJi:null}extendMaterialParams(e,t){let i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();let n=[],r=s.extensions[this.name];t.specularIntensity=void 0!==r.specularFactor?r.specularFactor:1,void 0!==r.specularTexture&&n.push(i.assignTexture(t,"specularIntensityMap",r.specularTexture));let a=r.specularColorFactor||[1,1,1];return t.specularColor=new en.Ilk(a[0],a[1],a[2]),void 0!==r.specularColorTexture&&n.push(i.assignTexture(t,"specularColorMap",r.specularColorTexture,en.knz)),Promise.all(n)}constructor(e){this.parser=e,this.name=eY.KHR_MATERIALS_SPECULAR}}class e4{loadTexture(e){let t=this.parser,i=t.json,s=i.textures[e];if(!s.extensions||!s.extensions[this.name])return null;let n=s.extensions[this.name],r=t.options.ktx2Loader;if(!r){if(!(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0))return null;throw Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures")}return t.loadTextureImage(e,n.source,r)}constructor(e){this.parser=e,this.name=eY.KHR_TEXTURE_BASISU}}class e8{loadTexture(e){let t=this.name,i=this.parser,s=i.json,n=s.textures[e];if(!n.extensions||!n.extensions[t])return null;let r=n.extensions[t],a=s.images[r.source],A=i.textureLoader;if(a.uri){let e=i.options.manager.getHandler(a.uri);null!==e&&(A=e)}return this.detectSupport().then(function(n){if(n)return i.loadTextureImage(e,r.source,A);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}constructor(e){this.parser=e,this.name=eY.EXT_TEXTURE_WEBP,this.isSupported=null}}class e5{loadBufferView(e){let t=this.parser.json,i=t.bufferViews[e];if(!i.extensions||!i.extensions[this.name])return null;{let e=i.extensions[this.name],s=this.parser.getDependency("buffer",e.buffer),n=this.parser.options.meshoptDecoder;if(!n||!n.supported){if(!(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0))return null;throw Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files")}return s.then(function(t){let i=e.byteOffset||0,s=e.byteLength||0,r=e.count,a=e.byteStride,A=new Uint8Array(t,i,s);return n.decodeGltfBufferAsync?n.decodeGltfBufferAsync(r,a,A,e.mode,e.filter).then(function(e){return e.buffer}):n.ready.then(function(){let t=new ArrayBuffer(r*a);return n.decodeGltfBuffer(new Uint8Array(t),r,a,A,e.mode,e.filter),t})})}}constructor(e){this.name=eY.EXT_MESHOPT_COMPRESSION,this.parser=e}}class e6{createNodeMesh(e){let t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||void 0===i.mesh)return null;for(let e of t.meshes[i.mesh].primitives)if(e.mode!==tl.TRIANGLES&&e.mode!==tl.TRIANGLE_STRIP&&e.mode!==tl.TRIANGLE_FAN&&void 0!==e.mode)return null;let s=i.extensions[this.name].attributes,n=[],r={};for(let e in s)n.push(this.parser.getDependency("accessor",s[e]).then(t=>(r[e]=t,r[e])));return n.length<1?null:(n.push(this.parser.createNodeMesh(e)),Promise.all(n).then(e=>{let t=e.pop(),i=t.isGroup?t.children:[t],s=e[0].count,n=[];for(let e of i){let t=new en.yGw,i=new en.Pa4,a=new en._fP,A=new en.Pa4(1,1,1),o=new en.SPe(e.geometry,e.material,s);for(let e=0;e<s;e++)r.TRANSLATION&&i.fromBufferAttribute(r.TRANSLATION,e),r.ROTATION&&a.fromBufferAttribute(r.ROTATION,e),r.SCALE&&A.fromBufferAttribute(r.SCALE,e),o.setMatrixAt(e,t.compose(i,a,A));for(let t in r)"TRANSLATION"!==t&&"ROTATION"!==t&&"SCALE"!==t&&e.geometry.setAttribute(t,r[t]);en.Tme.prototype.copy.call(o,e),o.frustumCulled=!1,this.parser.assignFinalMaterial(o),n.push(o)}return t.isGroup?(t.clear(),t.add(...n),t):n[0]}))}constructor(e){this.name=eY.EXT_MESH_GPU_INSTANCING,this.parser=e}}let e9="glTF",e7={JSON:1313821514,BIN:5130562};class te{constructor(e){this.name=eY.KHR_BINARY_GLTF,this.content=null,this.body=null;let t=new DataView(e,0,12);if(this.header={magic:en.Zp0.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==e9)throw Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw Error("THREE.GLTFLoader: Legacy binary file detected.");let i=this.header.length-12,s=new DataView(e,12),n=0;for(;n<i;){let t=s.getUint32(n,!0);n+=4;let i=s.getUint32(n,!0);if(n+=4,i===e7.JSON){let i=new Uint8Array(e,12+n,t);this.content=en.Zp0.decodeText(i)}else if(i===e7.BIN){let i=12+n;this.body=e.slice(i,i+t)}n+=t}if(null===this.content)throw Error("THREE.GLTFLoader: JSON content not found.")}}class tt{decodePrimitive(e,t){let i=this.json,s=this.dracoLoader,n=e.extensions[this.name].bufferView,r=e.extensions[this.name].attributes,a={},A={},o={};for(let e in r)a[td[e]||e.toLowerCase()]=r[e];for(let t in e.attributes){let s=td[t]||t.toLowerCase();if(void 0!==r[t]){let n=i.accessors[e.attributes[t]],r=th[n.componentType];o[s]=r.name,A[s]=!0===n.normalized}}return t.getDependency("bufferView",n).then(function(e){return new Promise(function(t){s.decodeDracoFile(e,function(e){for(let t in e.attributes){let i=e.attributes[t],s=A[t];void 0!==s&&(i.normalized=s)}t(e)},a,o)})})}constructor(e,t){if(!t)throw Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=eY.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}}class ti{extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}constructor(){this.name=eY.KHR_TEXTURE_TRANSFORM}}class ts extends en.Wid{copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;let t={specular:{value:new en.Ilk().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=t,this.onBeforeCompile=function(e){for(let i in t)e.uniforms[i]=t[i];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>","#ifdef USE_SPECULARMAP\n	uniform sampler2D specularMap;\n#endif").replace("#include <metalnessmap_pars_fragment>","#ifdef USE_GLOSSINESSMAP\n	uniform sampler2D glossinessMap;\n#endif").replace("#include <roughnessmap_fragment>","vec3 specularFactor = specular;\n#ifdef USE_SPECULARMAP\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture\n	specularFactor *= texelSpecular.rgb;\n#endif").replace("#include <metalnessmap_fragment>","float glossinessFactor = glossiness;\n#ifdef USE_GLOSSINESSMAP\n	vec4 texelGlossiness = texture2D( glossinessMap, vUv );\n	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture\n	glossinessFactor *= texelGlossiness.a;\n#endif").replace("#include <lights_physical_fragment>","PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.\nmaterial.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\nmaterial.specularColor = specularFactor;")},Object.defineProperties(this,{specular:{get:function(){return t.specular.value},set:function(e){t.specular.value=e}},specularMap:{get:function(){return t.specularMap.value},set:function(e){t.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return t.glossiness.value},set:function(e){t.glossiness.value=e}},glossinessMap:{get:function(){return t.glossinessMap.value},set:function(e){t.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}}class tn{getMaterialType(){return ts}extendParams(e,t,i){let s=t.extensions[this.name];e.color=new en.Ilk(1,1,1),e.opacity=1;let n=[];if(Array.isArray(s.diffuseFactor)){let t=s.diffuseFactor;e.color.fromArray(t),e.opacity=t[3]}if(void 0!==s.diffuseTexture&&n.push(i.assignTexture(e,"map",s.diffuseTexture,en.knz)),e.emissive=new en.Ilk(0,0,0),e.glossiness=void 0!==s.glossinessFactor?s.glossinessFactor:1,e.specular=new en.Ilk(1,1,1),Array.isArray(s.specularFactor)&&e.specular.fromArray(s.specularFactor),void 0!==s.specularGlossinessTexture){let t=s.specularGlossinessTexture;n.push(i.assignTexture(e,"glossinessMap",t)),n.push(i.assignTexture(e,"specularMap",t,en.knz))}return Promise.all(n)}createMaterial(e){let t=new ts(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=void 0===e.emissiveIntensity?1:e.emissiveIntensity,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=en.IOt,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t}constructor(){this.name=eY.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}}class tr{constructor(){this.name=eY.KHR_MESH_QUANTIZATION}}class ta extends en._C8{copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,n=e*s*3+s;for(let e=0;e!==s;e++)t[e]=i[n+e];return t}interpolate_(e,t,i,s){let n=this.resultBuffer,r=this.sampleValues,a=this.valueSize,A=2*a,o=3*a,l=s-t,h=(i-t)/l,c=h*h,g=c*h,u=e*o,d=u-o,p=-2*g+3*c,m=g-c,I=1-p,f=m-c+h;for(let e=0;e!==a;e++){let t=r[d+e+a],i=r[d+e+A]*l,s=r[u+e+a],o=r[u+e]*l;n[e]=I*t+f*i+p*s+m*o}return n}constructor(e,t,i,s){super(e,t,i,s)}}let tA=new en._fP;class to extends ta{interpolate_(e,t,i,s){let n=super.interpolate_(e,t,i,s);return tA.fromArray(n).normalize().toArray(n),n}}let tl={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},th={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},tc={9728:en.TyD,9729:en.wem,9984:en.YLQ,9985:en.qyh,9986:en.aH4,9987:en.D1R},tg={33071:en.uWy,33648:en.OoA,10497:en.rpg},tu={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},td={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},tp={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},tm={CUBICSPLINE:void 0,LINEAR:en.NMF,STEP:en.Syv},tI={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function tf(e,t,i){for(let s in i.extensions)void 0===e[s]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[s]=i.extensions[s])}function tE(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function tC(e){let t="",i=Object.keys(e).sort();for(let s=0,n=i.length;s<n;s++)t+=i[s]+":"+e[i[s]]+";";return t}function tB(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class tQ{setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){let i=this,s=this.json,n=this.extensions;this.cache.removeAll(),this._invokeAll(function(e){return e._markDefs&&e._markDefs()}),Promise.all(this._invokeAll(function(e){return e.beforeRoot&&e.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(t){let r={scene:t[0][s.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:s.asset,parser:i,userData:{}};tf(n,r,s),tE(r,s),Promise.all(i._invokeAll(function(e){return e.afterRoot&&e.afterRoot(r)})).then(function(){e(r)})}).catch(t)}_markDefs(){let e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){let s=t[i].joints;for(let t=0,i=s.length;t<i;t++)e[s[t]].isBone=!0}for(let t=0,s=e.length;t<s;t++){let s=e[t];void 0!==s.mesh&&(this._addNodeRef(this.meshCache,s.mesh),void 0!==s.skin&&(i[s.mesh].isSkinnedMesh=!0)),void 0!==s.camera&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;let s=i.clone(),n=(e,t)=>{let i=this.associations.get(e);for(let[s,r]of(null!=i&&this.associations.set(t,i),e.children.entries()))n(r,t.children[s])};return n(i,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){let t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){let s=e(t[i]);if(s)return s}return null}_invokeAll(e){let t=Object.values(this.plugins);t.unshift(this);let i=[];for(let s=0;s<t.length;s++){let n=e(t[s]);n&&i.push(n)}return i}getDependency(e,t){let i=e+":"+t,s=this.cache.get(i);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this.loadNode(t);break;case"mesh":s=this._invokeOne(function(e){return e.loadMesh&&e.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(e){return e.loadBufferView&&e.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(e){return e.loadMaterial&&e.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(e){return e.loadTexture&&e.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(e){return e.loadAnimation&&e.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:throw Error("Unknown type: "+e)}this.cache.add(i,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){let i=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(t,s){return i.getDependency(e,s)})),this.cache.add(e,t)}return t}loadBuffer(e){let t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[eY.KHR_BINARY_GLTF].body);let s=this.options;return new Promise(function(e,n){i.load(en.Zp0.resolveURL(t.uri,s.path),e,void 0,function(){n(Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){let t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){let i=t.byteLength||0,s=t.byteOffset||0;return e.slice(s,s+i)})}loadAccessor(e){let t=this,i=this.json,s=this.json.accessors[e];if(void 0===s.bufferView&&void 0===s.sparse)return Promise.resolve(null);let n=[];return void 0!==s.bufferView?n.push(this.getDependency("bufferView",s.bufferView)):n.push(null),void 0!==s.sparse&&(n.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),n.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(n).then(function(e){let n,r;let a=e[0],A=tu[s.type],o=th[s.componentType],l=o.BYTES_PER_ELEMENT,h=l*A,c=s.byteOffset||0,g=void 0!==s.bufferView?i.bufferViews[s.bufferView].byteStride:void 0,u=!0===s.normalized;if(g&&g!==h){let e=Math.floor(c/g),i="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+e+":"+s.count,h=t.cache.get(i);h||(n=new o(a,e*g,s.count*g/l),h=new en.vpT(n,g/l),t.cache.add(i,h)),r=new en.kB5(h,A,c%g/l,u)}else n=null===a?new o(s.count*A):new o(a,c,s.count*A),r=new en.TlE(n,A,u);if(void 0!==s.sparse){let t=tu.SCALAR,i=th[s.sparse.indices.componentType],n=s.sparse.indices.byteOffset||0,l=s.sparse.values.byteOffset||0,h=new i(e[1],n,s.sparse.count*t),c=new o(e[2],l,s.sparse.count*A);null!==a&&(r=new en.TlE(r.array.slice(),r.itemSize,r.normalized));for(let e=0,t=h.length;e<t;e++){let t=h[e];if(r.setX(t,c[e*A]),A>=2&&r.setY(t,c[e*A+1]),A>=3&&r.setZ(t,c[e*A+2]),A>=4&&r.setW(t,c[e*A+3]),A>=5)throw Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return r})}loadTexture(e){let t=this.json,i=this.options,s=t.textures[e].source,n=t.images[s],r=this.textureLoader;if(n.uri){let e=i.manager.getHandler(n.uri);null!==e&&(r=e)}return this.loadTextureImage(e,s,r)}loadTextureImage(e,t,i){let s=this,n=this.json,r=n.textures[e],a=n.images[t],A=(a.uri||a.bufferView)+":"+r.sampler;if(this.textureCache[A])return this.textureCache[A];let o=this.loadImageSource(t,i).then(function(t){t.flipY=!1,t.name=r.name||a.name||"";let i=(n.samplers||{})[r.sampler]||{};return t.magFilter=tc[i.magFilter]||en.wem,t.minFilter=tc[i.minFilter]||en.D1R,t.wrapS=tg[i.wrapS]||en.rpg,t.wrapT=tg[i.wrapT]||en.rpg,s.associations.set(t,{textures:e}),t}).catch(function(){return null});return this.textureCache[A]=o,o}loadImageSource(e,t){let i=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(e=>e.clone());let n=i.images[e],r=self.URL||self.webkitURL,a=n.uri||"",A=!1;if(void 0!==n.bufferView)a=this.getDependency("bufferView",n.bufferView).then(function(e){A=!0;let t=new Blob([e],{type:n.mimeType});return a=r.createObjectURL(t)});else if(void 0===n.uri)throw Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");let o=Promise.resolve(a).then(function(e){return new Promise(function(i,n){let r=i;!0===t.isImageBitmapLoader&&(r=function(e){let t=new en.xEZ(e);t.needsUpdate=!0,i(t)}),t.load(en.Zp0.resolveURL(e,s.path),r,void 0,n)})}).then(function(e){var t;return!0===A&&r.revokeObjectURL(a),e.userData.mimeType=n.mimeType||((t=n.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e}).catch(function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),e});return this.sourceCache[e]=o,o}assignTexture(e,t,i,s){let n=this;return this.getDependency("texture",i.index).then(function(r){if(void 0===i.texCoord||0==i.texCoord||"aoMap"===t&&1==i.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+t+" not yet supported."),n.extensions[eY.KHR_TEXTURE_TRANSFORM]){let e=void 0!==i.extensions?i.extensions[eY.KHR_TEXTURE_TRANSFORM]:void 0;if(e){let t=n.associations.get(r);r=n.extensions[eY.KHR_TEXTURE_TRANSFORM].extendTexture(r,e),n.associations.set(r,t)}}return void 0!==s&&(r.encoding=s),e[t]=r,r})}assignFinalMaterial(e){let t=e.geometry,i=e.material,s=void 0===t.attributes.tangent,n=void 0!==t.attributes.color,r=void 0===t.attributes.normal;if(e.isPoints){let e="PointsMaterial:"+i.uuid,t=this.cache.get(e);t||(t=new en.UY4,en.F5T.prototype.copy.call(t,i),t.color.copy(i.color),t.map=i.map,t.sizeAttenuation=!1,this.cache.add(e,t)),i=t}else if(e.isLine){let e="LineBasicMaterial:"+i.uuid,t=this.cache.get(e);t||(t=new en.nls,en.F5T.prototype.copy.call(t,i),t.color.copy(i.color),this.cache.add(e,t)),i=t}if(s||n||r){let e="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(e+="specular-glossiness:"),s&&(e+="derivative-tangents:"),n&&(e+="vertex-colors:"),r&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=i.clone(),n&&(t.vertexColors=!0),r&&(t.flatShading=!0),s&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(i))),i=t}i.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=i}getMaterialType(){return en.Wid}loadMaterial(e){let t;let i=this,s=this.json,n=this.extensions,r=s.materials[e],a={},A=r.extensions||{},o=[];if(A[eY.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){let e=n[eY.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=e.getMaterialType(),o.push(e.extendParams(a,r,i))}else if(A[eY.KHR_MATERIALS_UNLIT]){let e=n[eY.KHR_MATERIALS_UNLIT];t=e.getMaterialType(),o.push(e.extendParams(a,r,i))}else{let s=r.pbrMetallicRoughness||{};if(a.color=new en.Ilk(1,1,1),a.opacity=1,Array.isArray(s.baseColorFactor)){let e=s.baseColorFactor;a.color.fromArray(e),a.opacity=e[3]}void 0!==s.baseColorTexture&&o.push(i.assignTexture(a,"map",s.baseColorTexture,en.knz)),a.metalness=void 0!==s.metallicFactor?s.metallicFactor:1,a.roughness=void 0!==s.roughnessFactor?s.roughnessFactor:1,void 0!==s.metallicRoughnessTexture&&(o.push(i.assignTexture(a,"metalnessMap",s.metallicRoughnessTexture)),o.push(i.assignTexture(a,"roughnessMap",s.metallicRoughnessTexture))),t=this._invokeOne(function(t){return t.getMaterialType&&t.getMaterialType(e)}),o.push(Promise.all(this._invokeAll(function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,a)})))}!0===r.doubleSided&&(a.side=en.ehD);let l=r.alphaMode||tI.OPAQUE;if(l===tI.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,l===tI.MASK&&(a.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&t!==en.vBJ&&(o.push(i.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new en.FM8(1,1),void 0!==r.normalTexture.scale)){let e=r.normalTexture.scale;a.normalScale.set(e,e)}return void 0!==r.occlusionTexture&&t!==en.vBJ&&(o.push(i.assignTexture(a,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(a.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&t!==en.vBJ&&(a.emissive=new en.Ilk().fromArray(r.emissiveFactor)),void 0!==r.emissiveTexture&&t!==en.vBJ&&o.push(i.assignTexture(a,"emissiveMap",r.emissiveTexture,en.knz)),Promise.all(o).then(function(){let s;return s=t===ts?n[eY.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new t(a),r.name&&(s.name=r.name),tE(s,r),i.associations.set(s,{materials:e}),r.extensions&&tf(n,s,r),s})}createUniqueName(e){let t=en.iUV.sanitizeNodeName(e||""),i=t;for(let e=1;this.nodeNamesUsed[i];++e)i=t+"_"+e;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){let t=this,i=this.extensions,s=this.primitiveCache,n=[];for(let r=0,a=e.length;r<a;r++){let a=e[r],A=function(e){let t=e.extensions&&e.extensions[eY.KHR_DRACO_MESH_COMPRESSION];return t?"draco:"+t.bufferView+":"+t.indices+":"+tC(t.attributes):e.indices+":"+tC(e.attributes)+":"+e.mode}(a),o=s[A];if(o)n.push(o.promise);else{let e;e=a.extensions&&a.extensions[eY.KHR_DRACO_MESH_COMPRESSION]?function(e){return i[eY.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(i){return ty(i,e,t)})}(a):ty(new en.u9r,a,t),s[A]={primitive:a,promise:e},n.push(e)}}return Promise.all(n)}loadMesh(e){let t=this,i=this.json,s=this.extensions,n=i.meshes[e],r=n.primitives,a=[];for(let e=0,t=r.length;e<t;e++){var A;let t=void 0===r[e].material?(void 0===(A=this.cache).DefaultMaterial&&(A.DefaultMaterial=new en.Wid({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:en.Wl3})),A.DefaultMaterial):this.getDependency("material",r[e].material);a.push(t)}return a.push(t.loadGeometries(r)),Promise.all(a).then(function(i){let a=i.slice(0,i.length-1),A=i[i.length-1],o=[];for(let i=0,l=A.length;i<l;i++){let l;let h=A[i],c=r[i],g=a[i];if(c.mode===tl.TRIANGLES||c.mode===tl.TRIANGLE_STRIP||c.mode===tl.TRIANGLE_FAN||void 0===c.mode)!0!==(l=!0===n.isSkinnedMesh?new en.TUv(h,g):new en.Kj0(h,g)).isSkinnedMesh||l.geometry.attributes.skinWeight.normalized||l.normalizeSkinWeights(),c.mode===tl.TRIANGLE_STRIP?l.geometry=tw(l.geometry,en.UlW):c.mode===tl.TRIANGLE_FAN&&(l.geometry=tw(l.geometry,en.z$h));else if(c.mode===tl.LINES)l=new en.ejS(h,g);else if(c.mode===tl.LINE_STRIP)l=new en.x12(h,g);else if(c.mode===tl.LINE_LOOP)l=new en.blk(h,g);else if(c.mode===tl.POINTS)l=new en.woe(h,g);else throw Error("THREE.GLTFLoader: Primitive mode unsupported: "+c.mode);Object.keys(l.geometry.morphAttributes).length>0&&function(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let i=0,s=t.weights.length;i<s;i++)e.morphTargetInfluences[i]=t.weights[i];if(t.extras&&Array.isArray(t.extras.targetNames)){let i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(let t=0,s=i.length;t<s;t++)e.morphTargetDictionary[i[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}(l,n),l.name=t.createUniqueName(n.name||"mesh_"+e),tE(l,n),c.extensions&&tf(s,l,c),t.assignFinalMaterial(l),o.push(l)}for(let i=0,s=o.length;i<s;i++)t.associations.set(o[i],{meshes:e,primitives:i});if(1===o.length)return o[0];let l=new en.ZAu;t.associations.set(l,{meshes:e});for(let e=0,t=o.length;e<t;e++)l.add(o[e]);return l})}loadCamera(e){let t;let i=this.json.cameras[e],s=i[i.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return"perspective"===i.type?t=new en.cPb(en.M8C.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):"orthographic"===i.type&&(t=new en.iKG(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),tE(t,i),Promise.resolve(t)}loadSkin(e){let t=this.json.skins[e],i={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(i):this.getDependency("accessor",t.inverseBindMatrices).then(function(e){return i.inverseBindMatrices=e,i})}loadAnimation(e){let t=this.json.animations[e],i=[],s=[],n=[],r=[],a=[];for(let e=0,A=t.channels.length;e<A;e++){let A=t.channels[e],o=t.samplers[A.sampler],l=A.target,h=l.node,c=void 0!==t.parameters?t.parameters[o.input]:o.input,g=void 0!==t.parameters?t.parameters[o.output]:o.output;i.push(this.getDependency("node",h)),s.push(this.getDependency("accessor",c)),n.push(this.getDependency("accessor",g)),r.push(o),a.push(l)}return Promise.all([Promise.all(i),Promise.all(s),Promise.all(n),Promise.all(r),Promise.all(a)]).then(function(i){let s=i[0],n=i[1],r=i[2],a=i[3],A=i[4],o=[];for(let e=0,t=s.length;e<t;e++){let t;let i=s[e],l=n[e],h=r[e],c=a[e],g=A[e];if(void 0===i)continue;switch(i.updateMatrix(),tp[g.path]){case tp.weights:t=en.dUE;break;case tp.rotation:t=en.iLg;break;case tp.position:case tp.scale:default:t=en.yC1}let u=i.name?i.name:i.uuid,d=void 0!==c.interpolation?tm[c.interpolation]:en.NMF,p=[];tp[g.path]===tp.weights?i.traverse(function(e){e.morphTargetInfluences&&p.push(e.name?e.name:e.uuid)}):p.push(u);let m=h.array;if(h.normalized){let e=tB(m.constructor),t=new Float32Array(m.length);for(let i=0,s=m.length;i<s;i++)t[i]=m[i]*e;m=t}for(let e=0,i=p.length;e<i;e++){let i=new t(p[e]+"."+tp[g.path],l.array,m,d);"CUBICSPLINE"===c.interpolation&&(i.createInterpolant=function(e){return new(this instanceof en.iLg?to:ta)(this.times,this.values,this.getValueSize()/3,e)},i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),o.push(i)}}let l=t.name?t.name:"animation_"+e;return new en.m7l(l,void 0,o)})}createNodeMesh(e){let t=this.json,i=this,s=t.nodes[e];return void 0===s.mesh?null:i.getDependency("mesh",s.mesh).then(function(e){let t=i._getNodeRef(i.meshCache,s.mesh,e);return void 0!==s.weights&&t.traverse(function(e){if(e.isMesh)for(let t=0,i=s.weights.length;t<i;t++)e.morphTargetInfluences[t]=s.weights[t]}),t})}loadNode(e){let t=this.json,i=this.extensions,s=this,n=t.nodes[e],r=n.name?s.createUniqueName(n.name):"";return(function(){let t=[],i=s._invokeOne(function(t){return t.createNodeMesh&&t.createNodeMesh(e)});return i&&t.push(i),void 0!==n.camera&&t.push(s.getDependency("camera",n.camera).then(function(e){return s._getNodeRef(s.cameraCache,n.camera,e)})),s._invokeAll(function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)}).forEach(function(e){t.push(e)}),Promise.all(t)})().then(function(t){let a;if((a=!0===n.isBone?new en.N$j:t.length>1?new en.ZAu:1===t.length?t[0]:new en.Tme)!==t[0])for(let e=0,i=t.length;e<i;e++)a.add(t[e]);if(n.name&&(a.userData.name=n.name,a.name=r),tE(a,n),n.extensions&&tf(i,a,n),void 0!==n.matrix){let e=new en.yGw;e.fromArray(n.matrix),a.applyMatrix4(e)}else void 0!==n.translation&&a.position.fromArray(n.translation),void 0!==n.rotation&&a.quaternion.fromArray(n.rotation),void 0!==n.scale&&a.scale.fromArray(n.scale);return s.associations.has(a)||s.associations.set(a,{}),s.associations.get(a).nodes=e,a})}loadScene(e){let t=this.json,i=this.extensions,s=this.json.scenes[e],n=this,r=new en.ZAu;s.name&&(r.name=n.createUniqueName(s.name)),tE(r,s),s.extensions&&tf(i,r,s);let a=s.nodes||[],A=[];for(let e=0,i=a.length;e<i;e++)A.push(function e(t,i,s,n){let r=s.nodes[t];return n.getDependency("node",t).then(function(e){let t;return void 0===r.skin?e:n.getDependency("skin",r.skin).then(function(e){t=e;let i=[];for(let e=0,s=t.joints.length;e<s;e++)i.push(n.getDependency("node",t.joints[e]));return Promise.all(i)}).then(function(i){return e.traverse(function(e){if(!e.isMesh)return;let s=[],n=[];for(let e=0,r=i.length;e<r;e++){let r=i[e];if(r){s.push(r);let i=new en.yGw;void 0!==t.inverseBindMatrices&&i.fromArray(t.inverseBindMatrices.array,16*e),n.push(i)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[e])}e.bind(new en.OdW(s,n),e.matrixWorld)}),e})}).then(function(t){i.add(t);let a=[];if(r.children){let i=r.children;for(let r=0,A=i.length;r<A;r++){let A=i[r];a.push(e(A,t,s,n))}}return Promise.all(a)})}(a[e],r,t,n));return Promise.all(A).then(function(){return n.associations=(e=>{let t=new Map;for(let[e,i]of n.associations)(e instanceof en.F5T||e instanceof en.xEZ)&&t.set(e,i);return e.traverse(e=>{let i=n.associations.get(e);null!=i&&t.set(e,i)}),t})(r),r})}constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new eV,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),s=navigator.userAgent.indexOf("Firefox")>-1,n=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;"undefined"==typeof createImageBitmap||i||s&&n<98?this.textureLoader=new en.dpR(this.options.manager):this.textureLoader=new en.QRU(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new en.hH6(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}}function ty(e,t,i){let s=t.attributes,n=[];for(let t in s){let r=td[t]||t.toLowerCase();r in e.attributes||n.push(function(t,s){return i.getDependency("accessor",t).then(function(t){e.setAttribute(s,t)})}(s[t],r))}if(void 0!==t.indices&&!e.index){let s=i.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});n.push(s)}return tE(e,t),!function(e,t,i){let s=t.attributes,n=new en.ZzF;if(void 0===s.POSITION)return;{let e=i.json.accessors[s.POSITION],t=e.min,r=e.max;if(void 0!==t&&void 0!==r){if(n.set(new en.Pa4(t[0],t[1],t[2]),new en.Pa4(r[0],r[1],r[2])),e.normalized){let t=tB(th[e.componentType]);n.min.multiplyScalar(t),n.max.multiplyScalar(t)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}let r=t.targets;if(void 0!==r){let e=new en.Pa4,t=new en.Pa4;for(let s=0,n=r.length;s<n;s++){let n=r[s];if(void 0!==n.POSITION){let s=i.json.accessors[n.POSITION],r=s.min,a=s.max;if(void 0!==r&&void 0!==a){if(t.setX(Math.max(Math.abs(r[0]),Math.abs(a[0]))),t.setY(Math.max(Math.abs(r[1]),Math.abs(a[1]))),t.setZ(Math.max(Math.abs(r[2]),Math.abs(a[2]))),s.normalized){let e=tB(th[s.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}n.expandByVector(e)}e.boundingBox=n;let a=new en.aLr;n.getCenter(a.center),a.radius=n.min.distanceTo(n.max)/2,e.boundingSphere=a}(e,t,i),Promise.all(n).then(function(){return void 0!==t.targets?function(e,t,i){let s=!1,n=!1,r=!1;for(let e=0,i=t.length;e<i;e++){let i=t[e];if(void 0!==i.POSITION&&(s=!0),void 0!==i.NORMAL&&(n=!0),void 0!==i.COLOR_0&&(r=!0),s&&n&&r)break}if(!s&&!n&&!r)return Promise.resolve(e);let a=[],A=[],o=[];for(let l=0,h=t.length;l<h;l++){let h=t[l];if(s){let t=void 0!==h.POSITION?i.getDependency("accessor",h.POSITION):e.attributes.position;a.push(t)}if(n){let t=void 0!==h.NORMAL?i.getDependency("accessor",h.NORMAL):e.attributes.normal;A.push(t)}if(r){let t=void 0!==h.COLOR_0?i.getDependency("accessor",h.COLOR_0):e.attributes.color;o.push(t)}}return Promise.all([Promise.all(a),Promise.all(A),Promise.all(o)]).then(function(t){let i=t[0],a=t[1],A=t[2];return s&&(e.morphAttributes.position=i),n&&(e.morphAttributes.normal=a),r&&(e.morphAttributes.color=A),e.morphTargetsRelative=!0,e})}(e,t.targets,i):e})}function tw(e,t){let i=e.getIndex();if(null===i){let t=[],s=e.getAttribute("position");if(void 0===s)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<s.count;e++)t.push(e);e.setIndex(t),i=e.getIndex()}let s=i.count-2,n=[];if(t===en.z$h)for(let e=1;e<=s;e++)n.push(i.getX(0)),n.push(i.getX(e)),n.push(i.getX(e+1));else for(let e=0;e<s;e++)e%2==0?(n.push(i.getX(e)),n.push(i.getX(e+1)),n.push(i.getX(e+2))):(n.push(i.getX(e+2)),n.push(i.getX(e+1)),n.push(i.getX(e)));n.length/3!==s&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let r=e.clone();return r.setIndex(n),r}class tv{_initWorker(e){if(!this.workers[e]){let t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return -1}_onMessage(e,t){let i=this.workersResolve[e];if(i&&i(t),this.queue.length){let{resolve:t,msg:i,transfer:s}=this.queue.shift();this.workersResolve[e]=t,this.workers[e].postMessage(i,s)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,t){return new Promise(i=>{let s=this._getIdleWorker();-1!==s?(this._initWorker(s),this.workerStatus|=1<<s,this.workersResolve[s]=i,this.workers[s].postMessage(e,t)):this.queue.push({resolve:i,msg:e,transfer:t})})}dispose(){this.workers.forEach(e=>e.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}constructor(e=4){this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}}var tb=i(23663).Buffer;class tS{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class tx{_nextUint8(){let e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){let e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){let e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){let e=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}_nextInt32(){let e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_skip(e){return this._offset+=e,this}_scan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this._offset,s=0;for(;this._dataView.getUint8(this._offset)!==t&&s<e;)s++,this._offset++;return s<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+i,s)}constructor(e,t,i,s){this._dataView=new DataView(e.buffer,e.byteOffset+t,i),this._littleEndian=s,this._offset=0}}new Uint8Array([0]);let tM=[171,75,84,88,32,50,48,187,13,10,26,10];function tR(e){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):tb.from(e).toString("utf8")}var tD=i(23663).Buffer;let tT={env:{emscripten_notify_memory_growth:function(e){r=new Uint8Array(n.exports.memory.buffer)}}};class tL{init(){return s||(s="undefined"!=typeof fetch?fetch("data:application/wasm;base64,"+tF).then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,tT)).then(this._init):WebAssembly.instantiate(tD.from(tF,"base64"),tT).then(this._init))}_init(e){n=e.instance,tT.env.emscripten_notify_memory_growth(0)}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!n)throw Error("ZSTDDecoder: Await .init() before decoding.");let i=e.byteLength,s=n.exports.malloc(i);r.set(e,s),t=t||Number(n.exports.ZSTD_findDecompressedSize(s,i));let a=n.exports.malloc(t),A=n.exports.ZSTD_decompress(a,t,s,i),o=r.slice(a,a+A);return n.exports.free(s),n.exports.free(a),o}}let tF="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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEE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",tk=new WeakMap,tU=0;class tN extends en.aNw{setTranscoderPath(e){return this.transcoderPath=e,this}setWorkerLimit(e){return this.workerPool.setWorkerLimit(e),this}detectSupport(e){return this.workerConfig={astcSupported:e.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},e.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){let e=new en.hH6(this.manager);e.setPath(this.transcoderPath),e.setWithCredentials(this.withCredentials);let t=e.loadAsync("basis_transcoder.js"),i=new en.hH6(this.manager);i.setPath(this.transcoderPath),i.setResponseType("arraybuffer"),i.setWithCredentials(this.withCredentials);let s=i.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([t,s]).then(e=>{let[t,i]=e,s=tN.BasisWorker.toString(),n=["/* constants */","let _EngineFormat = "+JSON.stringify(tN.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(tN.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(tN.BasisFormat),"/* basis_transcoder.js */",t,"/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([n])),this.transcoderBinary=i,this.workerPool.setWorkerCreator(()=>{let e=new Worker(this.workerSourceURL),t=this.transcoderBinary.slice(0);return e.postMessage({type:"init",config:this.workerConfig,transcoderBinary:t},[t]),e})}),tU>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),tU++}return this.transcoderPending}load(e,t,i,s){if(null===this.workerConfig)throw Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");let n=new en.hH6(this.manager);n.setResponseType("arraybuffer"),n.setWithCredentials(this.withCredentials),n.load(e,e=>{if(tk.has(e))return tk.get(e).promise.then(t).catch(s);this._createTexture(e).then(e=>t?t(e):null).catch(s)},i,s)}_createTextureFrom(e,t){let{mipmaps:i,width:s,height:n,format:r,type:a,error:A,dfdTransferFn:o,dfdFlags:l}=e;if("error"===a)return Promise.reject(A);let h=t.layerCount>1?new en.Z_g(i,s,n,t.layerCount,r,en.ywz):new en.EB7(i,s,n,r,en.ywz);return h.minFilter=1===i.length?en.wem:en.D1R,h.magFilter=en.wem,h.generateMipmaps=!1,h.needsUpdate=!0,h.encoding=2===o?en.knz:en.rnI,h.premultiplyAlpha=!!(1&l),h}async _createTexture(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=function(e){let t=new Uint8Array(e.buffer,e.byteOffset,tM.length);if(t[0]!==tM[0]||t[1]!==tM[1]||t[2]!==tM[2]||t[3]!==tM[3]||t[4]!==tM[4]||t[5]!==tM[5]||t[6]!==tM[6]||t[7]!==tM[7]||t[8]!==tM[8]||t[9]!==tM[9]||t[10]!==tM[10]||t[11]!==tM[11])throw Error("Missing KTX 2.0 identifier.");let i=new tS,s=17*Uint32Array.BYTES_PER_ELEMENT,n=new tx(e,tM.length,s,!0);i.vkFormat=n._nextUint32(),i.typeSize=n._nextUint32(),i.pixelWidth=n._nextUint32(),i.pixelHeight=n._nextUint32(),i.pixelDepth=n._nextUint32(),i.layerCount=n._nextUint32(),i.faceCount=n._nextUint32();let r=n._nextUint32();i.supercompressionScheme=n._nextUint32();let a=n._nextUint32(),A=n._nextUint32(),o=n._nextUint32(),l=n._nextUint32(),h=n._nextUint64(),c=n._nextUint64(),g=new tx(e,tM.length+s,3*r*8,!0);for(let t=0;t<r;t++)i.levels.push({levelData:new Uint8Array(e.buffer,e.byteOffset+g._nextUint64(),g._nextUint64()),uncompressedByteLength:g._nextUint64()});let u=new tx(e,a,A,!0),d={vendorId:u._skip(4)._nextUint16(),descriptorType:u._nextUint16(),versionNumber:u._nextUint16(),descriptorBlockSize:u._nextUint16(),colorModel:u._nextUint8(),colorPrimaries:u._nextUint8(),transferFunction:u._nextUint8(),flags:u._nextUint8(),texelBlockDimension:[u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8()],bytesPlane:[u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8()],samples:[]},p=(d.descriptorBlockSize/4-6)/4;for(let e=0;e<p;e++){let t={bitOffset:u._nextUint16(),bitLength:u._nextUint8(),channelType:u._nextUint8(),samplePosition:[u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&t.channelType?(t.sampleLower=u._nextInt32(),t.sampleUpper=u._nextInt32()):(t.sampleLower=u._nextUint32(),t.sampleUpper=u._nextUint32()),d.samples[e]=t}i.dataFormatDescriptor.length=0,i.dataFormatDescriptor.push(d);let m=new tx(e,o,l,!0);for(;m._offset<l;){let e=m._nextUint32(),t=m._scan(e),s=tR(t),n=m._scan(e-t.byteLength);i.keyValue[s]=s.match(/^ktx/i)?tR(n):n,m._offset%4&&m._skip(4-m._offset%4)}if(c<=0)return i;let I=new tx(e,h,c,!0),f=I._nextUint16(),E=I._nextUint16(),C=I._nextUint32(),B=I._nextUint32(),Q=I._nextUint32(),y=I._nextUint32(),w=[];for(let e=0;e<r;e++)w.push({imageFlags:I._nextUint32(),rgbSliceByteOffset:I._nextUint32(),rgbSliceByteLength:I._nextUint32(),alphaSliceByteOffset:I._nextUint32(),alphaSliceByteLength:I._nextUint32()});let v=h+I._offset,b=v+C,S=b+B,x=S+Q,M=new Uint8Array(e.buffer,e.byteOffset+v,C),R=new Uint8Array(e.buffer,e.byteOffset+b,B),D=new Uint8Array(e.buffer,e.byteOffset+S,Q),T=new Uint8Array(e.buffer,e.byteOffset+x,y);return i.globalData={endpointCount:f,selectorCount:E,imageDescs:w,endpointsData:M,selectorsData:R,tablesData:D,extendedData:T},i}(new Uint8Array(e));if(0!==i.vkFormat)return tO(i);let s=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:e,taskConfig:t},[e])).then(e=>this._createTextureFrom(e.data,i));return tk.set(e,{promise:s}),s}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),tU--,this}constructor(e){super(e),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new tv,this.workerSourceURL="",this.workerConfig=null,"undefined"!=typeof MSC_TRANSCODER&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}}tN.BasisFormat={ETC1S:0,UASTC_4x4:1},tN.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},tN.EngineFormat={RGBAFormat:en.wk1,RGBA_ASTC_4x4_Format:en.ptH,RGBA_BPTC_Format:en.bsb,RGBA_ETC2_EAC_Format:en.ekQ,RGBA_PVRTC_4BPPV1_Format:en.eaV,RGBA_S3TC_DXT5_Format:en.ILR,RGB_ETC1_Format:en.fto,RGB_ETC2_Format:en.l0P,RGB_PVRTC_4BPPV1_Format:en._AM,RGB_S3TC_DXT1_Format:en.wuA},tN.BasisWorker=function(){let e,t,i;let s=_EngineFormat,n=_TranscoderFormat,r=_BasisFormat;self.addEventListener("message",function(a){let h=a.data;switch(h.type){case"init":var c;e=h.config,c=h.transcoderBinary,t=new Promise(e=>{i={wasmBinary:c,onRuntimeInitialized:e},BASIS(i)}).then(()=>{i.initializeBasis(),void 0===i.KTX2File&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")});break;case"transcode":t.then(()=>{try{let{width:t,height:a,hasAlpha:c,mipmaps:g,format:u,dfdTransferFn:d,dfdFlags:p}=function(t){let a=new i.KTX2File(new Uint8Array(t));function h(){a.close(),a.delete()}if(!a.isValid())throw h(),Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");let c=a.isUASTC()?r.UASTC_4x4:r.ETC1S,g=a.getWidth(),u=a.getHeight(),d=a.getLayers()||1,p=a.getLevels(),m=a.getHasAlpha(),I=a.getDFDTransferFunc(),f=a.getDFDFlags(),{transcoderFormat:E,engineFormat:C}=function(t,i,a,h){let c;let g=t===r.ETC1S?A:o;for(let s=0;s<g.length;s++){let n=g[s];if(e[n.if]&&n.basisFormat.includes(t)&&(!h||!(n.transcoderFormat.length<2))&&(!n.needsPowerOfTwo||l(i)&&l(a)))return{transcoderFormat:n.transcoderFormat[h?1:0],engineFormat:n.engineFormat[h?1:0]}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),{transcoderFormat:n.RGBA32,engineFormat:s.RGBAFormat}}(c,g,u,m);if(!g||!u||!p)throw h(),Error("THREE.KTX2Loader:	Invalid texture");if(!a.startTranscoding())throw h(),Error("THREE.KTX2Loader: .startTranscoding failed");let B=[];for(let e=0;e<p;e++){let t,i;let s=[];for(let n=0;n<d;n++){let r=a.getImageLevelInfo(e,n,0);t=r.origWidth,i=r.origHeight;let A=new Uint8Array(a.getImageTranscodedSizeInBytes(e,n,0,E));if(!a.transcodeImage(A,e,n,0,E,0,-1,-1))throw h(),Error("THREE.KTX2Loader: .transcodeImage failed.");s.push(A)}B.push({data:function(e){let t=0;for(let i of e)t+=i.byteLength;let i=new Uint8Array(t),s=0;for(let t of e)i.set(t,s),s+=t.byteLength;return i}(s),width:t,height:i})}return h(),{width:g,height:u,hasAlpha:m,mipmaps:B,format:C,dfdTransferFn:I,dfdFlags:f}}(h.buffer),m=[];for(let e=0;e<g.length;++e)m.push(g[e].data.buffer);self.postMessage({type:"transcode",id:h.id,width:t,height:a,hasAlpha:c,mipmaps:g,format:u,dfdTransferFn:d,dfdFlags:p},m)}catch(e){console.error(e),self.postMessage({type:"error",id:h.id,error:e.message})}})}});let a=[{if:"astcSupported",basisFormat:[r.UASTC_4x4],transcoderFormat:[n.ASTC_4x4,n.ASTC_4x4],engineFormat:[s.RGBA_ASTC_4x4_Format,s.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[r.ETC1S,r.UASTC_4x4],transcoderFormat:[n.BC7_M5,n.BC7_M5],engineFormat:[s.RGBA_BPTC_Format,s.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[r.ETC1S,r.UASTC_4x4],transcoderFormat:[n.BC1,n.BC3],engineFormat:[s.RGB_S3TC_DXT1_Format,s.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[r.ETC1S,r.UASTC_4x4],transcoderFormat:[n.ETC1,n.ETC2],engineFormat:[s.RGB_ETC2_Format,s.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[r.ETC1S,r.UASTC_4x4],transcoderFormat:[n.ETC1],engineFormat:[s.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[r.ETC1S,r.UASTC_4x4],transcoderFormat:[n.PVRTC1_4_RGB,n.PVRTC1_4_RGBA],engineFormat:[s.RGB_PVRTC_4BPPV1_Format,s.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],A=a.sort(function(e,t){return e.priorityETC1S-t.priorityETC1S}),o=a.sort(function(e,t){return e.priorityUASTC-t.priorityUASTC});function l(e){return e<=2||(e&e-1)==0&&0!==e}};let tG={109:en.wk1,97:en.wk1,37:en.wk1,43:en.wk1,103:en.av9,83:en.av9,16:en.av9,22:en.av9,100:en.hEm,76:en.hEm,15:en.hEm,9:en.hEm},t_={109:en.VzW,97:en.cLu,37:en.ywz,43:en.ywz,103:en.VzW,83:en.cLu,16:en.ywz,22:en.ywz,100:en.VzW,76:en.cLu,15:en.ywz,9:en.ywz},tP={43:en.knz,22:en.knz,15:en.knz};async function tO(e){let t,i;let{vkFormat:s,pixelWidth:n,pixelHeight:r,pixelDepth:A}=e;if(void 0===tG[s])throw Error("THREE.KTX2Loader: Unsupported vkFormat.");let o=e.levels[0];if(0===e.supercompressionScheme)t=o.levelData;else if(2===e.supercompressionScheme)a||(a=new Promise(async e=>{let t=new tL;await t.init(),e(t)})),t=(await a).decode(o.levelData,o.uncompressedByteLength);else throw Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");i=t_[s]===en.VzW?new Float32Array(t.buffer,t.byteOffset,t.byteLength/Float32Array.BYTES_PER_ELEMENT):t_[s]===en.cLu?new Uint16Array(t.buffer,t.byteOffset,t.byteLength/Uint16Array.BYTES_PER_ELEMENT):t;let l=0===A?new en.IEO(i,n,r):new en.JUT(i,n,r,A);return l.type=t_[s],l.format=tG[s],l.encoding=tP[s]||en.rnI,l.needsUpdate=!0,Promise.resolve(l)}let tH=Symbol("retainerCount"),tq=Symbol("recentlyUsed"),tK=Symbol("evict"),tJ=Symbol("evictionThreshold"),tV=Symbol("cache");class tY{set evictionThreshold(e){this[tJ]=e,this[tK]()}get evictionThreshold(){return this[tJ]}get cache(){return this[tV]}retainerCount(e){return this[tH].get(e)||0}reset(){this[tH].clear(),this[tq]=[]}retain(e){this[tH].has(e)||this[tH].set(e,0),this[tH].set(e,this[tH].get(e)+1);let t=this[tq].indexOf(e);-1!==t&&this[tq].splice(t,1),this[tq].unshift(e),this[tK]()}release(e){this[tH].has(e)&&this[tH].set(e,Math.max(this[tH].get(e)-1,0)),this[tK]()}[(p=tH,m=tq,tK)](){if(!(this[tq].length<this[tJ]))for(let e=this[tq].length-1;e>=this[tJ];--e){let t=this[tq][e];0===this[tH].get(t)&&(this[tV].delete(t),this[tq].splice(e,1))}}constructor(e,t=5){this[p]=new Map,this[m]=[],this[tV]=e,this[tJ]=t}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tj=e=>{let t=[],i=new Set;for(let s of e){let e=s,n=0;for(;i.has(e);)e=s+"."+ ++n;i.add(e),t.push(e)}return t},tz=e=>{let t=new Map;for(let i of e.mappings)for(let e of i.variants)t.set(e,{material:null,gltfMaterialIndex:i.material});return t};class tW{afterRoot(e){let t=this.parser,i=t.json;if(void 0===i.extensions||void 0===i.extensions[this.name])return null;let s=tj((i.extensions[this.name].variants||[]).map(e=>e.name));for(let s of e.scenes)s.traverse(e=>{if(!e.isMesh)return;let s=t.associations.get(e);if(null==s||null==s.meshes||null==s.primitives)return;let n=i.meshes[s.meshes].primitives[s.primitives].extensions;n&&n[this.name]&&(e.userData.variantMaterials=tz(n[this.name]))});return e.userData.variants=s,Promise.resolve()}constructor(e){this.parser=e,this.name="KHR_materials_variants"}}let tX=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{},s=e=>{let t=e.loaded/e.total;i(Math.max(0,Math.min(1,isFinite(t)?t:1)))};return new Promise((i,n)=>{t.load(e,i,s,n)})},tZ=e=>new Promise((t,i)=>{let s=document.createElement("script");document.body.appendChild(s),s.onload=t,s.onerror=i,s.async=!0,s.src=e}),t$=new Map,t0=new Map,t1=new eq,t2=new tN,t3=Symbol("loader"),t4=Symbol("evictionPolicy"),t8=Symbol("GLTFInstance");class t5 extends en.pBf{static setDRACODecoderLocation(e){A=e,t1.setDecoderPath(e)}static getDRACODecoderLocation(){return A}static setKTX2TranscoderLocation(e){o=e,t2.setTranscoderPath(e)}static getKTX2TranscoderLocation(){return o}static setMeshoptDecoderLocation(e){l!==e&&(l=e,h=tZ(e).then(()=>MeshoptDecoder.ready).then(()=>MeshoptDecoder))}static getMeshoptDecoderLocation(){return l}static initializeKTX2Loader(e){t2.detectSupport(e)}static get cache(){return t$}static clearCache(){t$.forEach((e,t)=>{this.delete(t)}),this[t4].reset()}static has(e){return t$.has(e)}static async delete(e){if(!this.has(e))return;let t=t$.get(e);t0.delete(e),t$.delete(e),(await t).dispose()}static hasFinishedLoading(e){return!!t0.get(e)}get[(I=t4,f=t3,t4)](){return this.constructor[t4]}async preload(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};if(this[t3].setWithCredentials(t5.withCredentials),this.dispatchEvent({type:"preload",element:t,src:e}),!t$.has(e)){null!=h&&this[t3].setMeshoptDecoder(await h);let t=tX(e,this[t3],e=>{i(.8*e)}),s=this[t8],n=t.then(e=>s.prepare(e)).then(e=>(i(.9),new s(e))).catch(e=>(console.error(e),new s));t$.set(e,n)}await t$.get(e),t0.set(e,!0),i&&i(1)}async load(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};await this.preload(e,t,i);let s=await t$.get(e),n=await s.clone();return this[t4].retain(e),n.dispose=()=>{this[t4].release(e)},n}constructor(e){super(),this[f]=new eJ().register(e=>new tW(e)),this[t8]=e,this[t3].setDRACOLoader(t1),this[t3].setKTX2Loader(t2)}}t5[I]=new tY(t5);class t6 extends en.Tme{copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this}constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(e){e.element instanceof Element&&null!==e.element.parentNode&&e.element.parentNode.removeChild(e.element)})})}}let t9=new en.Pa4,t7=new en.yGw,ie=new en.yGw,it=new en.Pa4,ii=new en.Pa4;class is{constructor(e={}){let t,i,s,n;let r=this,a={objects:new WeakMap},A=void 0!==e.element?e.element:document.createElement("div");A.style.overflow="hidden",this.domElement=A,this.getSize=function(){return{width:t,height:i}},this.render=function(e,t){!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),t7.copy(t.matrixWorldInverse),ie.multiplyMatrices(t.projectionMatrix,t7),function e(t,i,o){if(t.isCSS2DObject){t9.setFromMatrixPosition(t.matrixWorld),t9.applyMatrix4(ie);let e=!0===t.visible&&t9.z>=-1&&t9.z<=1&&!0===t.layers.test(o.layers);if(t.element.style.display=!0===e?"":"none",!0===e){t.onBeforeRender(r,i,o);let e=t.element;e.style.transform="translate(-50%,-50%) translate("+(t9.x*s+s)+"px,"+(-t9.y*n+n)+"px)",e.parentNode!==A&&A.appendChild(e),t.onAfterRender(r,i,o)}let l={distanceToCameraSquared:(it.setFromMatrixPosition(o.matrixWorld),ii.setFromMatrixPosition(t.matrixWorld),it.distanceToSquared(ii))};a.objects.set(t,l)}for(let s=0,n=t.children.length;s<n;s++)e(t.children[s],i,o)}(e,e,t),function(e){let t=(function(e){let t=[];return e.traverse(function(e){e.isCSS2DObject&&t.push(e)}),t})(e).sort(function(e,t){return e.renderOrder!==t.renderOrder?t.renderOrder-e.renderOrder:a.objects.get(e).distanceToCameraSquared-a.objects.get(t).distanceToCameraSquared}),i=t.length;for(let e=0,s=t.length;e<s;e++)t[e].element.style.zIndex=i-e}(e)},this.setSize=function(e,r){t=e,i=r,s=t/2,n=i/2,A.style.width=e+"px",A.style.height=r+"px"}}}class ir{register(e){return -1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return -1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,s){let n=new id,r=[];for(let e=0,t=this.pluginCallbacks.length;e<t;e++)r.push(this.pluginCallbacks[e](n));n.setPlugins(r),n.write(e,t,s).catch(i)}parseAsync(e,t){let i=this;return new Promise(function(s,n){i.parse(e,s,n,t)})}constructor(){this.pluginCallbacks=[],this.register(function(e){return new ip(e)}),this.register(function(e){return new im(e)}),this.register(function(e){return new iI(e)}),this.register(function(e){return new iB(e)}),this.register(function(e){return new iQ(e)}),this.register(function(e){return new iE(e)}),this.register(function(e){return new iC(e)})}}let ia={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,FLOAT:5126,UNSIGNED_INT:5125,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},iA={};iA[en.TyD]=ia.NEAREST,iA[en.YLQ]=ia.NEAREST_MIPMAP_NEAREST,iA[en.aH4]=ia.NEAREST_MIPMAP_LINEAR,iA[en.wem]=ia.LINEAR,iA[en.qyh]=ia.LINEAR_MIPMAP_NEAREST,iA[en.D1R]=ia.LINEAR_MIPMAP_LINEAR,iA[en.uWy]=ia.CLAMP_TO_EDGE,iA[en.rpg]=ia.REPEAT,iA[en.OoA]=ia.MIRRORED_REPEAT;let io={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"};function il(e,t){return e.length===t.length&&e.every(function(e,i){return e===t[i]})}function ih(e){return 4*Math.ceil(e/4)}function ic(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=ih(e.byteLength);if(i!==e.byteLength){let s=new Uint8Array(i);if(s.set(new Uint8Array(e)),0!==t)for(let n=e.byteLength;n<i;n++)s[n]=t;return s.buffer}return e}function ig(){return"undefined"==typeof document&&"undefined"!=typeof OffscreenCanvas?new OffscreenCanvas(1,1):document.createElement("canvas")}function iu(e,t){let i;return void 0!==e.toBlob?new Promise(i=>e.toBlob(i,t)):("image/jpeg"===t?i=.92:"image/webp"===t&&(i=.8),e.convertToBlob({type:t,quality:i}))}class id{setPlugins(e){this.plugins=e}async write(e,t,i){this.options=Object.assign({},{binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},i),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);let s=this.buffers,n=this.json;i=this.options;let r=this.extensionsUsed,a=new Blob(s,{type:"application/octet-stream"}),A=Object.keys(r);if(A.length>0&&(n.extensionsUsed=A),n.buffers&&n.buffers.length>0&&(n.buffers[0].byteLength=a.size),!0===i.binary){let e=new FileReader;e.readAsArrayBuffer(a),e.onloadend=function(){var i;let s=ic(e.result),r=new DataView(new ArrayBuffer(8));r.setUint32(0,s.byteLength,!0),r.setUint32(4,5130562,!0);let a=ic((i=JSON.stringify(n),new TextEncoder().encode(i).buffer),32),A=new DataView(new ArrayBuffer(8));A.setUint32(0,a.byteLength,!0),A.setUint32(4,1313821514,!0);let o=new ArrayBuffer(12),l=new DataView(o);l.setUint32(0,1179937895,!0),l.setUint32(4,2,!0);let h=12+A.byteLength+a.byteLength+r.byteLength+s.byteLength;l.setUint32(8,h,!0);let c=new Blob([o,A,a,r,s],{type:"application/octet-stream"}),g=new FileReader;g.readAsArrayBuffer(c),g.onloadend=function(){t(g.result)}}}else if(n.buffers&&n.buffers.length>0){let e=new FileReader;e.readAsDataURL(a),e.onloadend=function(){let i=e.result;n.buffers[0].uri=i,t(n)}}else t(n)}serializeUserData(e,t){if(0===Object.keys(e.userData).length)return;let i=this.options,s=this.extensionsUsed;try{let n=JSON.parse(JSON.stringify(e.userData));if(i.includeCustomExtensions&&n.gltfExtensions){for(let e in void 0===t.extensions&&(t.extensions={}),n.gltfExtensions)t.extensions[e]=n.gltfExtensions[e],s[e]=!0;delete n.gltfExtensions}Object.keys(n).length>0&&(t.extras=n)}catch(t){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+t.message)}}getUID(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!1===this.uids.has(e)){let t=new Map;t.set(!0,this.uid++),t.set(!1,this.uid++),this.uids.set(e,t)}return this.uids.get(e).get(t)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;let t=new en.Pa4;for(let i=0,s=e.count;i<s;i++)if(Math.abs(t.fromBufferAttribute(e,i).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){let t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);let i=e.clone(),s=new en.Pa4;for(let e=0,t=i.count;e<t;e++)s.fromBufferAttribute(i,e),0===s.x&&0===s.y&&0===s.z?s.setX(1):s.normalize(),i.setXYZ(e,s.x,s.y,s.z);return t.attributesNormalized.set(e,i),i}applyTextureTransform(e,t){let i=!1,s={};(0!==t.offset.x||0!==t.offset.y)&&(s.offset=t.offset.toArray(),i=!0),0!==t.rotation&&(s.rotation=t.rotation,i=!0),(1!==t.repeat.x||1!==t.repeat.y)&&(s.scale=t.repeat.toArray(),i=!0),i&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=s,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,t){if(e===t)return e;function i(e){return e.encoding===en.knz?function(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}:function(e){return e}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures.");let s=null==e?void 0:e.image,n=null==t?void 0:t.image,r=Math.max((null==s?void 0:s.width)||0,(null==n?void 0:n.width)||0),a=Math.max((null==s?void 0:s.height)||0,(null==n?void 0:n.height)||0),A=ig();A.width=r,A.height=a;let o=A.getContext("2d");o.fillStyle="#00ffff",o.fillRect(0,0,r,a);let l=o.getImageData(0,0,r,a);if(s){o.drawImage(s,0,0,r,a);let t=i(e),n=o.getImageData(0,0,r,a).data;for(let e=2;e<n.length;e+=4)l.data[e]=256*t(n[e]/256)}if(n){o.drawImage(n,0,0,r,a);let e=i(t),s=o.getImageData(0,0,r,a).data;for(let t=1;t<s.length;t+=4)l.data[t]=256*e(s[t]/256)}o.putImageData(l,0,0);let h=(e||t).clone();return h.source=new en.Hw6(A),h.encoding=en.rnI,h}processBuffer(e){let t=this.json,i=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),i.push(e),0}processBufferView(e,t,i,s,n){let r;let a=this.json;a.bufferViews||(a.bufferViews=[]),r=t===ia.UNSIGNED_BYTE?1:t===ia.UNSIGNED_SHORT?2:4;let A=ih(s*e.itemSize*r),o=new DataView(new ArrayBuffer(A)),l=0;for(let n=i;n<i+s;n++)for(let i=0;i<e.itemSize;i++){let s;e.itemSize>4?s=e.array[n*e.itemSize+i]:0===i?s=e.getX(n):1===i?s=e.getY(n):2===i?s=e.getZ(n):3===i&&(s=e.getW(n)),t===ia.FLOAT?o.setFloat32(l,s,!0):t===ia.UNSIGNED_INT?o.setUint32(l,s,!0):t===ia.UNSIGNED_SHORT?o.setUint16(l,s,!0):t===ia.UNSIGNED_BYTE&&o.setUint8(l,s),l+=r}let h={buffer:this.processBuffer(o.buffer),byteOffset:this.byteOffset,byteLength:A};return void 0!==n&&(h.target=n),n===ia.ARRAY_BUFFER&&(h.byteStride=e.itemSize*r),this.byteOffset+=A,a.bufferViews.push(h),{id:a.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){let t=this,i=t.json;return i.bufferViews||(i.bufferViews=[]),new Promise(function(s){let n=new FileReader;n.readAsArrayBuffer(e),n.onloadend=function(){let e=ic(n.result),r={buffer:t.processBuffer(e),byteOffset:t.byteOffset,byteLength:e.byteLength};t.byteOffset+=e.byteLength,s(i.bufferViews.push(r)-1)}})}processAccessor(e,t,i,s){let n,r;let a=this.json;if(e.array.constructor===Float32Array)n=ia.FLOAT;else if(e.array.constructor===Uint32Array)n=ia.UNSIGNED_INT;else if(e.array.constructor===Uint16Array)n=ia.UNSIGNED_SHORT;else if(e.array.constructor===Uint8Array)n=ia.UNSIGNED_BYTE;else throw Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");if(void 0===i&&(i=0),void 0===s&&(s=e.count),0===s)return null;let A=function(e,t,i){let s={min:Array(e.itemSize).fill(Number.POSITIVE_INFINITY),max:Array(e.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let n=t;n<t+i;n++)for(let t=0;t<e.itemSize;t++){let i;e.itemSize>4?i=e.array[n*e.itemSize+t]:0===t?i=e.getX(n):1===t?i=e.getY(n):2===t?i=e.getZ(n):3===t&&(i=e.getW(n)),s.min[t]=Math.min(s.min[t],i),s.max[t]=Math.max(s.max[t],i)}return s}(e,i,s);void 0!==t&&(r=e===t.index?ia.ELEMENT_ARRAY_BUFFER:ia.ARRAY_BUFFER);let o=this.processBufferView(e,n,i,s,r),l={bufferView:o.id,byteOffset:o.byteOffset,componentType:n,count:s,max:A.max,min:A.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"}[e.itemSize]};return!0===e.normalized&&(l.normalized=!0),a.accessors||(a.accessors=[]),a.accessors.push(l)-1}processImage(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"image/png",n=this,r=n.cache,a=n.json,A=n.options,o=n.pending;r.images.has(e)||r.images.set(e,{});let l=r.images.get(e),h=s+":flipY/"+i.toString();if(void 0!==l[h])return l[h];a.images||(a.images=[]);let c={mimeType:s},g=ig();g.width=Math.min(e.width,A.maxTextureSize),g.height=Math.min(e.height,A.maxTextureSize);let u=g.getContext("2d");if(!0===i&&(u.translate(0,g.height),u.scale(1,-1)),void 0!==e.data){t!==en.wk1&&console.error("GLTFExporter: Only RGBAFormat is supported."),(e.width>A.maxTextureSize||e.height>A.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);let i=new Uint8ClampedArray(e.height*e.width*4);for(let t=0;t<i.length;t+=4)i[t+0]=e.data[t+0],i[t+1]=e.data[t+1],i[t+2]=e.data[t+2],i[t+3]=e.data[t+3];u.putImageData(new ImageData(i,e.width,e.height),0,0)}else u.drawImage(e,0,0,g.width,g.height);!0===A.binary?o.push(iu(g,s).then(e=>n.processBufferViewImage(e)).then(e=>{c.bufferView=e})):void 0!==g.toDataURL?c.uri=g.toDataURL(s):o.push(iu(g,s).then(e=>new FileReader().readAsDataURL(e)).then(e=>{c.uri=e}));let d=a.images.push(c)-1;return l[h]=d,d}processSampler(e){let t=this.json;t.samplers||(t.samplers=[]);let i={magFilter:iA[e.magFilter],minFilter:iA[e.minFilter],wrapS:iA[e.wrapS],wrapT:iA[e.wrapT]};return t.samplers.push(i)-1}processTexture(e){let t=this.cache,i=this.json;if(t.textures.has(e))return t.textures.get(e);i.textures||(i.textures=[]);let s=e.userData.mimeType;"image/webp"===s&&(s="image/png");let n={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,s)};e.name&&(n.name=e.name),this._invokeAll(function(t){t.writeTexture&&t.writeTexture(e,n)});let r=i.textures.push(n)-1;return t.textures.set(e,r),r}processMaterial(e){let t=this.cache,i=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;i.materials||(i.materials=[]);let s={pbrMetallicRoughness:{}};!0!==e.isMeshStandardMaterial&&!0!==e.isMeshBasicMaterial&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");let n=e.color.toArray().concat([e.opacity]);if(il(n,[1,1,1,1])||(s.pbrMetallicRoughness.baseColorFactor=n),e.isMeshStandardMaterial?(s.pbrMetallicRoughness.metallicFactor=e.metalness,s.pbrMetallicRoughness.roughnessFactor=e.roughness):(s.pbrMetallicRoughness.metallicFactor=.5,s.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){let t=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),i={index:this.processTexture(t)};this.applyTextureTransform(i,t),s.pbrMetallicRoughness.metallicRoughnessTexture=i}if(e.map){let t={index:this.processTexture(e.map)};this.applyTextureTransform(t,e.map),s.pbrMetallicRoughness.baseColorTexture=t}if(e.emissive){let t=e.emissive.clone().multiplyScalar(e.emissiveIntensity),i=Math.max(t.r,t.g,t.b);if(i>1&&(t.multiplyScalar(1/i),console.warn("THREE.GLTFExporter: Some emissive components exceed 1; emissive has been limited")),i>0&&(s.emissiveFactor=t.toArray()),e.emissiveMap){let t={index:this.processTexture(e.emissiveMap)};this.applyTextureTransform(t,e.emissiveMap),s.emissiveTexture=t}}if(e.normalMap){let t={index:this.processTexture(e.normalMap)};e.normalScale&&1!==e.normalScale.x&&(t.scale=e.normalScale.x),this.applyTextureTransform(t,e.normalMap),s.normalTexture=t}if(e.aoMap){let t={index:this.processTexture(e.aoMap),texCoord:1};1!==e.aoMapIntensity&&(t.strength=e.aoMapIntensity),this.applyTextureTransform(t,e.aoMap),s.occlusionTexture=t}e.transparent?s.alphaMode="BLEND":e.alphaTest>0&&(s.alphaMode="MASK",s.alphaCutoff=e.alphaTest),e.side===en.ehD&&(s.doubleSided=!0),""!==e.name&&(s.name=e.name),this.serializeUserData(e,s),this._invokeAll(function(t){t.writeMaterial&&t.writeMaterial(e,s)});let r=i.materials.push(s)-1;return t.materials.set(e,r),r}processMesh(e){let t;let i=this.cache,s=this.json,n=[e.geometry.uuid];if(Array.isArray(e.material))for(let t=0,i=e.material.length;t<i;t++)n.push(e.material[t].uuid);else n.push(e.material.uuid);let r=n.join(":");if(i.meshes.has(r))return i.meshes.get(r);let a=e.geometry;t=e.isLineSegments?ia.LINES:e.isLineLoop?ia.LINE_LOOP:e.isLine?ia.LINE_STRIP:e.isPoints?ia.POINTS:e.material.wireframe?ia.LINES:ia.TRIANGLES;let A={},o={},l=[],h=[],c={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},g=a.getAttribute("normal");void 0===g||this.isNormalizedNormalAttribute(g)||(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),a.setAttribute("normal",this.createNormalizedNormalAttribute(g)));let u=null;for(let e in a.attributes){if("morph"===e.slice(0,5))continue;let t=a.attributes[e];if(e=c[e]||e.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(e)||(e="_"+e),i.attributes.has(this.getUID(t))){o[e]=i.attributes.get(this.getUID(t));continue}u=null;let s=t.array;"JOINTS_0"!==e||s instanceof Uint16Array||s instanceof Uint8Array||(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),u=new en.TlE(new Uint16Array(s),t.itemSize,t.normalized));let n=this.processAccessor(u||t,a);null!==n&&(o[e]=n,i.attributes.set(this.getUID(t),n))}if(void 0!==g&&a.setAttribute("normal",g),0===Object.keys(o).length)return null;if(void 0!==e.morphTargetInfluences&&e.morphTargetInfluences.length>0){let t=[],s=[],n={};if(void 0!==e.morphTargetDictionary)for(let t in e.morphTargetDictionary)n[e.morphTargetDictionary[t]]=t;for(let r=0;r<e.morphTargetInfluences.length;++r){let A={},o=!1;for(let e in a.morphAttributes){if("position"!==e&&"normal"!==e){o||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),o=!0);continue}let t=a.morphAttributes[e][r],s=e.toUpperCase(),n=a.attributes[e];if(i.attributes.has(this.getUID(t,!0))){A[s]=i.attributes.get(this.getUID(t,!0));continue}let l=t.clone();if(!a.morphTargetsRelative)for(let e=0,i=t.count;e<i;e++)l.setXYZ(e,t.getX(e)-n.getX(e),t.getY(e)-n.getY(e),t.getZ(e)-n.getZ(e));A[s]=this.processAccessor(l,a),i.attributes.set(this.getUID(n,!0),A[s])}h.push(A),t.push(e.morphTargetInfluences[r]),void 0!==e.morphTargetDictionary&&s.push(n[r])}A.weights=t,s.length>0&&(A.extras={},A.extras.targetNames=s)}let d=Array.isArray(e.material);if(d&&0===a.groups.length)return null;let p=d?e.material:[e.material],m=d?a.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let e=0,s=m.length;e<s;e++){let s={mode:t,attributes:o};if(this.serializeUserData(a,s),h.length>0&&(s.targets=h),null!==a.index){let t=this.getUID(a.index);(void 0!==m[e].start||void 0!==m[e].count)&&(t+=":"+m[e].start+":"+m[e].count),i.attributes.has(t)?s.indices=i.attributes.get(t):(s.indices=this.processAccessor(a.index,a,m[e].start,m[e].count),i.attributes.set(t,s.indices)),null===s.indices&&delete s.indices}let n=this.processMaterial(p[m[e].materialIndex]);null!==n&&(s.material=n),l.push(s)}A.primitives=l,s.meshes||(s.meshes=[]),this._invokeAll(function(t){t.writeMesh&&t.writeMesh(e,A)});let I=s.meshes.push(A)-1;return i.meshes.set(r,I),I}processCamera(e){let t=this.json;t.cameras||(t.cameras=[]);let i=e.isOrthographicCamera,s={type:i?"orthographic":"perspective"};return i?s.orthographic={xmag:2*e.right,ymag:2*e.top,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:s.perspective={aspectRatio:e.aspect,yfov:en.M8C.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},""!==e.name&&(s.name=e.type),t.cameras.push(s)-1}processAnimation(e,t){let i=this.json,s=this.nodeMap;i.animations||(i.animations=[]);let n=(e=ir.Utils.mergeMorphTargetTracks(e.clone(),t)).tracks,r=[],a=[];for(let e=0;e<n.length;++e){let i;let A=n[e],o=en.iUV.parseTrackName(A.name),l=en.iUV.findNode(t,o.nodeName),h=io[o.propertyName];if("bones"===o.objectName&&(l=!0===l.isSkinnedMesh?l.skeleton.getBoneByName(o.objectIndex):void 0),!l||!h)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',A.name),null;let c=A.values.length/A.times.length;h===io.morphTargetInfluences&&(c/=l.morphTargetInfluences.length),!0===A.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(i="CUBICSPLINE",c/=3):i=A.getInterpolation()===en.Syv?"STEP":"LINEAR",a.push({input:this.processAccessor(new en.TlE(A.times,1)),output:this.processAccessor(new en.TlE(A.values,c)),interpolation:i}),r.push({sampler:a.length-1,target:{node:s.get(l),path:h}})}return i.animations.push({name:e.name||"clip_"+i.animations.length,samplers:a,channels:r}),i.animations.length-1}processSkin(e){let t=this.json,i=this.nodeMap,s=t.nodes[i.get(e)],n=e.skeleton;if(void 0===n)return null;let r=e.skeleton.bones[0];if(void 0===r)return null;let a=[],A=new Float32Array(16*n.bones.length),o=new en.yGw;for(let t=0;t<n.bones.length;++t)a.push(i.get(n.bones[t])),o.copy(n.boneInverses[t]),o.multiply(e.bindMatrix).toArray(A,16*t);return void 0===t.skins&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new en.TlE(A,16)),joints:a,skeleton:i.get(r)}),s.skin=t.skins.length-1}processNode(e){let t=this.json,i=this.options,s=this.nodeMap;t.nodes||(t.nodes=[]);let n={};if(i.trs){let t=e.quaternion.toArray(),i=e.position.toArray(),s=e.scale.toArray();il(t,[0,0,0,1])||(n.rotation=t),il(i,[0,0,0])||(n.translation=i),il(s,[1,1,1])||(n.scale=s)}else e.matrixAutoUpdate&&e.updateMatrix(),!1===il(e.matrix.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])&&(n.matrix=e.matrix.elements);if(""!==e.name&&(n.name=String(e.name)),this.serializeUserData(e,n),e.isMesh||e.isLine||e.isPoints){let t=this.processMesh(e);null!==t&&(n.mesh=t)}else e.isCamera&&(n.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){let t=[];for(let s=0,n=e.children.length;s<n;s++){let n=e.children[s];if(n.visible||!1===i.onlyVisible){let e=this.processNode(n);null!==e&&t.push(e)}}t.length>0&&(n.children=t)}this._invokeAll(function(t){t.writeNode&&t.writeNode(e,n)});let r=t.nodes.push(n)-1;return s.set(e,r),r}processScene(e){let t=this.json,i=this.options;t.scenes||(t.scenes=[],t.scene=0);let s={};""!==e.name&&(s.name=e.name),t.scenes.push(s);let n=[];for(let t=0,s=e.children.length;t<s;t++){let s=e.children[t];if(s.visible||!1===i.onlyVisible){let e=this.processNode(s);null!==e&&n.push(e)}}n.length>0&&(s.nodes=n),this.serializeUserData(e,s)}processObjects(e){let t=new en.xsS;t.name="AuxScene";for(let i=0;i<e.length;i++)t.children.push(e[i]);this.processScene(t)}processInput(e){let t=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(t){t.beforeParse&&t.beforeParse(e)});let i=[];for(let t=0;t<e.length;t++)e[t]instanceof en.xsS?this.processScene(e[t]):i.push(e[t]);i.length>0&&this.processObjects(i);for(let e=0;e<this.skins.length;++e)this.processSkin(this.skins[e]);for(let i=0;i<t.animations.length;++i)this.processAnimation(t.animations[i],e[0]);this._invokeAll(function(t){t.afterParse&&t.afterParse(e)})}_invokeAll(e){for(let t=0,i=this.plugins.length;t<i;t++)e(this.plugins[t])}constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}}class ip{writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}let i=this.writer,s=i.json,n=i.extensionsUsed,r={};e.name&&(r.name=e.name),r.color=e.color.toArray(),r.intensity=e.intensity,e.isDirectionalLight?r.type="directional":e.isPointLight?(r.type="point",e.distance>0&&(r.range=e.distance)):e.isSpotLight&&(r.type="spot",e.distance>0&&(r.range=e.distance),r.spot={},r.spot.innerConeAngle=-((e.penumbra-1)*e.angle*1),r.spot.outerConeAngle=e.angle),void 0!==e.decay&&2!==e.decay&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||0!==e.target.position.x||0!==e.target.position.y||-1!==e.target.position.z)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),n[this.name]||(s.extensions=s.extensions||{},s.extensions[this.name]={lights:[]},n[this.name]=!0);let a=s.extensions[this.name].lights;a.push(r),t.extensions=t.extensions||{},t.extensions[this.name]={light:a.length-1}}constructor(e){this.writer=e,this.name="KHR_lights_punctual"}}class im{writeMaterial(e,t){if(!e.isMeshBasicMaterial)return;let i=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},i[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}constructor(e){this.writer=e,this.name="KHR_materials_unlit"}}class iI{writeMaterial(e,t){if(!e.isGLTFSpecularGlossinessMaterial)return;let i=this.writer,s=i.extensionsUsed,n={};t.pbrMetallicRoughness.baseColorFactor&&(n.diffuseFactor=t.pbrMetallicRoughness.baseColorFactor);let r=[1,1,1];if(e.specular.toArray(r,0),n.specularFactor=r,n.glossinessFactor=e.glossiness,t.pbrMetallicRoughness.baseColorTexture&&(n.diffuseTexture=t.pbrMetallicRoughness.baseColorTexture),e.specularMap){let t={index:i.processTexture(e.specularMap)};i.applyTextureTransform(t,e.specularMap),n.specularGlossinessTexture=t}t.extensions=t.extensions||{},t.extensions[this.name]=n,s[this.name]=!0}constructor(e){this.writer=e,this.name="KHR_materials_pbrSpecularGlossiness"}}class iE{writeMaterial(e,t){if(!e.isMeshPhysicalMaterial)return;let i=this.writer,s=i.extensionsUsed,n={};if(n.clearcoatFactor=e.clearcoat,e.clearcoatMap){let t={index:i.processTexture(e.clearcoatMap)};i.applyTextureTransform(t,e.clearcoatMap),n.clearcoatTexture=t}if(n.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){let t={index:i.processTexture(e.clearcoatRoughnessMap)};i.applyTextureTransform(t,e.clearcoatRoughnessMap),n.clearcoatRoughnessTexture=t}if(e.clearcoatNormalMap){let t={index:i.processTexture(e.clearcoatNormalMap)};i.applyTextureTransform(t,e.clearcoatNormalMap),n.clearcoatNormalTexture=t}t.extensions=t.extensions||{},t.extensions[this.name]=n,s[this.name]=!0}constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}}class iC{writeMaterial(e,t){if(!e.isMeshPhysicalMaterial)return;let i=this.writer,s=i.extensionsUsed,n={};if(n.iridescenceFactor=e.iridescence,e.iridescenceMap){let t={index:i.processTexture(e.iridescenceMap)};i.applyTextureTransform(t,e.iridescenceMap),n.iridescenceTexture=t}if(n.iridescenceIor=e.iridescenceIOR,n.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],n.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){let t={index:i.processTexture(e.iridescenceThicknessMap)};i.applyTextureTransform(t,e.iridescenceThicknessMap),n.iridescenceThicknessTexture=t}t.extensions=t.extensions||{},t.extensions[this.name]=n,s[this.name]=!0}constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}}class iB{writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.transmission)return;let i=this.writer,s=i.extensionsUsed,n={};if(n.transmissionFactor=e.transmission,e.transmissionMap){let t={index:i.processTexture(e.transmissionMap)};i.applyTextureTransform(t,e.transmissionMap),n.transmissionTexture=t}t.extensions=t.extensions||{},t.extensions[this.name]=n,s[this.name]=!0}constructor(e){this.writer=e,this.name="KHR_materials_transmission"}}class iQ{writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.transmission)return;let i=this.writer,s=i.extensionsUsed,n={};if(n.thicknessFactor=e.thickness,e.thicknessMap){let t={index:i.processTexture(e.thicknessMap)};i.applyTextureTransform(t,e.thicknessMap),n.thicknessTexture=t}n.attenuationDistance=e.attenuationDistance,n.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=n,s[this.name]=!0}constructor(e){this.writer=e,this.name="KHR_materials_volume"}}ir.Utils={insertKeyframe:function(e,t){let i;let s=e.getValueSize(),n=new e.TimeBufferType(e.times.length+1),r=new e.ValueBufferType(e.values.length+s),a=e.createInterpolant(new e.ValueBufferType(s));if(0===e.times.length){n[0]=t;for(let e=0;e<s;e++)r[e]=0;i=0}else if(t<e.times[0]){if(.001>Math.abs(e.times[0]-t))return 0;n[0]=t,n.set(e.times,1),r.set(a.evaluate(t),0),r.set(e.values,s),i=0}else if(t>e.times[e.times.length-1]){if(.001>Math.abs(e.times[e.times.length-1]-t))return e.times.length-1;n[n.length-1]=t,n.set(e.times,0),r.set(e.values,0),r.set(a.evaluate(t),e.values.length),i=n.length-1}else for(let A=0;A<e.times.length;A++){if(.001>Math.abs(e.times[A]-t))return A;if(e.times[A]<t&&e.times[A+1]>t){n.set(e.times.slice(0,A+1),0),n[A+1]=t,n.set(e.times.slice(A+1),A+2),r.set(e.values.slice(0,(A+1)*s),0),r.set(a.evaluate(t),(A+1)*s),r.set(e.values.slice((A+1)*s),(A+2)*s),i=A+1;break}}return e.times=n,e.values=r,i},mergeMorphTargetTracks:function(e,t){let i=[],s={},n=e.tracks;for(let e=0;e<n.length;++e){let r,a=n[e],A=en.iUV.parseTrackName(a.name),o=en.iUV.findNode(t,A.nodeName);if("morphTargetInfluences"!==A.propertyName||void 0===A.propertyIndex){i.push(a);continue}if(a.createInterpolant!==a.InterpolantFactoryMethodDiscrete&&a.createInterpolant!==a.InterpolantFactoryMethodLinear){if(a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),(a=a.clone()).setInterpolation(en.NMF)}let l=o.morphTargetInfluences.length,h=o.morphTargetDictionary[A.propertyIndex];if(void 0===h)throw Error("THREE.GLTFExporter: Morph target name not found: "+A.propertyIndex);if(void 0===s[o.uuid]){let e=new(r=a.clone()).ValueBufferType(l*r.times.length);for(let t=0;t<r.times.length;t++)e[t*l+h]=r.values[t];r.name=(A.nodeName||"")+".morphTargetInfluences",r.values=e,s[o.uuid]=r,i.push(r);continue}let c=a.createInterpolant(new a.ValueBufferType(1));r=s[o.uuid];for(let e=0;e<r.times.length;e++)r.values[e*l+h]=c.evaluate(r.times[e]);for(let e=0;e<a.times.length;e++){let t=this.insertKeyframe(r,a.times[e]);r.values[t*l+h]=a.values[e]}}return e.tracks=i,e}};/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iy=e=>void 0!==e.material&&e.userData&&e.userData.variantMaterials&&!!Array.from(e.userData.variantMaterials.values()).filter(e=>iw(e.material)),iw=e=>e&&e.isMaterial&&!Array.isArray(e);class iv{beforeParse(e){let t=new Set;for(let i of e)i.traverse(e=>{if(!iy(e))return;let i=e.userData.variantMaterials;for(let[s,n]of e.userData.variantData){let e=i.get(n.index);e&&iw(e.material)&&t.add(s)}});t.forEach(e=>this.variantNames.push(e))}writeMesh(e,t){if(!iy(e))return;let i=e.userData,s=i.variantMaterials,n=i.variantData,r=new Map,a=new Map;for(let[e,t]of Array.from(n.values()).sort((e,t)=>e.index-t.index).entries())a.set(t.index,e);for(let e of n.values()){let t=s.get(e.index);if(!t||!iw(t.material))continue;let i=this.writer.processMaterial(t.material);r.has(i)||r.set(i,{material:i,variants:[]}),r.get(i).variants.push(a.get(e.index))}let A=Array.from(r.values()).map(e=>e.variants.sort((e,t)=>e-t)&&e).sort((e,t)=>e.material-t.material);if(0===A.length)return;let o=iw(i.originalMaterial)?this.writer.processMaterial(i.originalMaterial):-1;for(let e of t.primitives)o>=0&&(e.material=o),e.extensions=e.extensions||{},e.extensions[this.name]={mappings:A}}afterParse(){if(0===this.variantNames.length)return;let e=this.writer.json;e.extensions=e.extensions||{};let t=this.variantNames.map(e=>({name:e}));e.extensions[this.name]={variants:t},this.writer.extensionsUsed[this.name]=!0}constructor(e){this.writer=e,this.name="KHR_materials_variants",this.variantNames=[]}}class ib{updateReflection(){let e=this.renderer.properties.get(this.xrLight.environment);if(e){let t=this.xrWebGLBinding.getReflectionCubeMap(this.lightProbe);t&&(e.__webglTexture=t,this.xrLight.environment.needsPMREMUpdate=!0)}}onXRFrame(e,t){if(!this.xrLight)return;t.session.requestAnimationFrame(this.frameCallback);let i=t.getLightEstimate(this.lightProbe);if(i){this.xrLight.lightProbe.sh.fromArray(i.sphericalHarmonicsCoefficients),this.xrLight.lightProbe.intensity=1;let e=Math.max(1,Math.max(i.primaryLightIntensity.x,Math.max(i.primaryLightIntensity.y,i.primaryLightIntensity.z)));this.xrLight.directionalLight.color.setRGB(i.primaryLightIntensity.x/e,i.primaryLightIntensity.y/e,i.primaryLightIntensity.z/e),this.xrLight.directionalLight.intensity=e,this.xrLight.directionalLight.position.copy(i.primaryLightDirection),this.estimationStartCallback&&(this.estimationStartCallback(),this.estimationStartCallback=null)}}dispose(){this.xrLight=null,this.renderer=null,this.lightProbe=null,this.xrWebGLBinding=null}constructor(e,t,i,s,n){this.xrLight=e,this.renderer=t,this.lightProbe=i,this.xrWebGLBinding=null,this.estimationStartCallback=n,this.frameCallback=this.onXRFrame.bind(this);let r=t.xr.getSession();if(s&&"XRWebGLBinding"in window){let i=new en.oAp(16);e.environment=i.texture;let s=t.getContext();switch(r.preferredReflectionFormat){case"srgba8":s.getExtension("EXT_sRGB");break;case"rgba16f":s.getExtension("OES_texture_half_float")}this.xrWebGLBinding=new XRWebGLBinding(r,s),this.lightProbe.addEventListener("reflectionchange",()=>{this.updateReflection()})}r.requestAnimationFrame(this.frameCallback)}}class iS extends en.ZAu{constructor(e,t=!0){super(),this.lightProbe=new en.lk7,this.lightProbe.intensity=0,this.add(this.lightProbe),this.directionalLight=new en.Ox3,this.directionalLight.intensity=0,this.add(this.directionalLight),this.environment=null;let i=null,s=!1;e.xr.addEventListener("sessionstart",()=>{let n=e.xr.getSession();"requestLightProbe"in n&&n.requestLightProbe({reflectionFormat:n.preferredReflectionFormat}).then(n=>{i=new ib(this,e,n,t,()=>{s=!0,this.dispatchEvent({type:"estimationstart"})})})}),e.xr.addEventListener("sessionend",()=>{i&&(i.dispose(),i=null),s&&this.dispatchEvent({type:"estimationend"})}),this.dispose=()=>{i&&(i.dispose(),i=null),this.remove(this.lightProbe),this.lightProbe=null,this.remove(this.directionalLight),this.directionalLight=null,this.environment=null}}}class ix{setDecayTime(e){this.naturalFrequency=1/Math.max(.001,e)}update(e,t,i,s){let n=2e-4*this.naturalFrequency;if(null==e||0===s||e===t&&0===this.velocity)return t;if(i<0)return e;let r=e-t,a=this.velocity+this.naturalFrequency*r,A=r+i*a,o=Math.exp(-this.naturalFrequency*i),l=(a-this.naturalFrequency*A)*o,h=-this.naturalFrequency*(l+a*o);return Math.abs(l)<n*Math.abs(s)&&h*r>=0?(this.velocity=0,t):(this.velocity=l,t+A*o)}constructor(e=50){this.velocity=0,this.naturalFrequency=0,this.setDecayTime(e)}}let iM=Math.PI/24,iR=new en.FM8,iD=(e,t,i)=>{let s=t>0?i>0?0:-Math.PI/2:i>0?Math.PI/2:Math.PI;for(let n=0;n<=12;++n)e.push(t+.17*Math.cos(s),i+.17*Math.sin(s),0,t+.2*Math.cos(s),i+.2*Math.sin(s),0),s+=iM};class iT extends en.Kj0{getHit(e,t,i){iR.set(t,-i),this.hitPlane.visible=!0;let s=e.positionAndNormalFromPoint(iR,this.hitPlane);return this.hitPlane.visible=!1,null==s?null:s.position}getExpandedHit(e,t,i){this.hitPlane.scale.set(1e3,1e3,1e3),this.hitPlane.updateMatrixWorld();let s=this.getHit(e,t,i);return this.hitPlane.scale.set(1,1,1),s}set offsetHeight(e){e-=.001,"back"===this.side?this.position.z=this.shadowHeight+e:this.position.y=this.shadowHeight+e}get offsetHeight(){return"back"===this.side?this.position.z-this.shadowHeight:this.position.y-this.shadowHeight}set show(e){this.goalOpacity=e?.75:0}updateOpacity(e){let t=this.material;t.opacity=this.opacityDamper.update(t.opacity,this.goalOpacity,e,1),this.visible=t.opacity>0}dispose(){var e;let{geometry:t,material:i}=this.hitPlane;t.dispose(),i.dispose(),this.geometry.dispose(),this.material.dispose(),null===(e=this.parent)||void 0===e||e.remove(this)}constructor(e,t){let i=new en.u9r,s=[],n=[],{size:r,boundingBox:a}=e,A=r.x/2,o=("back"===t?r.y:r.z)/2;iD(n,A,o),iD(n,-A,o),iD(n,-A,-o),iD(n,A,-o);let l=n.length/3;for(let e=0;e<l-2;e+=2)s.push(e,e+1,e+3,e,e+3,e+2);let h=l-2;s.push(h,h+1,1,h,1,0),i.setAttribute("position",new en.a$l(n,3)),i.setIndex(s),super(i),this.side=t;let c=this.material;switch(c.side=en.ehD,c.transparent=!0,c.opacity=0,this.goalOpacity=0,this.opacityDamper=new ix,this.hitPlane=new en.Kj0(new en._12(2*(A+.2),2*(o+.2))),this.hitPlane.visible=!1,this.hitPlane.material.side=en.ehD,this.add(this.hitPlane),a.getCenter(this.position),t){case"bottom":this.rotateX(-Math.PI/2),this.shadowHeight=a.min.y,this.position.y=this.shadowHeight;break;case"back":this.shadowHeight=a.min.z,this.position.z=this.shadowHeight}e.target.add(this),this.offsetHeight=0}}let iL={NOT_PRESENTING:"not-presenting",SESSION_STARTED:"session-started",OBJECT_PLACED:"object-placed",FAILED:"failed"},iF={TRACKING:"tracking",NOT_TRACKING:"not-tracking"},ik=new en.Pa4,iU=new en.yGw,iN=new en.Pa4,iG=new en.cPb(45,1,.1,100);class i_ extends en.pBf{async resolveARSession(){ef();let e=await navigator.xr.requestSession("immersive-ar",{requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay","light-estimation"],domOverlay:this.overlay?{root:this.overlay}:void 0});return this.threeRenderer.xr.setReferenceSpaceType("local"),await this.threeRenderer.xr.setSession(e),this.threeRenderer.xr.cameraAutoUpdate=!1,e}get presentedScene(){return this._presentedScene}async supportsPresentation(){try{return ef(),await navigator.xr.isSessionSupported("immersive-ar")}catch(e){return console.warn("Request to present in WebXR denied:"),console.warn(e),console.warn("Falling back to next ar-mode"),!1}}async present(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isPresenting&&console.warn("Cannot present while a model is already presenting");let i=new Promise((e,t)=>{requestAnimationFrame(()=>e())});e.setHotspotsVisibility(!1),e.queueRender(),await i,this._presentedScene=e,this.overlay=e.element.shadowRoot.querySelector("div.default"),!0===t&&(this.xrLight=new iS(this.threeRenderer),this.xrLight.addEventListener("estimationstart",()=>{if(!this.isPresenting||null==this.xrLight)return;let e=this.presentedScene;e.add(this.xrLight),e.environment=this.xrLight.environment}));let s=await this.resolveARSession();s.addEventListener("end",()=>{this.postSessionCleanup()},{once:!0});let n=e.element.shadowRoot.querySelector(".slot.exit-webxr-ar-button");n.classList.add("enabled"),n.addEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=n;let r=await s.requestReferenceSpace("viewer");this.tracking=!0,this.frames=0,this.initialized=!1,this.turntableRotation=e.yaw,this.goalYaw=e.yaw,this.goalScale=1,e.background=null,this.oldShadowIntensity=e.shadowIntensity,e.setShadowIntensity(.01),this.oldTarget.copy(e.getTarget()),e.element.addEventListener("load",this.onUpdateScene);let a=20*Math.PI/180,A=!0===this.placeOnWall?void 0:new XRRay(new DOMPoint(0,0,0),{x:0,y:-Math.sin(a),z:-Math.cos(a)});s.requestHitTestSource({space:r,offsetRay:A}).then(e=>{this.initialHitSource=e}),this.currentSession=s,this.placementBox=new iT(e,this.placeOnWall?"back":"bottom"),this.placementComplete=!1,this.lastTick=performance.now(),this.dispatchEvent({type:"status",status:iL.SESSION_STARTED})}async stopPresenting(){if(!this.isPresenting)return;let e=new Promise(e=>{this.resolveCleanup=e});try{await this.currentSession.end(),await e}catch(e){console.warn("Error while trying to end WebXR AR session"),console.warn(e),this.postSessionCleanup()}}get isPresenting(){return null!=this.presentedScene}get target(){return this.oldTarget}updateTarget(){let e=this.presentedScene;if(null!=e){let t=e.getTarget();this.oldTarget.copy(t),this.placeOnWall?t.z=e.boundingBox.min.z:t.y=e.boundingBox.min.y,e.setTarget(t.x,t.y,t.z)}}postSessionCleanup(){let e=this.currentSession;null!=e&&(e.removeEventListener("selectstart",this.onSelectStart),e.removeEventListener("selectend",this.onSelectEnd),this.currentSession=null);let t=this.presentedScene;if(this._presentedScene=null,null!=t){let{element:e}=t;null!=this.xrLight&&(t.remove(this.xrLight),this.xrLight.dispose(),this.xrLight=null),t.position.set(0,0,0),t.scale.set(1,1,1),t.setShadowOffset(0);let i=this.turntableRotation;null!=i&&(t.yaw=i);let s=this.oldShadowIntensity;null!=s&&t.setShadowIntensity(s),t.setEnvironmentAndSkybox(e[ex],e[eM]);let n=this.oldTarget;t.setTarget(n.x,n.y,n.z),t.xrCamera=null,t.element.removeEventListener("load",this.onUpdateScene),t.orientHotspots(0),e.requestUpdate("cameraTarget"),e.requestUpdate("maxCameraOrbit"),e[rl](e.getBoundingClientRect())}this.renderer.height=0;let i=this.exitWebXRButtonContainer;null!=i&&(i.classList.remove("enabled"),i.removeEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=null);let s=this.transientHitTestSource;null!=s&&(s.cancel(),this.transientHitTestSource=null);let n=this.initialHitSource;null!=n&&(n.cancel(),this.initialHitSource=null),null!=this.placementBox&&(this.placementBox.dispose(),this.placementBox=null),this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.inputSource=null,this.overlay=null,null!=this.resolveCleanup&&this.resolveCleanup(),this.dispatchEvent({type:"status",status:iL.NOT_PRESENTING})}updateView(e){let t=this.presentedScene,i=this.threeRenderer.xr;i.updateCamera(iG),t.xrCamera=i.getCamera();let{elements:s}=t.getCamera().matrixWorld;if(t.orientHotspots(Math.atan2(s[1],s[5])),this.initialized||(this.placeInitially(),this.initialized=!0),e.requestViewportScale&&e.recommendedViewportScale){let t=e.recommendedViewportScale;e.requestViewportScale(Math.max(t,.25))}let n=this.currentSession.renderState.baseLayer.getViewport(e);this.threeRenderer.setViewport(n.x,n.y,n.width,n.height)}placeInitially(){let e=this.presentedScene,{position:t,element:i}=e,s=e.getCamera(),{width:n,height:r}=this.overlay.getBoundingClientRect();e.setSize(n,r),s.projectionMatrixInverse.copy(s.projectionMatrix).invert();let{theta:a,radius:A}=i.getCameraOrbit(),o=s.getWorldDirection(ik);e.yaw=Math.atan2(-o.x,-o.z)-a,this.goalYaw=e.yaw,t.copy(s.position).add(o.multiplyScalar(A)),this.updateTarget();let l=e.getTarget();t.add(l).sub(this.oldTarget),this.goalPosition.copy(t),e.setHotspotsVisibility(!0);let{session:h}=this.frame;h.addEventListener("selectstart",this.onSelectStart),h.addEventListener("selectend",this.onSelectEnd),h.requestHitTestSourceForTransientInput({profile:"generic-touchscreen"}).then(e=>{this.transientHitTestSource=e})}getTouchLocation(){let{axes:e}=this.inputSource.gamepad,t=this.placementBox.getExpandedHit(this.presentedScene,e[0],e[1]);return null!=t&&(ik.copy(t).sub(this.presentedScene.getCamera().position),ik.length()>10)?null:t}getHitPoint(e){let t=this.threeRenderer.xr.getReferenceSpace(),i=e.getPose(t);if(null==i)return null;let s=iU.fromArray(i.transform.matrix);return!0===this.placeOnWall&&(this.goalYaw=Math.atan2(s.elements[4],s.elements[6])),s.elements[5]>.75!==this.placeOnWall?iN.setFromMatrixPosition(s):null}moveToFloor(e){let t=this.initialHitSource;if(null==t)return;let i=e.getHitTestResults(t);if(0==i.length)return;let s=i[0],n=this.getHitPoint(s);null!=n&&(this.placementBox.show=!0,this.isTranslating||(this.placeOnWall?this.goalPosition.copy(n):this.goalPosition.y=n.y),t.cancel(),this.initialHitSource=null,this.dispatchEvent({type:"status",status:iL.OBJECT_PLACED}))}fingerPolar(e){let t=e[0].inputSource.gamepad.axes,i=e[1].inputSource.gamepad.axes,s=i[0]-t[0],n=i[1]-t[1],r=Math.atan2(n,s),a=this.lastAngle-r;return a>Math.PI?a-=2*Math.PI:a<-Math.PI&&(a+=2*Math.PI),this.lastAngle=r,{separation:Math.sqrt(s*s+n*n),deltaYaw:a}}processInput(e){let t=this.transientHitTestSource;if(null==t||!this.isTranslating&&!this.isTwoFingering&&!this.isRotating)return;let i=e.getHitTestResultsForTransientInput(t),s=this.presentedScene,n=s.scale.x;if(this.isTwoFingering){if(i.length<2)this.isTwoFingering=!1;else{let{separation:e,deltaYaw:t}=this.fingerPolar(i);if(!1===this.placeOnWall&&(this.goalYaw+=t),s.canScale){let t=e/this.firstRatio;this.goalScale=t<1.3&&t>.7692307692307692?1:t}}return}if(2===i.length){this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!0;let{separation:e}=this.fingerPolar(i);this.firstRatio=e/n;return}if(this.isRotating){let e=1.5*this.inputSource.gamepad.axes[0];this.goalYaw+=e-this.lastAngle,this.lastAngle=e}else this.isTranslating&&i.forEach(e=>{if(e.inputSource!==this.inputSource)return;let t=null;if(e.results.length>0&&(t=this.getHitPoint(e.results[0])),null==t&&(t=this.getTouchLocation()),null!=t){if(this.goalPosition.sub(this.lastDragPosition),!1===this.placeOnWall){let e=t.y-this.lastDragPosition.y;if(e<0){this.placementBox.offsetHeight=e/n,this.presentedScene.setShadowOffset(e);let i=ik.copy(s.getCamera().position),r=-e/(i.y-t.y);i.multiplyScalar(r),t.multiplyScalar(1-r).add(i)}}this.goalPosition.add(t),this.lastDragPosition.copy(t)}})}moveScene(e){let t=this.presentedScene,{position:i,yaw:s}=t,n=t.boundingSphere.radius,r=this.goalPosition,a=t.scale.x,A=this.placementBox;if(!r.equals(i)||this.goalScale!==a){let{x:s,y:o,z:l}=i;s=this.xDamper.update(s,r.x,e,n),o=this.yDamper.update(o,r.y,e,n),l=this.zDamper.update(l,r.z,e,n),i.set(s,o,l);let h=this.scaleDamper.update(a,this.goalScale,e,1);if(t.scale.set(h,h,h),!this.isTranslating){let e=r.y-o;this.placementComplete&&!1===this.placeOnWall?(A.offsetHeight=e/h,t.setShadowOffset(e)):0===e&&(this.placementComplete=!0,A.show=!1,t.setShadowIntensity(.8))}}A.updateOpacity(e),t.updateTarget(e),t.yaw=this.yawDamper.update(s,this.goalYaw,e,Math.PI)}onWebXRFrame(e,t){this.frame=t,++this.frames;let i=this.threeRenderer.xr.getReferenceSpace(),s=t.getViewerPose(i);null==s&&!0===this.tracking&&this.frames>30&&(this.tracking=!1,this.dispatchEvent({type:"tracking",status:iF.NOT_TRACKING}));let n=this.presentedScene;if(null==s||null==n||!n.element.loaded){this.threeRenderer.clear();return}!1===this.tracking&&(this.tracking=!0,this.dispatchEvent({type:"tracking",status:iF.TRACKING}));let r=!0;for(let i of s.views){if(this.updateView(i),r){this.moveToFloor(t),this.processInput(t);let i=e-this.lastTick;this.moveScene(i),this.renderer.preRender(n,e,i),this.lastTick=e,n.renderShadow(this.threeRenderer)}this.threeRenderer.render(n,n.getCamera()),r=!1}}constructor(e){super(),this.renderer=e,this.currentSession=null,this.placeOnWall=!1,this.placementBox=null,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.initialHitSource=null,this.transientHitTestSource=null,this.inputSource=null,this._presentedScene=null,this.resolveCleanup=null,this.exitWebXRButtonContainer=null,this.overlay=null,this.xrLight=null,this.tracking=!0,this.frames=0,this.initialized=!1,this.oldTarget=new en.Pa4,this.placementComplete=!1,this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastDragPosition=new en.Pa4,this.firstRatio=0,this.lastAngle=0,this.goalPosition=new en.Pa4,this.goalYaw=0,this.goalScale=1,this.xDamper=new ix,this.yDamper=new ix,this.zDamper=new ix,this.yawDamper=new ix,this.scaleDamper=new ix,this.onExitWebXRButtonContainerClick=()=>this.stopPresenting(),this.onUpdateScene=()=>{null!=this.placementBox&&this.isPresenting&&(this.placementBox.dispose(),this.placementBox=new iT(this.presentedScene,this.placeOnWall?"back":"bottom"))},this.onSelectStart=e=>{let t=this.transientHitTestSource;if(null==t)return;let i=this.frame.getHitTestResultsForTransientInput(t),s=this.presentedScene,n=this.placementBox;if(1===i.length){this.inputSource=e.inputSource;let{axes:t}=this.inputSource.gamepad,i=n.getHit(this.presentedScene,t[0],t[1]);n.show=!0,null!=i?(this.isTranslating=!0,this.lastDragPosition.copy(i)):!1===this.placeOnWall&&(this.isRotating=!0,this.lastAngle=1.5*t[0])}else if(2===i.length){n.show=!0,this.isTwoFingering=!0;let{separation:e}=this.fingerPolar(i);this.firstRatio=e/s.scale.x}},this.onSelectEnd=()=>{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.inputSource=null,this.goalPosition.y+=this.placementBox.offsetHeight*this.presentedScene.scale.x,this.placementBox.show=!1},this.threeRenderer=e.threeRenderer,this.threeRenderer.xr.enabled=!0}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{addScene(e){self.dispatchEvent(new CustomEvent("model-viewer-scene-added-debug",{detail:{scene:e}}))}removeScene(e){self.dispatchEvent(new CustomEvent("model-viewer-scene-removed-debug",{detail:{scene:e}}))}constructor(e){e.threeRenderer.debug={checkShaderErrors:!0},Promise.resolve().then(()=>{self.dispatchEvent(new CustomEvent("model-viewer-renderer-debug",{detail:{renderer:e,THREE:{ShaderMaterial:en.jyz,Texture:en.xEZ,Mesh:en.Kj0,Scene:en.xsS,PlaneGeometry:en._12,OrthographicCamera:en.iKG,WebGLRenderTarget:en.dd2}}}))})}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iO=Symbol("prepared"),iH=Symbol("prepare"),iq=Symbol("preparedGLTF"),iK=Symbol("clone");class iJ{static prepare(e){if(null==e.scene)throw Error("Model does not have a scene");if(e[iO])return e;let t=this[iH](e);return t[iO]=!0,t}static[iH](e){let{scene:t}=e,i=[t];return Object.assign(Object.assign({},e),{scene:t,scenes:i})}get parser(){return this[iq].parser}get animations(){return this[iq].animations}get scene(){return this[iq].scene}get scenes(){return this[iq].scenes}get cameras(){return this[iq].cameras}get asset(){return this[iq].asset}get userData(){return this[iq].userData}clone(){return new this.constructor(this[iK]())}dispose(){this.scenes.forEach(e=>{e.traverse(e=>{e.isMesh&&((Array.isArray(e.material)?e.material:[e.material]).forEach(e=>{for(let t in e){let i=e[t];if(i instanceof en.xEZ){let e=i.source.data;null!=e.close&&e.close(),i.dispose()}}e.dispose()}),e.geometry.dispose())})})}[iK](){let e=this[iq],t=function(e){let t=new Map,i=new Map,s=e.clone();return function e(t,i,s){s(t,i);for(let n=0;n<t.children.length;n++)e(t.children[n],i.children[n],s)}(e,s,function(e,s){t.set(s,e),i.set(e,s)}),s.traverse(function(e){if(!e.isSkinnedMesh)return;let s=t.get(e),n=s.skeleton.bones;e.skeleton=s.skeleton.clone(),e.bindMatrix.copy(s.bindMatrix),e.skeleton.bones=n.map(function(e){return i.get(e)}),e.bind(e.skeleton,e.bindMatrix)}),s}(this.scene);iV(t,this.scene);let i=[t],s=e.userData?Object.assign({},e.userData):{};return Object.assign(Object.assign({},e),{scene:t,scenes:i,userData:s})}constructor(e){this[iq]=e}}let iV=(e,t)=>{iY(e,t,(e,t)=>{void 0!==t.userData.variantMaterials&&(e.userData.variantMaterials=new Map(t.userData.variantMaterials)),void 0!==t.userData.variantData&&(e.userData.variantData=t.userData.variantData),void 0!==t.userData.originalMaterial&&(e.userData.originalMaterial=t.userData.originalMaterial)})},iY=(e,t,i)=>{i(e,t);for(let s=0;s<e.children.length;s++)iY(e.children[s],t.children[s],i)},ij=Symbol("threeGLTF"),iz=Symbol("gltf"),iW=Symbol("gltfElementMap"),iX=Symbol("threeObjectMap"),iZ=Symbol("parallelTraverseThreeScene"),i$=Symbol("correlateOriginalThreeGLTF"),i0=Symbol("correlateCloneThreeGLTF");class i1{static from(e,t){return null!=t?this[i0](e,t):this[i$](e)}static[i$](e){let t=e.parser.json,i=e.parser.associations,s=new Map,n={name:"Default"},r={index:-1};for(let e of i.keys())e instanceof en.F5T&&null==i.get(e)&&(r.index<0&&(null==t.materials&&(t.materials=[]),r.index=t.materials.length,t.materials.push(n)),e.name=n.name,i.set(e,{materials:r.index}));for(let[e,n]of i)for(let i in n&&(e.userData=e.userData||{},e.userData.associations=n),n)if(null!=i&&"primitives"!==i){let r=(t[i]||[])[n[i]];if(null==r)continue;let a=s.get(r);null==a&&(a=new Set,s.set(r,a)),a.add(e)}return new i1(e,t,i,s)}static[i0](e,t){let i=t.threeGLTF,s=JSON.parse(JSON.stringify(t.gltf)),n=new Map,r=new Map;for(let a=0;a<i.scenes.length;a++)this[iZ](i.scenes[a],e.scenes[a],(e,i)=>{let a=t.threeObjectMap.get(e);if(null!=a){for(let e in a)if(null!=e&&"primitives"!==e){let t=a[e],A=s[e][t],o=n.get(i)||{};o[e]=t,n.set(i,o);let l=r.get(A)||new Set;l.add(i),r.set(A,l)}}});return new i1(e,s,n,r)}static[iZ](e,t,i){let s=e=>e.isMesh,n=(e,t)=>{if(i(e,t),e.isObject3D){if(s(e)){if(Array.isArray(e.material))for(let i=0;i<e.material.length;++i)n(e.material[i],t.material[i]);else n(e.material,t.material)}for(let i=0;i<e.children.length;++i)n(e.children[i],t.children[i])}};n(e,t)}get threeGLTF(){return this[ij]}get gltf(){return this[iz]}get gltfElementMap(){return this[iW]}get threeObjectMap(){return this[iX]}constructor(e,t,i,s){this[ij]=e,this[iz]=t,this[iW]=s,this[iX]=i}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let i2=Symbol("correlatedSceneGraph");class i3 extends iJ{static[iH](e){let t=super[iH](e);null==t[i2]&&(t[i2]=i1.from(t));let{scene:i}=t,s=new en.aLr(void 0,1/0);return i.traverse(e=>{if(e.renderOrder=1e3,e.frustumCulled=!1,e.name||(e.name=e.uuid),e.isMesh){let{geometry:i}=e;e.castShadow=!0,e.isSkinnedMesh&&(i.boundingSphere=s,i.boundingBox=null);let n=e.material;if(!0===n.isMeshBasicMaterial&&(n.toneMapped=!1),n.shadowSide=en.Wl3,n.aoMap){let{gltf:e,threeObjectMap:s}=t[i2],r=s.get(n);if(null!=e.materials&&null!=r&&null!=r.materials){let t=e.materials[r.materials];t.occlusionTexture&&0===t.occlusionTexture.texCoord&&null!=i.attributes.uv&&i.setAttribute("uv2",i.attributes.uv)}}}}),t}get correlatedSceneGraph(){return this[iq][i2]}[iK](){let e=super[iK](),t=new Map;return e.scene.traverse(e=>{if(e.isMesh){let i=e.material;if(null!=i){if(t.has(i.uuid)){e.material=t.get(i.uuid);return}e.material=i.clone(),t.set(i.uuid,e.material)}}}),e[i2]=i1.from(e,this.correlatedSceneGraph),e}}class i4 extends en.yxD{parse(e){let t=function(e,t){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(t||""));break;default:console.error("THREE.RGBELoader: Error: "+(t||""))}return -1},i=function(e,t,i){t=t||1024;let s=e.pos,n=-1,r=0,a="",A=String.fromCharCode.apply(null,new Uint16Array(e.subarray(s,s+128)));for(;0>(n=A.indexOf("\n"))&&r<t&&s<e.byteLength;)a+=A,r+=A.length,s+=128,A+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(s,s+128)));return -1<n&&(!1!==i&&(e.pos+=r+n+1),a+A.slice(0,n))},s=new Uint8Array(e);s.pos=0;let n=function(e){let s,n;let r=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,a=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,A=/^\s*FORMAT=(\S+)\s*$/,o=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,l={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(s=i(e)))return t(1,"no header found");if(!(n=s.match(/^#\?(\S+)/)))return t(3,"bad initial token");for(l.valid|=1,l.programtype=n[1],l.string+=s+"\n";!1!==(s=i(e));){if(l.string+=s+"\n","#"===s.charAt(0)){l.comments+=s+"\n";continue}if((n=s.match(r))&&(l.gamma=parseFloat(n[1])),(n=s.match(a))&&(l.exposure=parseFloat(n[1])),(n=s.match(A))&&(l.valid|=2,l.format=n[1]),(n=s.match(o))&&(l.valid|=4,l.height=parseInt(n[1],10),l.width=parseInt(n[2],10)),2&l.valid&&4&l.valid)break}return 2&l.valid?4&l.valid?l:t(3,"missing image size specifier"):t(3,"missing format specifier")}(s);if(-1!==n){let e=n.width,i=n.height,r=function(e,i,s){if(i<8||i>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(i!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");let n=new Uint8Array(4*i*s);if(!n.length)return t(4,"unable to allocate buffer space");let r=0,a=0,A=4*i,o=new Uint8Array(4),l=new Uint8Array(A),h=s;for(;h>0&&a<e.byteLength;){if(a+4>e.byteLength)return t(1);if(o[0]=e[a++],o[1]=e[a++],o[2]=e[a++],o[3]=e[a++],2!=o[0]||2!=o[1]||(o[2]<<8|o[3])!=i)return t(3,"bad rgbe scanline format");let s=0,c;for(;s<A&&a<e.byteLength;){let i=(c=e[a++])>128;if(i&&(c-=128),0===c||s+c>A)return t(3,"bad scanline data");if(i){let t=e[a++];for(let e=0;e<c;e++)l[s++]=t}else l.set(e.subarray(a,a+c),s),s+=c,a+=c}for(let e=0;e<i;e++){let t=0;n[r]=l[e+t],t+=i,n[r+1]=l[e+t],t+=i,n[r+2]=l[e+t],t+=i,n[r+3]=l[e+t],r+=4}h--}return n}(s.subarray(s.pos),e,i);if(-1!==r){let t,s,a;switch(this.type){case en.VzW:a=r.length/4;let A=new Float32Array(4*a);for(let e=0;e<a;e++)!function(e,t,i,s){let n=Math.pow(2,e[t+3]-128)/255;i[s+0]=e[t+0]*n,i[s+1]=e[t+1]*n,i[s+2]=e[t+2]*n,i[s+3]=1}(r,4*e,A,4*e);t=A,s=en.VzW;break;case en.cLu:a=r.length/4;let o=new Uint16Array(4*a);for(let e=0;e<a;e++)!function(e,t,i,s){let n=Math.pow(2,e[t+3]-128)/255;i[s+0]=en.A5E.toHalfFloat(Math.min(e[t+0]*n,65504)),i[s+1]=en.A5E.toHalfFloat(Math.min(e[t+1]*n,65504)),i[s+2]=en.A5E.toHalfFloat(Math.min(e[t+2]*n,65504)),i[s+3]=en.A5E.toHalfFloat(1)}(r,4*e,o,4*e);t=o,s=en.cLu;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:e,height:i,data:t,header:n.string,gamma:n.gamma,exposure:n.exposure,type:s}}}return null}setDataType(e){return this.type=e,this}load(e,t,i,s){return super.load(e,function(e,i){switch(e.type){case en.VzW:case en.cLu:e.encoding=en.rnI,e.minFilter=en.wem,e.magFilter=en.wem,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,i)},i,s)}constructor(e){super(e),this.type=en.cLu}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8 extends en.xsS{createAreaLightMaterial(e){let t=new en.vBJ;return t.color.setScalar(e),t}constructor(){super(),this.position.y=-3.5;let e=new en.DvJ;e.deleteAttribute("uv");let t=new en.Wid({metalness:0,side:en._Li}),i=new en.Wid({metalness:0}),s=new en.cek(16777215,500,28,2);s.position.set(.418,16.199,.3),this.add(s);let n=new en.Kj0(e,t);n.position.set(-.757,13.219,.717),n.scale.set(31.713,28.305,28.591),this.add(n);let r=new en.Kj0(e,i);r.position.set(-10.906,2.009,1.846),r.rotation.set(0,-.195,0),r.scale.set(2.328,7.905,4.651),this.add(r);let a=new en.Kj0(e,i);a.position.set(-5.607,-.754,-.758),a.rotation.set(0,.994,0),a.scale.set(1.97,1.534,3.955),this.add(a);let A=new en.Kj0(e,i);A.position.set(6.167,.857,7.803),A.rotation.set(0,.561,0),A.scale.set(3.927,6.285,3.687),this.add(A);let o=new en.Kj0(e,i);o.position.set(-2.017,.018,6.124),o.rotation.set(0,.333,0),o.scale.set(2.002,4.566,2.064),this.add(o);let l=new en.Kj0(e,i);l.position.set(2.291,-.756,-2.621),l.rotation.set(0,-.286,0),l.scale.set(1.546,1.552,1.496),this.add(l);let h=new en.Kj0(e,i);h.position.set(-2.193,-.369,-5.547),h.rotation.set(0,.516,0),h.scale.set(3.875,3.487,2.986),this.add(h);let c=new en.Kj0(e,this.createAreaLightMaterial(50));c.position.set(-16.116,14.37,8.208),c.scale.set(.1,2.428,2.739),this.add(c);let g=new en.Kj0(e,this.createAreaLightMaterial(50));g.position.set(-16.109,18.021,-8.207),g.scale.set(.1,2.425,2.751),this.add(g);let u=new en.Kj0(e,this.createAreaLightMaterial(17));u.position.set(14.904,12.198,-1.832),u.scale.set(.15,4.265,6.331),this.add(u);let d=new en.Kj0(e,this.createAreaLightMaterial(43));d.position.set(-.462,8.89,14.52),d.scale.set(4.38,5.441,.088),this.add(d);let p=new en.Kj0(e,this.createAreaLightMaterial(20));p.position.set(3.235,11.486,-12.541),p.scale.set(2.5,2,.1),this.add(p);let m=new en.Kj0(e,this.createAreaLightMaterial(100));m.position.set(0,20,0),m.scale.set(1,.1,1),this.add(m)}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5 extends en.xsS{createAreaLightMaterial(e){let t=new en.vBJ;return t.color.setScalar(e),t}constructor(){super(),this.position.y=-3.5;let e=new en.DvJ;e.deleteAttribute("uv");let t=new en.Wid({metalness:0,side:en._Li}),i=new en.Wid({metalness:0}),s=new en.cek(16777215,400,28,2);s.position.set(.5,14,.5),this.add(s);let n=new en.Kj0(e,t);n.position.set(0,13.2,0),n.scale.set(31.5,28.5,31.5),this.add(n);let r=new en.Kj0(e,i);r.position.set(-10.906,-1,1.846),r.rotation.set(0,-.195,0),r.scale.set(2.328,7.905,4.651),this.add(r);let a=new en.Kj0(e,i);a.position.set(-5.607,-.754,-.758),a.rotation.set(0,.994,0),a.scale.set(1.97,1.534,3.955),this.add(a);let A=new en.Kj0(e,i);A.position.set(6.167,-.16,7.803),A.rotation.set(0,.561,0),A.scale.set(3.927,6.285,3.687),this.add(A);let o=new en.Kj0(e,i);o.position.set(-2.017,.018,6.124),o.rotation.set(0,.333,0),o.scale.set(2.002,4.566,2.064),this.add(o);let l=new en.Kj0(e,i);l.position.set(2.291,-.756,-2.621),l.rotation.set(0,-.286,0),l.scale.set(1.546,1.552,1.496),this.add(l);let h=new en.Kj0(e,i);h.position.set(-2.193,-.369,-5.547),h.rotation.set(0,.516,0),h.scale.set(3.875,3.487,2.986),this.add(h);let c=new en.Kj0(e,this.createAreaLightMaterial(80));c.position.set(-14,10,8),c.scale.set(.1,2.5,2.5),this.add(c);let g=new en.Kj0(e,this.createAreaLightMaterial(80));g.position.set(-14,14,-4),g.scale.set(.1,2.5,2.5),this.add(g);let u=new en.Kj0(e,this.createAreaLightMaterial(23));u.position.set(14,12,0),u.scale.set(.1,5,5),this.add(u);let d=new en.Kj0(e,this.createAreaLightMaterial(16));d.position.set(0,9,14),d.scale.set(5,5,.1),this.add(d);let p=new en.Kj0(e,this.createAreaLightMaterial(80));p.position.set(7,8,-14),p.scale.set(2.5,2.5,.1),this.add(p);let m=new en.Kj0(e,this.createAreaLightMaterial(80));m.position.set(-7,16,-14),m.scale.set(2.5,2.5,.1),this.add(m);let I=new en.Kj0(e,this.createAreaLightMaterial(1));I.position.set(0,20,0),I.scale.set(.1,.1,.1),this.add(I)}}let i6=/\.hdr(\.js)?$/,i9=new en.dpR,i7=new i4;i7.setDataType(en.cLu);class se extends en.pBf{async load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};try{let i=i6.test(e),s=i?i7:i9,n=await new Promise((i,n)=>s.load(e,i,e=>{t(e.loaded/e.total*.9)},n));return t(1),n.name=e,n.mapping=en.dSO,i||(n.encoding=en.knz),n}finally{t&&t(1)}}async generateEnvironmentMapAndSkybox(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{},n="legacy"!==i;("legacy"===i||"neutral"===i)&&(i=null),i=eI(i);let r=Promise.resolve(null);t&&(r=this.loadEquirectFromUrl(t,s)),e=i?this.loadEquirectFromUrl(i,s):t?this.loadEquirectFromUrl(t,s):n?this.loadGeneratedEnvironmentMapAlt():this.loadGeneratedEnvironmentMap();let[a,A]=await Promise.all([e,r]);if(null==a)throw Error("Failed to load environment map.");return{environmentMap:a,skybox:A}}async loadEquirectFromUrl(e,t){if(!this.skyboxCache.has(e)){let i=this.load(e,t);this.skyboxCache.set(e,i)}return this.skyboxCache.get(e)}async GenerateEnvironmentMap(e,t){await ev();let i=this.threeRenderer,s=new en.oAp(256,{generateMipmaps:!1,type:en.cLu,format:en.wk1,encoding:en.rnI,depthBuffer:!0}),n=new en._am(.1,100,s),r=n.renderTarget.texture;r.name=t;let a=i.outputEncoding,A=i.toneMapping;return i.toneMapping=en.uL9,i.outputEncoding=en.rnI,n.update(i,e),this.blurCubemap(s,.04),i.toneMapping=A,i.outputEncoding=a,r}async loadGeneratedEnvironmentMap(){return null==this.generatedEnvironmentMap&&(this.generatedEnvironmentMap=this.GenerateEnvironmentMap(new i8,"legacy")),this.generatedEnvironmentMap}async loadGeneratedEnvironmentMapAlt(){return null==this.generatedEnvironmentMapAlt&&(this.generatedEnvironmentMapAlt=this.GenerateEnvironmentMap(new i5,"neutral")),this.generatedEnvironmentMapAlt}blurCubemap(e,t){if(null==this.blurMaterial){this.blurMaterial=this.getBlurShader(20);let e=new en.DvJ,t=new en.Kj0(e,this.blurMaterial);this.blurScene=new en.xsS,this.blurScene.add(t)}let i=e.clone();this.halfblur(e,i,t,"latitudinal"),this.halfblur(i,e,t,"longitudinal")}halfblur(e,t,i,s){let n=e.width,r=isFinite(i)?Math.PI/(2*n):2*Math.PI/39,a=i/r,A=isFinite(i)?1+Math.floor(3*a):20;A>20&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(A," samples when the maximum is set to ").concat(20));let o=[],l=0;for(let e=0;e<20;++e){let t=e/a,i=Math.exp(-t*t/2);o.push(i),0==e?l+=i:e<A&&(l+=2*i)}for(let e=0;e<o.length;e++)o[e]=o[e]/l;let h=this.blurMaterial.uniforms;h.envMap.value=e.texture,h.samples.value=A,h.weights.value=o,h.latitudinal.value="latitudinal"===s,h.dTheta.value=r,new en._am(.1,100,t).update(this.threeRenderer,this.blurScene)}getBlurShader(e){let t=new Float32Array(e),i=new en.Pa4(0,1,0);return new en.jyz({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},poleAxis:{value:i}},vertexShader:"\n      \n      varying vec3 vOutputDirection;\n  \n      void main() {\n  \n        vOutputDirection = vec3( position );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  \n      }\n    ",fragmentShader:"\n        varying vec3 vOutputDirection;\n  \n        uniform samplerCube envMap;\n        uniform int samples;\n        uniform float weights[ n ];\n        uniform bool latitudinal;\n        uniform float dTheta;\n        uniform vec3 poleAxis;\n  \n        vec3 getSample( float theta, vec3 axis ) {\n  \n          float cosTheta = cos( theta );\n          // Rodrigues' axis-angle rotation\n          vec3 sampleDirection = vOutputDirection * cosTheta\n            + cross( axis, vOutputDirection ) * sin( theta )\n            + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n  \n          return vec3( textureCube( envMap, sampleDirection ) );\n  \n        }\n  \n        void main() {\n  \n          vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n  \n          if ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n  \n            axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n  \n          }\n  \n          axis = normalize( axis );\n  \n          gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n          gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n  \n          for ( int i = 1; i < n; i++ ) {\n  \n            if ( i >= samples ) {\n  \n              break;\n  \n            }\n  \n            float theta = dTheta * float( i );\n            gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n            gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n  \n          }\n        }\n      ",blending:en.jFi,depthTest:!1,depthWrite:!1,side:en._Li})}async dispose(){for(let[,e]of this.skyboxCache)(await e).dispose();null!=this.generatedEnvironmentMap&&((await this.generatedEnvironmentMap).dispose(),this.generatedEnvironmentMap=null),null!=this.generatedEnvironmentMapAlt&&((await this.generatedEnvironmentMapAlt).dispose(),this.generatedEnvironmentMapAlt=null),null!=this.blurMaterial&&this.blurMaterial.dispose()}constructor(e){super(),this.threeRenderer=e,this.generatedEnvironmentMap=null,this.generatedEnvironmentMapAlt=null,this.skyboxCache=new Map,this.blurMaterial=null,this.blurScene=null}}let st=[1,.79,.62,.5,.4,.31,.25],si="high-performance";class ss extends en.pBf{static get singleton(){return this._singleton}static resetSingleton(){let e=this._singleton.dispose();for(let t of e)t.disconnectedCallback();for(let t of(this._singleton=new ss({powerPreference:(self.ModelViewerElement||{}).powerPreference||si,debug:ew()}),e))t.connectedCallback()}get canRender(){return null!=this.threeRenderer}get scaleFactor(){return st[this.scaleStep]}set minScale(e){let t=1;for(;t<st.length&&!(st[t]<e);)++t;this.lastStep=t-1}registerScene(e){this.scenes.add(e),e.forceRescale();let t=new en.FM8;this.threeRenderer.getSize(t),e.canvas.width=t.x,e.canvas.height=t.y,this.canRender&&this.scenes.size>0&&this.threeRenderer.setAnimationLoop((e,t)=>this.render(e,t)),null!=this.debugger&&this.debugger.addScene(e)}unregisterScene(e){this.scenes.delete(e),this.canvas3D.parentElement===e.canvas.parentElement&&e.canvas.parentElement.removeChild(this.canvas3D),this.canRender&&0===this.scenes.size&&this.threeRenderer.setAnimationLoop(null),null!=this.debugger&&this.debugger.removeScene(e)}displayCanvas(e){return this.multipleScenesVisible?e.element[rn]:this.canvas3D}countVisibleScenes(){let{canvas3D:e}=this,t=0,i=null;for(let s of this.scenes){let{element:n}=s;n.modelIsVisible&&null==s.externalRenderer&&++t,e.parentElement===s.canvas.parentElement&&(i=s)}let s=t>1;if(null!=i){let t=s&&!this.multipleScenesVisible,n=!i.element.modelIsVisible;if(t||n){let{width:t,height:s}=this.sceneSize(i);this.copyPixels(i,t,s),e.parentElement.removeChild(e)}}this.multipleScenesVisible=s}updateRendererSize(){let e=ey();if(e!==this.dpr)for(let e of this.scenes){let{element:t}=e;t[n1](t.getBoundingClientRect())}let t=0,i=0;for(let e of this.scenes)t=Math.max(t,e.width),i=Math.max(i,e.height);if(t!==this.width||i!==this.height||e!==this.dpr)for(let s of(this.width=t,this.height=i,this.dpr=e,t=Math.ceil(t*e),i=Math.ceil(i*e),this.canRender&&this.threeRenderer.setSize(t,i,!1),this.scenes)){let{canvas:e}=s;e.width=t,e.height=i,s.forceRescale()}}updateRendererScale(e){let t=this.scaleStep;this.avgFrameDuration+=eQ(.2*(e-this.avgFrameDuration),-5,5),this.avgFrameDuration>60?++this.scaleStep:this.avgFrameDuration<40&&this.scaleStep>0&&--this.scaleStep,this.scaleStep=Math.min(this.scaleStep,this.lastStep),t!==this.scaleStep&&(this.avgFrameDuration=50)}shouldRender(e){if(e.shouldRender())e.scaleStep!=this.scaleStep&&(e.scaleStep=this.scaleStep,this.rescaleCanvas(e));else{if(0==e.scaleStep)return!1;e.scaleStep=0,this.rescaleCanvas(e)}return!0}rescaleCanvas(e){let t=st[e.scaleStep],i=Math.ceil(this.width/t),s=Math.ceil(this.height/t),{style:n}=e.canvas;n.width="".concat(i,"px"),n.height="".concat(s,"px"),this.canvas3D.style.width="".concat(i,"px"),this.canvas3D.style.height="".concat(s,"px");let r=this.dpr*t,a=t<1?"GPU throttling":this.dpr!==window.devicePixelRatio?"No meta viewport tag":"";e.element.dispatchEvent(new CustomEvent("render-scale",{detail:{reportedDpr:window.devicePixelRatio,renderedDpr:r,minimumDpr:this.dpr*st[this.lastStep],pixelWidth:Math.ceil(e.width*r),pixelHeight:Math.ceil(e.height*r),reason:a}}))}sceneSize(e){let{dpr:t}=this,i=st[e.scaleStep];return{width:Math.min(Math.ceil(e.width*i*t),this.canvas3D.width),height:Math.min(Math.ceil(e.height*i*t),this.canvas3D.height)}}copyPixels(e,t,i){let s=e.context;if(null==s){console.log("could not acquire 2d context");return}s.clearRect(0,0,t,i),s.drawImage(this.canvas3D,0,0,t,i,0,0,t,i),e.canvas.classList.add("show")}orderedScenes(){let e=[];for(let t of[!1,!0])for(let i of this.scenes)i.element.modelIsVisible===t&&e.push(i);return e}get isPresenting(){return this.arRenderer.isPresenting}preRender(e,t,i){let{element:s,exposure:n}=e;s[rA](t,i);let r="number"==typeof n&&!Number.isNaN(n);this.threeRenderer.toneMappingExposure=r?n:1}render(e,t){if(null!=t){this.arRenderer.onWebXRFrame(e,t);return}let i=e-this.lastTick;if(this.lastTick=e,!this.canRender||this.isPresenting)return;this.countVisibleScenes(),this.updateRendererSize(),this.renderedLastFrame&&(this.updateRendererScale(i),this.renderedLastFrame=!1);let{canvas3D:s}=this;for(let t of this.orderedScenes()){let{element:n}=t;if(!n.loaded||!n.modelIsVisible&&t.renderCount>0||(this.preRender(t,e,i),!this.shouldRender(t)))continue;if(null!=t.externalRenderer){let e=t.getCamera();e.updateMatrix();let{matrix:i,projectionMatrix:s}=e,n=i.elements.slice(),r=t.getTarget();n[12]+=r.x,n[13]+=r.y,n[14]+=r.z,t.externalRenderer.render({viewMatrix:n,projectionMatrix:s.elements});continue}if(!n.modelIsVisible&&!this.multipleScenesVisible)for(let e of this.scenes)e.element.modelIsVisible&&e.queueRender();let{width:r,height:a}=this.sceneSize(t);t.renderShadow(this.threeRenderer),this.threeRenderer.setRenderTarget(null),this.threeRenderer.setViewport(0,Math.ceil(this.height*this.dpr)-a,r,a),this.threeRenderer.render(t,t.camera),this.multipleScenesVisible||0===t.renderCount?this.copyPixels(t,r,a):s.parentElement!==t.canvas.parentElement&&(t.canvas.parentElement.appendChild(s),t.canvas.classList.remove("show")),t.hasRendered(),++t.renderCount,this.renderedLastFrame=!0}}dispose(){null!=this.textureUtils&&this.textureUtils.dispose(),null!=this.threeRenderer&&this.threeRenderer.dispose(),this.textureUtils=null,this.threeRenderer=null;let e=[];for(let t of this.scenes)e.push(t.element);return this.canvas3D.removeEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.removeEventListener("webglcontextrestored",this.onWebGLContextRestored),e}constructor(e){super(),this.loader=new t5(i3),this.width=0,this.height=0,this.dpr=1,this.debugger=null,this.scenes=new Set,this.multipleScenesVisible=!1,this.lastTick=performance.now(),this.renderedLastFrame=!1,this.scaleStep=0,this.lastStep=3,this.avgFrameDuration=50,this.onWebGLContextLost=e=>{this.dispatchEvent({type:"contextlost",sourceEvent:e})},this.onWebGLContextRestored=()=>{var e;for(let t of(null===(e=this.textureUtils)||void 0===e||e.dispose(),this.textureUtils=new se(this.threeRenderer),this.scenes))t.element[eR]()},this.dpr=ey(),this.canvas3D=document.createElement("canvas"),this.canvas3D.id="webgl-canvas",this.canvas3D.classList.add("show");try{this.threeRenderer=new en.CP7({canvas:this.canvas3D,alpha:!0,antialias:!0,powerPreference:e.powerPreference,preserveDrawingBuffer:!0}),this.threeRenderer.autoClear=!0,this.threeRenderer.outputEncoding=en.knz,this.threeRenderer.physicallyCorrectLights=!0,this.threeRenderer.setPixelRatio(1),this.debugger=e.debug?new iP(this):null,this.threeRenderer.debug={checkShaderErrors:!!this.debugger},this.threeRenderer.toneMapping=en.LY2}catch(e){console.warn(e)}this.arRenderer=new i_(this),this.textureUtils=this.canRender?new se(this.threeRenderer):null,t5.initializeKTX2Loader(this.threeRenderer),this.canvas3D.addEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.addEventListener("webglcontextrestored",this.onWebGLContextRestored),this.updateRendererSize()}}ss._singleton=new ss({powerPreference:(self.ModelViewerElement||{}).powerPreference||si,debug:ew()});/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sn=Symbol("correlatedObjects"),sr=Symbol("sourceObject"),sa=Symbol("onUpdate");class sA{constructor(e,t,i=null){this[sa]=e,this[sr]=t,this[sn]=i}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let so=new en.vBJ,sl=new en._12(2,2),sh=0,sc=Symbol("threeTexture");Symbol("applyTexture");class sg extends sA{get[sc](){var e;return console.assert(null!=this[sn]&&this[sn].size>0,"Image correlated object is undefined"),null===(e=this[sn])||void 0===e?void 0:e.values().next().value}get name(){return this[sr].name||""}get uri(){return this[sr].uri}get bufferView(){return this[sr].bufferView}get type(){return null!=this.uri?"external":"embedded"}set name(e){this[sr].name=e}async createThumbnail(e,t){let i=new en.xsS;so.map=this[sc];let s=new en.Kj0(sl,so);i.add(s);let n=new en.iKG(-1,1,1,-1,0,1),{threeRenderer:r}=ss.singleton,a=new en.dd2(e,t);r.setRenderTarget(a),r.render(i,n),r.setRenderTarget(null);let A=new Uint8Array(e*t*4);r.readRenderTargetPixels(a,0,0,e,t,A),nJ.width=e,nJ.height=t;let o=nJ.getContext("2d"),l=o.createImageData(e,t);return l.data.set(A),o.putImageData(l,0,0),new Promise(async(e,t)=>{nJ.toBlob(i=>{if(!i)return t("Failed to capture thumbnail.");e(URL.createObjectURL(i))},"image/png")})}constructor(e,t,i){super(e,i=null!=i?i:{name:t&&t.image&&t.image.src?t.image.src.split("/").pop():"adhoc_image",uri:t&&t.image&&t.image.src?t.image.src:"adhoc_image"+sh++},new Set(t?[t]:[]))}}(c=E||(E={}))[c.Nearest=9728]="Nearest",c[c.Linear=9729]="Linear",c[c.NearestMipmapNearest=9984]="NearestMipmapNearest",c[c.LinearMipmapNearest=9985]="LinearMipmapNearest",c[c.NearestMipmapLinear=9986]="NearestMipmapLinear",c[c.LinearMipmapLinear=9987]="LinearMipmapLinear",(g=C||(C={}))[g.ClampToEdge=33071]="ClampToEdge",g[g.MirroredRepeat=33648]="MirroredRepeat",g[g.Repeat=10497]="Repeat";/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let su=(()=>{let e=[E.Nearest,E.Linear,E.NearestMipmapNearest,E.LinearMipmapLinear,E.NearestMipmapLinear,E.LinearMipmapLinear];return t=>e.indexOf(t)>-1})(),sd=(()=>{let e=[E.Nearest,E.Linear];return t=>e.indexOf(t)>-1})(),sp=(()=>{let e=[C.ClampToEdge,C.MirroredRepeat,C.Repeat];return t=>e.indexOf(t)>-1})(),sm=(e,t)=>{switch(e){case"minFilter":return su(t);case"magFilter":return sd(t);case"wrapS":case"wrapT":return sp(t);default:throw Error('Cannot configure property "'.concat(e,'" on Sampler'))}},sI=Symbol("threeTextures"),sf=Symbol("setProperty"),sE=Symbol("sourceSampler");class sC extends sA{get[sI](){return console.assert(null!=this[sn]&&this[sn].size>0,"Sampler correlated object is undefined"),this[sn]}get[sE](){return console.assert(null!=this[sr],"Sampler source is undefined"),this[sr]}get name(){return this[sr].name||""}get minFilter(){return this[sE].minFilter}get magFilter(){return this[sE].magFilter}get wrapS(){return this[sE].wrapS}get wrapT(){return this[sE].wrapT}setMinFilter(e){this[sf]("minFilter",e)}setMagFilter(e){this[sf]("magFilter",e)}setWrapS(e){this[sf]("wrapS",e)}setWrapT(e){this[sf]("wrapT",e)}[sf](e,t){let i=this[sE];if(null!=i){if(sm(e,t))for(let s of(i[e]=t,this[sI]))s[e]=t,s.needsUpdate=!0;this[sa]()}}constructor(e,t,i){null==(i=null!=i?i:{}).minFilter&&(i.minFilter=t?t.minFilter:E.LinearMipmapLinear),null==i.magFilter&&(i.magFilter=t?t.magFilter:E.Linear),null==i.wrapS&&(i.wrapS=t?t.wrapS:C.Repeat),null==i.wrapT&&(i.wrapT=t?t.wrapT:C.Repeat),super(e,i,new Set(t?[t]:[]))}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sB=Symbol("image"),sQ=Symbol("sampler");class sy extends sA{get name(){return this[sr].name||""}set name(e){this[sr].name=e}get sampler(){return this[sQ]}get source(){return this[sB]}constructor(e,t,i=null,s=null,n=null){super(e,i||{},new Set(t?[t]:[])),this[sQ]=new sC(e,t,s),this[sB]=new sg(e,t,n)}}let sw=Symbol("texture"),sv=Symbol("transform"),sb=Symbol("materials"),sS=Symbol("usage");(u=y||(y={}))[u.Base=0]="Base",u[u.MetallicRoughness=1]="MetallicRoughness",u[u.Normal=2]="Normal",u[u.Occlusion=3]="Occlusion",u[u.Emissive=4]="Emissive";class sx{get texture(){return this[sw]}setTexture(e){let t=null!=e?e.source[sc]:null,i=en.knz;if(this[sw]=e,this[sb])for(let e of this[sb]){switch(this[sS]){case y.Base:e.map=t;break;case y.MetallicRoughness:i=en.rnI,e.metalnessMap=t,e.roughnessMap=t;break;case y.Normal:i=en.rnI,e.normalMap=t;break;case y.Occlusion:i=en.rnI,e.aoMap=t;break;case y.Emissive:e.emissiveMap=t}e.needsUpdate=!0}t&&(t.encoding=i,t.rotation=this[sv].rotation,t.repeat=this[sv].scale,t.offset=this[sv].offset),this.onUpdate()}constructor(e,t,i,s,n,r){if(this[B]=null,this[Q]={rotation:0,scale:new en.FM8(1,1),offset:new en.FM8(0,0)},r&&i){let t=n.textures?n.textures[r.index]:null,s=t&&n.samplers?n.samplers[t.sampler]:null,a=t&&n.images?n.images[t.source]:null;this[sv].rotation=i.rotation,this[sv].scale.copy(i.repeat),this[sv].offset.copy(i.offset),this[sw]=new sy(e,i,t,s,a)}this.onUpdate=e,this[sb]=s,this[sS]=t}}B=sw,Q=sv;/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sM=Symbol("threeMaterials"),sR=Symbol("baseColorTexture"),sD=Symbol("metallicRoughnessTexture");class sT extends sA{get[sM](){return this[sn]}get baseColorFactor(){return this[sr].baseColorFactor}get metallicFactor(){return this[sr].metallicFactor}get roughnessFactor(){return this[sr].roughnessFactor}get baseColorTexture(){return this[sR]}get metallicRoughnessTexture(){return this[sD]}setBaseColorFactor(e){let t=new en.Ilk;for(let i of(e instanceof Array?t.fromArray(e):t.set(e).convertSRGBToLinear(),this[sM]))i.color.set(t),e instanceof Array?i.opacity=e[3]:(e=[0,0,0,i.opacity],t.toArray(e));this[sr].baseColorFactor=e,this[sa]()}setMetallicFactor(e){for(let t of this[sM])t.metalness=e;this[sr].metallicFactor=e,this[sa]()}setRoughnessFactor(e){for(let t of this[sM])t.roughness=e;this[sr].roughnessFactor=e,this[sa]()}constructor(e,t,i,s){super(e,i,s),null==i.baseColorFactor&&(i.baseColorFactor=[1,1,1,1]),null==i.roughnessFactor&&(i.roughnessFactor=1),null==i.metallicFactor&&(i.metallicFactor=1);let{baseColorTexture:n,metallicRoughnessTexture:r}=i,{map:a,metalnessMap:A}=s.values().next().value;this[sR]=new sx(e,y.Base,a,s,t,n||null),this[sD]=new sx(e,y.MetallicRoughness,A,s,t,r||null)}}let sL=Symbol("pbrMetallicRoughness"),sF=Symbol("normalTexture"),sk=Symbol("occlusionTexture"),sU=Symbol("emissiveTexture"),sN=Symbol("backingThreeMaterial"),sG=Symbol("applyAlphaCutoff"),s_=Symbol("lazyLoadGLTFInfo"),sP=Symbol("initialize"),sO=Symbol("getLoadedMaterial"),sH=Symbol("ensureMaterialIsLoaded"),sq=Symbol("gltfIndex"),sK=Symbol("setActive"),sJ=Symbol("variantIndices"),sV=Symbol("isActive"),sY=Symbol("variantSet"),sj=Symbol("modelVariants");class sz extends sA{get[(w=sY,sN)](){return this[sn].values().next().value}[sP](e){let t=this[sa],i=this[sr],s=this[sn];i.extensions&&i.extensions.KHR_materials_pbrSpecularGlossiness&&console.warn("Material ".concat(i.name,' uses a deprecated extension\n          "KHR_materials_pbrSpecularGlossiness", please use\n          "pbrMetallicRoughness" instead. Specular Glossiness materials are\n          currently supported for rendering, but not for our scene-graph API,\n          nor for auto-generation of USDZ for Quick Look.')),null==i.pbrMetallicRoughness&&(i.pbrMetallicRoughness={}),this[sL]=new sT(t,e,i.pbrMetallicRoughness,s),null==i.emissiveFactor&&(i.emissiveFactor=[0,0,0]),null==i.doubleSided&&(i.doubleSided=!1),null==i.alphaMode&&(i.alphaMode="OPAQUE"),null==i.alphaCutoff&&(i.alphaCutoff=.5);let{normalTexture:n,occlusionTexture:r,emissiveTexture:a}=i,{normalMap:A,aoMap:o,emissiveMap:l}=s.values().next().value;this[sF]=new sx(t,y.Normal,A,s,e,n||null),this[sk]=new sx(t,y.Occlusion,o,s,e,r||null),this[sU]=new sx(t,y.Emissive,l,s,e,a||null)}async [sO](){if(null!=this[s_]){let{set:e,material:t}=await this[s_].doLazyLoad();return this[sn]=e,this[sP](this[s_].gltf),this[s_]=void 0,this.ensureLoaded=async()=>{},t}return this[sn].values().next().value}[sH](){if(null!=this[s_])throw Error('Material "'.concat(this.name,"\" has not been loaded, call 'await\n    myMaterial.ensureLoaded()' before using an unloaded material."))}async ensureLoaded(){await this[sO]()}get isLoaded(){return null==this[s_]}get isActive(){return this[sV]}[sK](e){this[sV]=e}get name(){return this[sr].name}set name(e){let t=this[sr];if(null!=t&&(t.name=e),null!=this[sn])for(let t of this[sn])t.name=e}get pbrMetallicRoughness(){return this[sH](),this[sL]}get normalTexture(){return this[sH](),this[sF]}get occlusionTexture(){return this[sH](),this[sk]}get emissiveTexture(){return this[sH](),this[sU]}get emissiveFactor(){return this[sH](),this[sr].emissiveFactor}get index(){return this[sq]}[sJ](){return this[sY]}hasVariant(e){let t=this[sj].get(e);return null!=t&&this[sY].has(t.index)}setEmissiveFactor(e){this[sH]();let t=new en.Ilk;for(let i of(e instanceof Array?t.fromArray(e):t.set(e).convertSRGBToLinear(),this[sn]))i.emissive.set(t);this[sr].emissiveFactor=t.toArray(),this[sa]()}[sG](){this[sH]();let e=this[sr];for(let t of this[sn])"MASK"===this[sr].alphaMode?t.alphaTest=e.alphaCutoff:t.alphaTest=void 0,t.needsUpdate=!0}setAlphaCutoff(e){this[sH](),this[sr].alphaCutoff=e,this[sG](),this[sa]()}getAlphaCutoff(){return this[sH](),this[sr].alphaCutoff}setDoubleSided(e){for(let t of(this[sH](),this[sn]))t.side=e?en.ehD:en.Wl3,t.needsUpdate=!0;this[sr].doubleSided=e,this[sa]()}getDoubleSided(){return this[sH](),this[sr].doubleSided}setAlphaMode(e){this[sH]();let t=(e,t)=>{e.transparent=t,e.depthWrite=!t};for(let i of(this[sr].alphaMode=e,this[sn]))t(i,"BLEND"===e),this[sG](),i.needsUpdate=!0;this[sa]()}getAlphaMode(){return this[sH](),this[sr].alphaMode}constructor(e,t,i,s,n,r,a,A){super(e,i,a),this[w]=new Set,this[sq]=s,this[sV]=n,this[sj]=r,null==A?this[sP](t):this[s_]=A}}let sW=Symbol("materials"),sX=Symbol("variantToMaterialMap"),sZ=Symbol("modelVariants"),s$=Symbol("mesh");Symbol("primitives"),Symbol("loadVariant"),Symbol("prepareVariantsForExport"),Symbol("switchVariant");let s0=Symbol("children"),s1=Symbol("initialMaterialIdx"),s2=Symbol("activeMaterialIdx");class s3{constructor(e){this.name="",this[v]=[],this.name=e}}v=s0;class s4 extends s3{get mesh(){return this[s$]}async setActiveMaterial(e){let t=this[sW].get(e);return null!=t&&(this.mesh.material=await t[sO](),this[s2]=e),this.mesh.material}getActiveMaterial(){return this[sW].get(this[s2])}getMaterial(e){return this[sW].get(e)}async enableVariant(e){if(null==e)return this.setActiveMaterial(this[s1]);if(null!=this[sX]&&this[sZ].has(e)){let t=this[sZ].get(e);return this.enableVariantHelper(t.index)}return null}async enableVariantHelper(e){if(null!=this[sX]&&null!=e){let t=this[sX].get(e);if(null!=t)return this.setActiveMaterial(t.index)}return null}async instantiateVariants(){if(null!=this[sX])for(let e of this[sX].keys()){let t=this.mesh.userData.variantMaterials.get(e);if(null!=t.material)continue;let i=await this.enableVariantHelper(e);null!=i&&(t.material=i)}}get variantInfo(){return this[sX]}addVariant(e,t){if(!this.ensureVariantIsUnused(t))return!1;this[sZ].has(t)||this[sZ].set(t,{name:t,index:this[sZ].size});let i=this[sZ].get(t).index;return e[sJ]().add(i),this[sX].set(i,e),this[sW].set(e.index,e),this.updateVariantUserData(i,e),!0}deleteVariant(e){if(this.variantInfo.has(e)){this.variantInfo.delete(e);let t=this.mesh.userData.variantMaterials;null!=t&&t.delete(e)}}updateVariantUserData(e,t){t[sJ]().add(e),this.mesh.userData.variantData=this[sZ],this.mesh.userData.variantMaterials=this.mesh.userData.variantMaterials||new Map,this.mesh.userData.variantMaterials.set(e,{material:t[sn].values().next().value,gltfMaterialIndex:t.index})}ensureVariantIsUnused(e){let t=this[sZ].get(e);return!(null!=t&&this.variantInfo.has(t.index))||(console.warn("Primitive cannot add variant '".concat(e,"' for this material, it already exists.")),!1)}constructor(e,t,i,s){super(e.name),this[b]=new Map,this[S]=new Map,this[x]=0,this[M]=0,this[s$]=e;let{gltf:n,threeGLTF:r,threeObjectMap:a}=s;this[sZ]=i,this.mesh.userData.variantData=i;let A=a.get(e.material);null!=A.materials?this[s1]=this[s2]=A.materials:console.error("Primitive (".concat(e.name,") missing initial material reference."));let o=e.userData.associations||{};if(null==o.meshes){console.error("Mesh is missing primitive index association");return}let l=((n.meshes||[])[o.meshes].primitives||[])[o.primitives];if(null==l){console.error("Mesh primitive definition is missing.");return}if(null!=l.material)this[sW].set(l.material,t[l.material]);else{let e=t.findIndex(e=>"Default"===e.name);e>=0?this[sW].set(e,t[e]):console.warn("gltfPrimitive has no material!")}if(l.extensions&&l.extensions.KHR_materials_variants){let e=l.extensions.KHR_materials_variants,s=r.parser.json.extensions.KHR_materials_variants.variants;for(let n of e.mappings){let e=t[n.material];for(let t of(this[sW].set(n.material,e),n.variants)){let{name:n}=s[t];this[sX].set(t,e),e[sJ]().add(t),i.has(n)||i.set(n,{name:n,index:t})}}}}}b=sW,S=sX,x=s1,M=s2;let s8=Symbol("materials"),s5=Symbol("hierarchy"),s6=Symbol("roots"),s9=Symbol("primitives");Symbol("loadVariant");let s7=Symbol("correlatedSceneGraph"),ne=Symbol("prepareVariantsForExport"),nt=Symbol("switchVariant"),ni=Symbol("threeScene"),ns=Symbol("materialsFromPoint"),nn=Symbol("materialFromPoint"),nr=Symbol("variantData"),na=Symbol("availableVariants"),nA=Symbol("modelOnUpdate"),no=Symbol("cloneMaterial");class nl{constructor(e,t,i,s){this.gltf=e,this.gltfElementMap=t,this.mapKey=i,this.doLazyLoad=s}}class nh{get materials(){return this[s8]}[(R=s8,D=s5,T=s6,L=s9,F=nA,k=nr,na)](){let e=Array.from(this[nr].values());return e.sort((e,t)=>e.index-t.index),e.map(e=>e.name)}getMaterialByName(e){let t=this[s8].filter(t=>t.name===e);return t.length>0?t[0]:null}[ns](e){return e.intersectObject(this[ni],!0).map(e=>{let t=this[s5].find(t=>t instanceof s4&&t.mesh===e.object);return null!=t?t.getActiveMaterial():null})}[nn](e){let t=this[ns](e);return t.length>0?t[0]:null}async [nt](e){for(let t of this[s9])await t.enableVariant(e);for(let e of this.materials)e[sK](!1);for(let e of this[s9])this.materials[e.getActiveMaterial().index][sK](!0)}async [ne](){let e=[];for(let t of this[s9])e.push(t.instantiateVariants());await Promise.all(e)}[no](e,t){let i=this.materials[e];i.isLoaded||console.error("Cloning an unloaded material,\n           call 'material.ensureLoaded() before cloning the material.");let s=i[sn],n=JSON.parse(JSON.stringify(i[sr]));n.name=t,this[s7].gltf.materials.push(n);let r=new Set;for(let[e,i]of s.entries()){let n=i.clone();n.name=t+(s.size>1?"_inst"+e:""),r.add(n)}let a=new sz(this[nA],this[s7].gltf,n,this[s8].length,!1,this[nr],r);return this[s8].push(a),a}createMaterialInstanceForVariant(e,t,i){let s=!(arguments.length>3)||void 0===arguments[3]||arguments[3],n=null;for(let s of this[s9]){let r=this[nr].get(i);null!=r&&s.variantInfo.has(r.index)||null==s.getMaterial(e)||(this.hasVariant(i)||this.createVariant(i),null==n&&(n=this[no](e,t)),s.addVariant(n,i))}if(s&&null!=n)for(let t of(n[sK](!0),this.materials[e][sK](!1),this[s9]))t.enableVariant(i);return n}createVariant(e){this[nr].has(e)?console.warn("Variant '".concat(e,"'' already exists")):this[nr].set(e,{name:e,index:this[nr].size})}hasVariant(e){return this[nr].has(e)}setMaterialToVariant(e,t){if(null==this[na]().find(e=>e===t)){console.warn("Can't add material to '".concat(t,"', the variant does not exist.'"));return}if(e<0||e>=this.materials.length){console.error("setMaterialToVariant(): materialIndex is out of bounds.");return}for(let i of this[s9]){let s=i.getMaterial(e);null!=s&&i.addVariant(s,t)}}updateVariantName(e,t){let i=this[nr].get(e);null!=i&&(i.name=t,this[nr].set(t,i),this[nr].delete(e))}deleteVariant(e){let t=this[nr].get(e);if(null!=t){for(let i of this.materials)i.hasVariant(e)&&i[sY].delete(t.index);for(let e of this[s9])e.deleteVariant(t.index);this[nr].delete(e)}}constructor(e,t=()=>{}){this[R]=[],this[D]=[],this[T]=[],this[L]=[],this[F]=()=>{},this[k]=new Map,this[nA]=t,this[s7]=e;let{gltf:i,threeGLTF:s,gltfElementMap:n}=e;for(let[e,r]of(this[ni]=s.scene,i.materials.entries())){let a=n.get(r);if(null!=a)this[s8].push(new sz(t,i,r,e,!0,this[nr],a));else{let r=(i.materials||[])[e],A=e,o=async()=>{let e=await s.parser.getDependency("material",A),t=new Set;return n.set(r,t),t.add(e),{set:t,material:e}};this[s8].push(new sz(t,i,r,e,!1,this[nr],a,new nl(i,n,r,o)))}}let r=new Map,a=[];for(let e of s.scene.children)a.push(e);for(;a.length>0;){let t=a.pop(),i=null;t instanceof en.Kj0?(i=new s4(t,this.materials,this[nr],e),this[s9].push(i)):i=new s3(t.name);let s=r.get(t);for(let e of(null!=s?s[s0].push(i):this[s6].push(i),this[s5].push(i),t.children))a.push(e),r.set(t,i)}}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nc=function(e,t,i,s){var n,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var A=e.length-1;A>=0;A--)(n=e[A])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};let ng=Symbol("currentGLTF"),nu=Symbol("originalGltfJson"),nd=Symbol("model"),np=Symbol("getOnUpdateMethod"),nm=Symbol("textureLoader"),nI=(e,t)=>({type:"number",number:e,unit:t}),nf=(()=>{let e={};return t=>{let i=t;if(i in e)return e[i];let s=[],n=0;for(;t;){if(++n>1e3){t="";break}let e=nE(t),i=e.nodes[0];if(null==i||0===i.terms.length)break;s.push(i),t=e.remainingInput}return e[i]=s}})(),nE=(()=>{let e=/^(\-\-|[a-z\u0240-\uffff])/i,t=/^([\*\+\/]|[\-]\s)/i,i=/^[\),]/;return s=>{let n=[];for(;s.length&&(s=s.trim(),!i.test(s));)if("("===s[0]){let{nodes:e,remainingInput:t}=ny(s);s=t,n.push({type:"function",name:{type:"ident",value:"calc"},arguments:e})}else if(e.test(s)){let e=nC(s),t=e.nodes[0];if("("===(s=e.remainingInput)[0]){let{nodes:e,remainingInput:i}=ny(s);n.push({type:"function",name:t,arguments:e}),s=i}else n.push(t)}else if(t.test(s))n.push({type:"operator",value:s[0]}),s=s.slice(1);else{let{nodes:e,remainingInput:t}="#"===s[0]?nQ(s):nB(s);if(0===e.length)break;n.push(e[0]),s=t}return{nodes:[{type:"expression",terms:n}],remainingInput:s}}})(),nC=(()=>{let e=/[^a-z0-9_\-\u0240-\uffff]/i;return t=>{let i=t.match(e);return{nodes:[{type:"ident",value:null==i?t:t.substr(0,i.index)}],remainingInput:null==i?"":t.substr(i.index)}}})(),nB=(()=>{let e=/[\+\-]?(\d+[\.]\d+|\d+|[\.]\d+)([eE][\+\-]?\d+)?/,t=/^[a-z%]+/i,i=/^(m|mm|cm|rad|deg|[%])$/;return s=>{let n=s.match(e),r=null==n?"0":n[0],a=(s=null==r?s:s.slice(r.length)).match(t),A=null!=a&&""!==a[0]?a[0]:null,o=null==a?s:s.slice(A.length);return null==A||i.test(A)||(A=null),{nodes:[{type:"number",number:parseFloat(r)||0,unit:A}],remainingInput:o}}})(),nQ=(()=>{let e=/^[a-f0-9]*/i;return t=>{let i=(t=t.slice(1).trim()).match(e);return{nodes:null==i?[]:[{type:"hex",value:i[0]}],remainingInput:null==i?t:t.slice(i[0].length)}}})(),ny=e=>{let t=[];for(e=e.slice(1).trim();e.length;){let i=nE(e);if(t.push(i.nodes[0]),","===(e=i.remainingInput.trim())[0])e=e.slice(1).trim();else if(")"===e[0]){e=e.slice(1);break}}return{nodes:t,remainingInput:e}},nw=Symbol("visitedTypes");class nv{walk(e,t){let i=e.slice();for(;i.length;){let e=i.shift();switch(this[nw].indexOf(e.type)>-1&&t(e),e.type){case"expression":i.unshift(...e.terms);break;case"function":i.unshift(e.name,...e.arguments)}}}constructor(e){this[nw]=e}}let nb=Object.freeze({type:"number",number:0,unit:null}),nS=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,{number:i,unit:s}=e;if(isFinite(i)){if("rad"===e.unit||null==e.unit)return e}else i=t,s="rad";return{type:"number",number:("deg"===s&&null!=i?i:0)*Math.PI/180,unit:"rad"}},nx=function(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,{number:s,unit:n}=e;if(isFinite(s)){if("m"===e.unit)return e}else s=i,n="m";switch(n){default:t=1;break;case"cm":t=.01;break;case"mm":t=.001}return{type:"number",number:t*s,unit:"m"}},nM=(()=>{let e=e=>e,t={rad:e,deg:nS,m:e,mm:nx,cm:nx};return function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nb;isFinite(e.number)||(e.number=i.number,e.unit=i.unit);let{unit:s}=e;if(null==s)return e;let n=t[s];return null==n?i:n(e)}})();/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR extends t6{get facingCamera(){return!this.element.classList.contains("hide")}show(){this.facingCamera&&this.initialized||this.updateVisibility(!0)}hide(){(this.facingCamera||!this.initialized)&&this.updateVisibility(!1)}increment(){this.referenceCount++}decrement(){return this.referenceCount>0&&--this.referenceCount,0===this.referenceCount}updatePosition(e){if(null==e)return;let t=nf(e)[0].terms;for(let e=0;e<3;++e)this.position.setComponent(e,nM(t[e]).number);this.updateMatrixWorld()}updateNormal(e){if(null==e)return;let t=nf(e)[0].terms;for(let e=0;e<3;++e)this.normal.setComponent(e,nM(t[e]).number)}orient(e){this.pivot.style.transform="rotate(".concat(e,"rad)")}updateVisibility(e){e?this.element.classList.remove("hide"):this.element.classList.add("hide"),this.slot.assignedNodes().forEach(t=>{if(t.nodeType!==Node.ELEMENT_NODE)return;let i=t.dataset.visibilityAttribute;if(null!=i){let s="data-".concat(i);e?t.setAttribute(s,""):t.removeAttribute(s)}t.dispatchEvent(new CustomEvent("hotspot-visibility",{detail:{visible:e}}))}),this.initialized=!0}constructor(e){super(document.createElement("div")),this.normal=new en.Pa4(0,1,0),this.initialized=!1,this.referenceCount=1,this.pivot=document.createElement("div"),this.slot=document.createElement("slot"),this.element.classList.add("annotation-wrapper"),this.slot.name=e.name,this.element.appendChild(this.pivot),this.pivot.appendChild(this.slot),this.updatePosition(e.position),this.updateNormal(e.normal)}}let nD=(e,t,i)=>{let s=i,n=new en.Pa4;return e.traverseVisible(e=>{let i,r;e.updateWorldMatrix(!1,!1);let a=e.geometry;if(void 0!==a){if(a.isGeometry){let A=a.vertices;for(i=0,r=A.length;i<r;i++)n.copy(A[i]),e.isSkinnedMesh?e.boneTransform(i,n):n.applyMatrix4(e.matrixWorld),s=t(s,n)}else if(a.isBufferGeometry){let{position:A}=a.attributes;if(void 0!==A)for(i=0,r=A.count;i<r;i++)n.fromBufferAttribute(A,i),e.isSkinnedMesh?e.boneTransform(i,n):n.applyMatrix4(e.matrixWorld),s=t(s,n)}}}),s},nT={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:"\n\n		varying vec2 vUv;\n\n		void main() {\n\n			vUv = uv;\n			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n		}",fragmentShader:"\n\n		uniform sampler2D tDiffuse;\n		uniform float h;\n\n		varying vec2 vUv;\n\n		void main() {\n\n			vec4 sum = vec4( 0.0 );\n\n			sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\n			sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\n			sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\n			sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\n			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n			sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\n			sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\n			sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\n			sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\n\n			gl_FragColor = sum;\n\n		}"},nL={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:"\n\n		varying vec2 vUv;\n\n		void main() {\n\n			vUv = uv;\n			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n		}",fragmentShader:"\n\n		uniform sampler2D tDiffuse;\n		uniform float v;\n\n		varying vec2 vUv;\n\n		void main() {\n\n			vec4 sum = vec4( 0.0 );\n\n			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\n			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\n			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\n			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\n			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\n			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\n			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\n			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\n\n			gl_FragColor = sum;\n\n		}"};class nF extends en.Tme{setScene(e,t,i){let{boundingBox:s,size:n,rotation:r,position:a}=this;if(this.isAnimated=e.animationNames.length>0,this.boundingBox.copy(e.boundingBox),this.size.copy(e.size),this.maxDimension=Math.max(n.x,n.y,n.z)*(this.isAnimated?2:1),this.boundingBox.getCenter(a),"back"===i){let{min:e,max:t}=s;[e.y,e.z]=[e.z,e.y],[t.y,t.z]=[t.z,t.y],[n.y,n.z]=[n.z,n.y],r.x=Math.PI/2,r.y=Math.PI}else r.x=0,r.y=0;if(this.isAnimated){let e=s.min.y,t=s.max.y;n.y=this.maxDimension,s.expandByVector(n.subScalar(this.maxDimension).multiplyScalar(-.5)),s.min.y=e,s.max.y=t,n.set(this.maxDimension,t-e,this.maxDimension)}"bottom"===i?a.y=s.min.y:a.z=s.min.y,this.setSoftness(t)}setSoftness(e){this.softness=e;let{size:t,camera:i}=this,s=this.isAnimated?2:1;this.setMapSize(s*Math.pow(2,9-3*e));let n=t.y/2,r=t.y*s;i.near=0,i.far=(1-e)*r+e*n,this.depthMaterial.opacity=1/e,i.updateProjectionMatrix(),this.setIntensity(this.intensity),this.setOffset(0)}setMapSize(e){let{size:t}=this;this.isAnimated&&(e*=2);let i=Math.floor(t.x>t.z?e:e*t.x/t.z),s=Math.floor(t.x>t.z?e*t.z/t.x:e),n=10+i,r=10+s;if(null!=this.renderTarget&&(this.renderTarget.width!==n||this.renderTarget.height!==r)&&(this.renderTarget.dispose(),this.renderTarget=null,this.renderTargetBlur.dispose(),this.renderTargetBlur=null),null==this.renderTarget){let e={format:en.wk1};this.renderTarget=new en.dd2(n,r,e),this.renderTargetBlur=new en.dd2(n,r,e),this.floor.material.map=this.renderTarget.texture}this.camera.scale.set(t.x*(1+10/i),t.z*(1+10/s),1),this.needsUpdate=!0}setIntensity(e){if(this.intensity=e,e>0){var t;this.visible=!0,this.floor.visible=!0,this.floor.material.opacity=e*((1-(t=this.softness*this.softness))*.3+1*t)}else this.visible=!1,this.floor.visible=!1}getIntensity(){return this.intensity}setOffset(e){this.floor.position.z=-e+.001*this.maxDimension}render(e,t){t.overrideMaterial=this.depthMaterial;let i=e.getClearAlpha();e.setClearAlpha(0),this.floor.visible=!1;let s=e.xr.enabled;e.xr.enabled=!1;let n=e.getRenderTarget();e.setRenderTarget(this.renderTarget),e.render(t,this.camera),t.overrideMaterial=null,this.floor.visible=!0,this.blurShadow(e),e.xr.enabled=s,e.setRenderTarget(n),e.setClearAlpha(i)}blurShadow(e){let{camera:t,horizontalBlurMaterial:i,verticalBlurMaterial:s,renderTarget:n,renderTargetBlur:r,blurPlane:a}=this;a.visible=!0,a.material=i,i.uniforms.h.value=1/this.renderTarget.width,i.uniforms.tDiffuse.value=this.renderTarget.texture,e.setRenderTarget(r),e.render(a,t),a.material=s,s.uniforms.v.value=1/this.renderTarget.height,s.uniforms.tDiffuse.value=this.renderTargetBlur.texture,e.setRenderTarget(n),e.render(a,t),a.visible=!1}dispose(){null!=this.renderTarget&&this.renderTarget.dispose(),null!=this.renderTargetBlur&&this.renderTargetBlur.dispose(),this.depthMaterial.dispose(),this.horizontalBlurMaterial.dispose(),this.verticalBlurMaterial.dispose(),this.floor.material.dispose(),this.floor.geometry.dispose(),this.blurPlane.geometry.dispose(),this.removeFromParent()}constructor(e,t,i){super(),this.camera=new en.iKG,this.renderTarget=null,this.renderTargetBlur=null,this.depthMaterial=new en.lRF,this.horizontalBlurMaterial=new en.jyz(nT),this.verticalBlurMaterial=new en.jyz(nL),this.intensity=0,this.softness=1,this.boundingBox=new en.ZzF,this.size=new en.Pa4,this.maxDimension=0,this.isAnimated=!1,this.needsUpdate=!1;let{camera:s}=this;s.rotation.x=Math.PI/2,s.left=-.5,s.right=.5,s.bottom=-.5,s.top=.5,this.add(s);let n=new en._12,r=new en.vBJ({opacity:1,transparent:!0,side:en._Li});this.floor=new en.Kj0(n,r),this.floor.userData.shadow=!0,s.add(this.floor),this.blurPlane=new en.Kj0(n),this.blurPlane.visible=!1,s.add(this.blurPlane),e.target.add(this),this.depthMaterial.onBeforeCompile=function(e){e.fragmentShader=e.fragmentShader.replace("gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );","gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * opacity );")},this.horizontalBlurMaterial.depthTest=!1,this.verticalBlurMaterial.depthTest=!1,this.setScene(e,t,i)}}let nk=new en.Pa4,nU=new en.Pa4,nN=new en.Pa4,nG=new en.iMs,n_=new en.Pa4,nP=new en.FM8;class nO extends en.xsS{get context(){return this.canvas.getContext("2d")}getCamera(){return null!=this.xrCamera?this.xrCamera:this.camera}queueRender(){this.isDirty=!0}shouldRender(){return this.isDirty}hasRendered(){this.isDirty=!1}forceRescale(){this.scaleStep=-1,this.queueRender()}async setObject(e){this.reset(),this._model=e,this.target.add(e),await this.setupScene()}async setSource(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};if(!e||e===this.url){i(1);return}if(this.reset(),this.url=e,null!=this.externalRenderer){let e=await this.externalRenderer.load(i);this.boundingSphere.radius=e.framedRadius,this.idealAspect=e.fieldOfViewAspect;return}null!=this.cancelPendingSourceChange&&(this.cancelPendingSourceChange(),this.cancelPendingSourceChange=null);try{t=await new Promise(async(t,s)=>{this.cancelPendingSourceChange=()=>s();try{let s=await this.element[rh].loader.load(e,this.element,i);t(s)}catch(e){s(e)}})}catch(e){if(null==e)return;throw e}this.cancelPendingSourceChange=null,this.reset(),this.url=e,this._currentGLTF=t,null!=t&&(this._model=t.scene,this.target.add(t.scene));let{animations:s}=t,n=new Map,r=[];for(let e of s)n.set(e.name,e),r.push(e.name);this.animations=s,this.animationsByName=n,this.animationNames=r,await this.setupScene()}async setupScene(){this.applyTransform(),this.updateBoundingBox(),await this.updateFraming(),this.updateShadow(),this.setShadowIntensity(this.shadowIntensity)}reset(){this.url=null,this.queueRender(),null!=this.shadow&&this.shadow.setIntensity(0),this.bakedShadows.clear();let{_model:e}=this;null!=e&&(e.removeFromParent(),this._model=null);let t=this._currentGLTF;null!=t&&(t.dispose(),this._currentGLTF=null),null!=this.currentAnimationAction&&(this.currentAnimationAction.stop(),this.currentAnimationAction=null),this.mixer.stopAllAction(),this.mixer.uncacheRoot(this)}dispose(){this.reset(),null!=this.shadow&&(this.shadow.dispose(),this.shadow=null),this.element[ng]=null,this.element[nu]=null,this.element[nd]=null}get currentGLTF(){return this._currentGLTF}setSize(e,t){if(this.width!==e||this.height!==t){if(this.width=Math.max(e,1),this.height=Math.max(t,1),this.annotationRenderer.setSize(e,t),this.aspect=this.width/this.height,null!=this.externalRenderer){let i=ey();this.externalRenderer.resize(e*i,t*i)}this.queueRender()}}markBakedShadow(e){e.userData.shadow=!0,this.bakedShadows.add(e)}unmarkBakedShadow(e){e.userData.shadow=!1,e.visible=!0,this.bakedShadows.delete(e),this.boundingBox.expandByObject(e)}findBakedShadows(e){let t=new en.ZzF;e.traverse(e=>{if(!e.isMesh||!e.material.transparent)return;t.setFromObject(e);let i=t.getSize(n_),s=Math.min(i.x,i.y,i.z);Math.max(i.x,i.y,i.z)<100*s||this.markBakedShadow(e)})}checkBakedShadows(){let{min:e,max:t}=this.boundingBox,i=new en.ZzF;for(let s of(this.boundingBox.getSize(this.size),this.bakedShadows))i.setFromObject(s),i.min.y<e.y+this.size.y/100&&i.min.x<=e.x&&i.max.x>=t.x&&i.min.z<=e.z&&i.max.z>=t.z||i.min.z<e.z+this.size.z/100&&i.min.x<=e.x&&i.max.x>=t.x&&i.min.y<=e.y&&i.max.y>=t.y||this.unmarkBakedShadow(s)}applyTransform(){let{model:e}=this;if(null==e)return;let t=nf(this.element.orientation)[0].terms,i=nM(t[0]).number,s=nM(t[1]).number,n=nM(t[2]).number;e.quaternion.setFromEuler(new en.USm(s,n,i,"YXZ"));let r=nf(this.element.scale)[0].terms;e.scale.set(r[0].number,r[1].number,r[2].number)}updateBoundingBox(){let{model:e}=this;if(null==e)return;this.target.remove(e),this.findBakedShadows(e);let t=(e,t)=>e.expandByPoint(t);this.setBakedShadowVisibility(!1),this.boundingBox=nD(e,t,new en.ZzF),this.boundingBox.isEmpty()&&(this.setBakedShadowVisibility(!0),this.bakedShadows.forEach(e=>this.unmarkBakedShadow(e)),this.boundingBox=nD(e,t,new en.ZzF)),this.checkBakedShadows(),this.setBakedShadowVisibility(),this.boundingBox.getSize(this.size),this.target.add(e)}async updateFraming(){let{model:e}=this;if(null==e)return;this.target.remove(e),this.setBakedShadowVisibility(!1);let{center:t}=this.boundingSphere;this.element.requestUpdate("cameraTarget"),await this.element.updateComplete,t.copy(this.getTarget()),this.boundingSphere.radius=Math.sqrt(nD(e,(e,i)=>Math.max(e,t.distanceToSquared(i)),0)),this.idealAspect=nD(e,(e,i)=>(i.sub(t),Math.max(e,Math.sqrt(i.x*i.x+i.z*i.z)/(this.idealCameraDistance()-Math.abs(i.y)))),0)/Math.tan(this.framedFoVDeg/2*Math.PI/180),this.setBakedShadowVisibility(),this.target.add(e)}setBakedShadowVisibility(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.shadowIntensity<=0;for(let t of this.bakedShadows)t.visible=e}idealCameraDistance(){let e=this.framedFoVDeg/2*Math.PI/180;return this.boundingSphere.radius/Math.sin(e)}adjustedFoV(e){return 2*Math.atan(Math.tan(e/2*Math.PI/180)*Math.max(1,this.idealAspect/this.aspect))*180/Math.PI}getNDC(e,t){if(null!=this.xrCamera)nP.set(e/window.screen.width,t/window.screen.height);else{let i=this.element.getBoundingClientRect();nP.set((e-i.x)/this.width,(t-i.y)/this.height)}return nP.multiplyScalar(2).subScalar(1),nP.y*=-1,nP}getSize(){return{width:this.width,height:this.height}}setEnvironmentAndSkybox(e,t){this.element[rh].arRenderer.presentedScene!==this&&(this.environment=e,this.background=t,this.queueRender())}setTarget(e,t,i){this.goalTarget.set(-e,-t,-i)}setTargetDamperDecayTime(e){this.targetDamperX.setDecayTime(e),this.targetDamperY.setDecayTime(e),this.targetDamperZ.setDecayTime(e)}getTarget(){return this.goalTarget.clone().multiplyScalar(-1)}jumpToGoal(){this.updateTarget(1e4)}updateTarget(e){let t=this.goalTarget,i=this.target.position;if(t.equals(i))return!1;{let s=this.boundingSphere.radius/10,{x:n,y:r,z:a}=i;return n=this.targetDamperX.update(n,t.x,e,s),r=this.targetDamperY.update(r,t.y,e,s),a=this.targetDamperZ.update(a,t.z,e,s),this.target.position.set(n,r,a),this.target.updateMatrixWorld(),this.queueRender(),!0}}pointTowards(e,t){let{x:i,z:s}=this.position;this.yaw=Math.atan2(e-i,t-s)}get model(){return this._model}set yaw(e){this.rotation.y=e,this.queueRender()}get yaw(){return this.rotation.y}set animationTime(e){this.mixer.setTime(e),this.queueShadowRender()}get animationTime(){if(null!=this.currentAnimationAction){let e=Math.max(this.currentAnimationAction._loopCount,0);return this.currentAnimationAction.loop===en.uEv&&(1&e)==1?this.duration-this.currentAnimationAction.time:this.currentAnimationAction.time}return 0}set animationTimeScale(e){this.mixer.timeScale=e}get animationTimeScale(){return this.mixer.timeScale}get duration(){return null!=this.currentAnimationAction&&this.currentAnimationAction.getClip()?this.currentAnimationAction.getClip().duration:0}get hasActiveAnimation(){return null!=this.currentAnimationAction}playAnimation(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:en.YKA,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;if(null==this._currentGLTF)return;let{animations:n}=this;if(null==n||0===n.length){console.warn("Cannot play animation (model does not have any animations)");return}let r=null;if(null!=e&&null==(r=this.animationsByName.get(e))){let t=parseInt(e);!isNaN(t)&&t>=0&&t<n.length&&(r=n[t])}null==r&&(r=n[0]);try{let{currentAnimationAction:e}=this,n=this.mixer.clipAction(r,this);this.currentAnimationAction=n,this.element.paused?this.mixer.stopAllAction():(n.paused=!1,null!=e&&n!==e?n.crossFadeFrom(e,t,!1):this.animationTimeScale>0&&this.animationTime==this.duration&&(this.animationTime=0)),n.setLoop(i,s),n.enabled=!0,n.clampWhenFinished=!0,n.play()}catch(e){console.error(e)}}stopAnimation(){this.currentAnimationAction=null,this.mixer.stopAllAction()}updateAnimation(e){this.mixer.update(e),this.queueShadowRender()}subscribeMixerEvent(e,t){this.mixer.addEventListener(e,t)}updateShadow(){let e=this.shadow;if(null!=e){let t="wall"===this.element.arPlacement?"back":"bottom";e.setScene(this,this.shadowSoftness,t),e.needsUpdate=!0}}renderShadow(e){let t=this.shadow;null!=t&&!0==t.needsUpdate&&(t.render(e,this),t.needsUpdate=!1)}queueShadowRender(){null!=this.shadow&&(this.shadow.needsUpdate=!0)}setShadowIntensity(e){if(this.shadowIntensity=e,null!=this._currentGLTF&&(this.setBakedShadowVisibility(),!(e<=0)||null!=this.shadow)){if(null==this.shadow){let e="wall"===this.element.arPlacement?"back":"bottom";this.shadow=new nF(this,this.shadowSoftness,e)}this.shadow.setIntensity(e)}}setShadowSoftness(e){this.shadowSoftness=e;let t=this.shadow;null!=t&&t.setSoftness(e)}setShadowOffset(e){let t=this.shadow;null!=t&&t.setOffset(e)}get raycaster(){return nG}positionAndNormalFromPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this.raycaster.setFromCamera(e,this.getCamera());let i=this.raycaster.intersectObject(t,!0).find(e=>e.object.visible&&!e.object.userData.shadow);return null==i||null==i.face?null:null==i.uv?{position:i.point,normal:i.face.normal,uv:null}:(i.face.normal.applyNormalMatrix(new en.Vkp().getNormalMatrix(i.object.matrixWorld)),{position:i.point,normal:i.face.normal,uv:i.uv})}addHotspot(e){this.target.add(e),this.annotationRenderer.domElement.appendChild(e.element)}removeHotspot(e){this.target.remove(e)}forHotspots(e){let{children:t}=this.target;for(let i=0,s=t.length;i<s;i++){let s=t[i];s instanceof nR&&e(s)}}updateHotspots(e){this.forHotspots(t=>{nk.copy(e),nU.setFromMatrixPosition(t.matrixWorld),nk.sub(nU),nN.copy(t.normal).transformDirection(this.target.matrixWorld),0>nk.dot(nN)?t.hide():t.show()})}orientHotspots(e){this.forHotspots(t=>{t.orient(e)})}setHotspotsVisibility(e){this.forHotspots(t=>{t.visible=e})}updateSchema(e){var t;let{schemaElement:i,element:s}=this,{alt:n,poster:r,iosSrc:a}=s;if(null!=e){let s=[{"@type":"MediaObject",contentUrl:e,encodingFormat:(null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase())==="gltf"?"model/gltf+json":"model/gltf-binary"}];a&&s.push({"@type":"MediaObject",contentUrl:a,encodingFormat:"model/vnd.usdz+zip"}),i.textContent=JSON.stringify({"@context":"http://schema.org/","@type":"3DModel",image:null!=r?r:void 0,name:null!=n?n:void 0,encoding:s}),document.head.appendChild(i)}else null!=i.parentElement&&i.parentElement.removeChild(i)}constructor({canvas:e,element:t,width:i,height:s}){super(),this.annotationRenderer=new is,this.schemaElement=document.createElement("script"),this.width=1,this.height=1,this.aspect=1,this.scaleStep=0,this.renderCount=0,this.externalRenderer=null,this.camera=new en.cPb(45,1,.1,100),this.xrCamera=null,this.url=null,this.target=new en.Tme,this.animationNames=[],this.boundingBox=new en.ZzF,this.boundingSphere=new en.aLr,this.size=new en.Pa4,this.idealAspect=0,this.framedFoVDeg=0,this.shadow=null,this.shadowIntensity=0,this.shadowSoftness=1,this.bakedShadows=new Set,this.exposure=1,this.canScale=!0,this.isDirty=!1,this.goalTarget=new en.Pa4,this.targetDamperX=new ix,this.targetDamperY=new ix,this.targetDamperZ=new ix,this._currentGLTF=null,this._model=null,this.cancelPendingSourceChange=null,this.animationsByName=new Map,this.currentAnimationAction=null,this.name="ModelScene",this.element=t,this.canvas=e,this.camera=new en.cPb(45,1,.1,100),this.camera.name="MainCamera",this.add(this.target),this.setSize(i,s),this.target.name="Target",this.mixer=new en.Xcj(this.target);let{domElement:n}=this.annotationRenderer,{style:r}=n;r.display="none",r.pointerEvents="none",r.position="absolute",r.top="0",this.element.shadowRoot.querySelector(".default").appendChild(n),this.schemaElement.setAttribute("type","application/ld+json")}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nH=async e=>new Promise((t,i)=>{let s=e.match(/data:(.*);/);if(!s)return i(Error("".concat(e," is not a valid data Url")));let n=s[1],r=atob(e.replace(/data:image\/\w+;base64,/,"")),a=[];for(let e=0;e<r.length;e+=512){let t=r.slice(e,e+512),i=Array(t.length);for(let e=0;e<t.length;e++)i[e]=t.charCodeAt(e);let s=new Uint8Array(i);a.push(s)}t(new Blob(a,{type:n}))});/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nq extends EventTarget{get ongoingActivityCount(){return this.ongoingActivities.size}beginActivity(){let e={progress:0,completed:!1};return this.ongoingActivities.add(e),1===this.ongoingActivityCount&&this.announceTotalProgress(e,0),t=>{let i;return(i=Math.max(eQ(t,0,1),e.progress))!==e.progress&&this.announceTotalProgress(e,i),e.progress}}announceTotalProgress(e,t){let i=0,s=0;for(let n of(1==t&&(e.completed=!0),this.ongoingActivities)){let{progress:e}=n;i+=1-e,!0===n.completed&&s++}let n=e.progress;e.progress=t,this.totalProgress+=(t-n)*(1-this.totalProgress)/i;let r=s===this.ongoingActivityCount?1:this.totalProgress;this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:r}})),s===this.ongoingActivityCount&&(this.totalProgress=0,this.ongoingActivities.clear())}constructor(){super(...arguments),this.ongoingActivities=new Set,this.totalProgress=0}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nK=function(e,t,i,s){var n,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var A=e.length-1;A>=0;A--)(n=e[A])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};let nJ=document.createElement("canvas"),nV=Symbol("fallbackResizeHandler"),nY=Symbol("defaultAriaLabel"),nj=Symbol("resizeObserver"),nz=Symbol("clearModelTimeout"),nW=Symbol("onContextLost"),nX=Symbol("loaded"),nZ=Symbol("status"),n$=Symbol("onFocus"),n0=Symbol("onBlur"),n1=Symbol("updateSize"),n2=Symbol("intersectionObserver"),n3=Symbol("isElementInViewport"),n4=Symbol("announceModelVisibility"),n8=Symbol("ariaLabel"),n5=Symbol("altDefaulted"),n6=Symbol("statusElement"),n9=Symbol("updateStatus"),n7=Symbol("loadedTime"),re=Symbol("updateSource"),rt=Symbol("markLoaded"),ri=Symbol("container"),rs=Symbol("input"),rn=Symbol("canvas"),rr=Symbol("scene"),ra=Symbol("needsRender"),rA=Symbol("tick"),ro=Symbol("onModelLoad"),rl=Symbol("onResize"),rh=Symbol("renderer"),rc=Symbol("progressTracker"),rg=Symbol("getLoaded"),ru=Symbol("getModelIsVisible"),rd=Symbol("shouldAttemptPreload"),rp=e=>({x:e.x,y:e.y,z:e.z,toString(){return"".concat(this.x,"m ").concat(this.y,"m ").concat(this.z,"m")}}),rm=e=>({u:e.x,v:e.y,toString(){return"".concat(this.u," ").concat(this.v)}});class rI extends er.fl{static get is(){return"model-viewer"}static set modelCacheSize(e){t5[t4].evictionThreshold=e}static get modelCacheSize(){return t5[t4].evictionThreshold}static set minimumRenderScale(e){e>1&&console.warn("<model-viewer> minimumRenderScale has been clamped to a maximum value of 1."),e<=0&&console.warn("<model-viewer> minimumRenderScale has been clamped to a minimum value of 0.25."),ss.singleton.minScale=e}static get minimumRenderScale(){return ss.singleton.minScale}get loaded(){return this[rg]()}get[(U=n3,N=nX,G=n7,_=nZ,P=nz,O=nV,H=n4,q=nj,K=n2,J=rc,rh)](){return ss.singleton}get modelIsVisible(){return this[ru]()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),eo?this[nj].observe(this):self.addEventListener("resize",this[nV]),el&&this[n2].observe(this),this.addEventListener("focus",this[n$]),this.addEventListener("blur",this[n0]);let e=this[rh];e.addEventListener("contextlost",this[nW]),e.registerScene(this[rr]),null!=this[nz]&&(self.clearTimeout(this[nz]),this[nz]=null,this.requestUpdate("src",null))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),eo?this[nj].unobserve(this):self.removeEventListener("resize",this[nV]),el&&this[n2].unobserve(this),this.removeEventListener("focus",this[n$]),this.removeEventListener("blur",this[n0]);let e=this[rh];e.removeEventListener("contextlost",this[nW]),e.unregisterScene(this[rr]),this[nz]=self.setTimeout(()=>{this[rr].dispose(),this[nz]=null},1e3)}updated(e){super.updated(e),e.has("src")&&(null==this.src?(this[nX]=!1,this[n7]=0,this[rr].reset()):this.src!==this[rr].url&&(this[nX]=!1,this[n7]=0,this[re]())),e.has("alt")&&this[rs].setAttribute("aria-label",this[n8]),e.has("withCredentials")&&(t5.withCredentials=this.withCredentials),e.has("generateSchema")&&(this.generateSchema?this[rr].updateSchema(this.src):this[rr].updateSchema(null))}toDataURL(e,t){return this[rh].displayCanvas(this[rr]).toDataURL(e,t)}async toBlob(e){let t=e?e.mimeType:void 0,i=e?e.qualityArgument:void 0,s=e?e.idealAspect:void 0,{width:n,height:r,idealAspect:a,aspect:A}=this[rr],{dpr:o,scaleFactor:l}=this[rh],h=n*l*o,c=r*l*o,g=0,u=0;!0===s&&(a>A?u=(c-(c=Math.round(h/a)))/2:g=(h-(h=Math.round(c*a)))/2),nJ.width=h,nJ.height=c;try{return new Promise(async(e,s)=>(nJ.getContext("2d").drawImage(this[rh].displayCanvas(this[rr]),g,u,h,c,0,0,h,c),nJ.msToBlob&&(!t||"image/png"===t))?e(nJ.msToBlob()):nJ.toBlob?void nJ.toBlob(t=>{if(!t)return s(Error("Unable to retrieve canvas blob"));e(t)},t,i):e(await nH(nJ.toDataURL(t,i))))}finally{this[n1]({width:n,height:r})}}registerRenderer(e){this[rr].externalRenderer=e}unregisterRenderer(){this[rr].externalRenderer=null}get[n8](){return this[n5]}get[n5](){return null==this.alt||"null"===this.alt?this[nY]:this.alt}[rg](){return this[nX]}[ru](){return this.loaded&&this[n3]}[rd](){return!!this.src&&this[n3]}[n1](e){let{width:t,height:i}=e;this[ri].style.width="".concat(t,"px"),this[ri].style.height="".concat(i,"px"),this[rl]({width:parseFloat(t),height:parseFloat(i)})}[rA](e,t){}[rt](){this[nX]||(this[nX]=!0,this[n7]=performance.now())}[ra](){this[rr].queueRender()}[ro](){}[n9](e){this[nZ]=e;let t=this.getRootNode();null!=t&&t.activeElement===this&&this[n6].textContent!=e&&(this[n6].textContent=e)}[(V=n$,Y=n0,rl)](e){this[rr].setSize(e.width,e.height)}async [(j=nW,re)](){let e=this[rr];if(this.loaded||!this[rd]()||this.src===e.url)return;this.generateSchema&&e.updateSchema(this.src),this[n9]("Loading"),e.stopAnimation();let t=this[rc].beginActivity(),i=this.src;try{let s=e.setSource(i,e=>t(.95*eQ(e,0,1))),n=this[eR]();await Promise.all([s,n]),this[rt](),this[ro](),await new Promise(e=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.dispatchEvent(new CustomEvent("load",{detail:{url:i}})),e()})})})}catch(e){this.dispatchEvent(new CustomEvent("error",{detail:{type:"loadfailure",sourceError:e}}))}finally{t(1)}}constructor(){let e,t;super(),this.alt=null,this.src=null,this.withCredentials=!1,this.generateSchema=!1,this[U]=!1,this[N]=!1,this[G]=0,this[_]="",this[P]=null,this[O]=eB(()=>{let e=this.getBoundingClientRect();this[n1](e)},50),this[H]=eB(e=>{let t=this.modelIsVisible;t!==e&&this.dispatchEvent(new CustomEvent("model-visibility",{detail:{visible:t}}))},0),this[q]=null,this[K]=null,this[J]=new nq,this[V]=()=>{this[n6].textContent=this[nZ]},this[Y]=()=>{this[n6].textContent=""},this[j]=e=>{this.dispatchEvent(new CustomEvent("error",{detail:{type:"webglcontextlost",sourceError:e.sourceEvent}}))},this.attachShadow({mode:"open"});let i=this.shadowRoot;if(eO(i),this[ri]=i.querySelector(".container"),this[rs]=i.querySelector(".userInput"),this[rn]=i.querySelector("canvas"),this[n6]=i.querySelector("#status"),this[nY]=this[rs].getAttribute("aria-label"),this.isConnected){let i=this.getBoundingClientRect();e=i.width,t=i.height}else e=300,t=150;this[rr]=new nO({canvas:this[rn],element:this,width:e,height:t}),Promise.resolve().then(()=>{this[n1](this.getBoundingClientRect())}),eo&&(this[nj]=new ResizeObserver(e=>{if(!this[rh].isPresenting)for(let t of e)t.target===this&&this[n1](t.contentRect)})),el?this[n2]=new IntersectionObserver(e=>{for(let t of e)if(t.target===this){let e=this.modelIsVisible;this[n3]=t.isIntersecting,this[n4](e),this[n3]&&!this.loaded&&this[re]()}},{root:null,rootMargin:"0px",threshold:1e-5}):this[n3]=!0}}nK([(0,es.Cb)({type:String})],rI.prototype,"alt",void 0),nK([(0,es.Cb)({type:String})],rI.prototype,"src",void 0),nK([(0,es.Cb)({type:Boolean,attribute:"with-credentials"})],rI.prototype,"withCredentials",void 0),nK([(0,es.Cb)({type:Boolean,attribute:"generate-schema"})],rI.prototype,"generateSchema",void 0);/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rf=function(e,t,i,s){var n,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var A=e.length-1;A>=0;A--)(n=e[A])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};let rE=Symbol("changeAnimation"),rC=Symbol("paused"),rB={repetitions:1/0,pingpong:!1},rQ=Symbol("hotspotMap"),ry=Symbol("mutationCallback"),rw=Symbol("observer"),rv=Symbol("addHotspot"),rb=Symbol("removeHotspot"),rS=new en.yGw,rx=new en.Vkp;/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var rM={},rR=function(e){return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},rD=function(e){return new Worker(e)};try{URL.revokeObjectURL(rR(""))}catch(e){rR=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)},rD=function(e){return new Worker(e,{type:"module"})}}var rT=Uint8Array,rL=Uint16Array,rF=Uint32Array,rk=new rT([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),rU=new rT([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),rN=new rT([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rG=function(e,t){for(var i=new rL(31),s=0;s<31;++s)i[s]=t+=1<<e[s-1];for(var n=new rF(i[30]),s=1;s<30;++s)for(var r=i[s];r<i[s+1];++r)n[r]=r-i[s]<<5|s;return[i,n]},r_=rG(rk,2),rP=r_[0],rO=r_[1];rP[28]=258,rO[258]=28;for(var rH=rG(rU,0),rq=rH[0],rK=rH[1],rJ=new rL(32768),rV=0;rV<32768;++rV){var rY=(43690&rV)>>>1|(21845&rV)<<1;rY=(61680&(rY=(52428&rY)>>>2|(13107&rY)<<2))>>>4|(3855&rY)<<4,rJ[rV]=((65280&rY)>>>8|(255&rY)<<8)>>>1}for(var rj=function(e,t,i){for(var s,n=e.length,r=0,a=new rL(t);r<n;++r)++a[e[r]-1];var A=new rL(t);for(r=0;r<t;++r)A[r]=A[r-1]+a[r-1]<<1;if(i){s=new rL(1<<t);var o=15-t;for(r=0;r<n;++r)if(e[r])for(var l=r<<4|e[r],h=t-e[r],c=A[e[r]-1]++<<h,g=c|(1<<h)-1;c<=g;++c)s[rJ[c]>>>o]=l}else for(r=0,s=new rL(n);r<n;++r)e[r]&&(s[r]=rJ[A[e[r]-1]++]>>>15-e[r]);return s},rz=new rT(288),rV=0;rV<144;++rV)rz[rV]=8;for(var rV=144;rV<256;++rV)rz[rV]=9;for(var rV=256;rV<280;++rV)rz[rV]=7;for(var rV=280;rV<288;++rV)rz[rV]=8;for(var rW=new rT(32),rV=0;rV<32;++rV)rW[rV]=5;var rX=rj(rz,9,0),rZ=rj(rW,5,0),r$=function(e){for(var t=e[0],i=1;i<e.length;++i)e[i]>t&&(t=e[i]);return t},r0=function(e,t,i){var s=t/8|0;return(e[s]|e[s+1]<<8)>>(7&t)&i},r1=function(e,t){var i=t/8|0;return(e[i]|e[i+1]<<8|e[i+2]<<16)>>(7&t)},r2=function(e){return(e/8|0)+(7&e&&1)},r3=function(e,t,i){(null==t||t<0)&&(t=0),(null==i||i>e.length)&&(i=e.length);var s=new(e instanceof rL?rL:e instanceof rF?rF:rT)(i-t);return s.set(e.subarray(t,i)),s},r4=function(e,t,i){i<<=7&t;var s=t/8|0;e[s]|=i,e[s+1]|=i>>>8},r8=function(e,t,i){i<<=7&t;var s=t/8|0;e[s]|=i,e[s+1]|=i>>>8,e[s+2]|=i>>>16},r5=function(e,t){for(var i=[],s=0;s<e.length;++s)e[s]&&i.push({s:s,f:e[s]});var n=i.length,r=i.slice();if(!n)return[as,0];if(1==n){var a=new rT(i[0].s+1);return a[i[0].s]=1,[a,1]}i.sort(function(e,t){return e.f-t.f}),i.push({s:-1,f:25001});var A=i[0],o=i[1],l=0,h=1,c=2;for(i[0]={s:-1,f:A.f+o.f,l:A,r:o};h!=n-1;)A=i[i[l].f<i[c].f?l++:c++],o=i[l!=h&&i[l].f<i[c].f?l++:c++],i[h++]={s:-1,f:A.f+o.f,l:A,r:o};for(var g=r[0].s,s=1;s<n;++s)r[s].s>g&&(g=r[s].s);var u=new rL(g+1),d=r6(i[h-1],u,0);if(d>t){var s=0,p=0,m=d-t,I=1<<m;for(r.sort(function(e,t){return u[t.s]-u[e.s]||e.f-t.f});s<n;++s){var f=r[s].s;if(u[f]>t)p+=I-(1<<d-u[f]),u[f]=t;else break}for(p>>>=m;p>0;){var E=r[s].s;u[E]<t?p-=1<<t-u[E]++-1:++s}for(;s>=0&&p;--s){var C=r[s].s;u[C]==t&&(--u[C],++p)}d=t}return[new rT(u),d]},r6=function(e,t,i){return -1==e.s?Math.max(r6(e.l,t,i+1),r6(e.r,t,i+1)):t[e.s]=i},r9=function(e){for(var t=e.length;t&&!e[--t];);for(var i=new rL(++t),s=0,n=e[0],r=1,a=function(e){i[s++]=e},A=1;A<=t;++A)if(e[A]==n&&A!=t)++r;else{if(!n&&r>2){for(;r>138;r-=138)a(32754);r>2&&(a(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(a(n),--r;r>6;r-=6)a(8304);r>2&&(a(r-3<<5|8208),r=0)}for(;r--;)a(n);r=1,n=e[A]}return[i.subarray(0,s),t]},r7=function(e,t){for(var i=0,s=0;s<t.length;++s)i+=e[s]*t[s];return i},ae=function(e,t,i){var s=i.length,n=r2(t+2);e[n]=255&s,e[n+1]=s>>>8,e[n+2]=255^e[n],e[n+3]=255^e[n+1];for(var r=0;r<s;++r)e[n+r+4]=i[r];return(n+4+s)*8},at=function(e,t,i,s,n,r,a,A,o,l,h){r4(t,h++,i),++n[256];for(var c,g,u,d,p=r5(n,15),m=p[0],I=p[1],f=r5(r,15),E=f[0],C=f[1],B=r9(m),Q=B[0],y=B[1],w=r9(E),v=w[0],b=w[1],S=new rL(19),x=0;x<Q.length;++x)S[31&Q[x]]++;for(var x=0;x<v.length;++x)S[31&v[x]]++;for(var M=r5(S,7),R=M[0],D=M[1],T=19;T>4&&!R[rN[T-1]];--T);var L=l+5<<3,F=r7(n,rz)+r7(r,rW)+a,k=r7(n,m)+r7(r,E)+a+14+3*T+r7(S,R)+(2*S[16]+3*S[17]+7*S[18]);if(L<=F&&L<=k)return ae(t,h,e.subarray(o,o+l));if(r4(t,h,1+(k<F)),h+=2,k<F){c=rj(m,I,0),g=m,u=rj(E,C,0),d=E;var U=rj(R,D,0);r4(t,h,y-257),r4(t,h+5,b-1),r4(t,h+10,T-4),h+=14;for(var x=0;x<T;++x)r4(t,h+3*x,R[rN[x]]);h+=3*T;for(var N=[Q,v],G=0;G<2;++G)for(var _=N[G],x=0;x<_.length;++x){var P=31&_[x];r4(t,h,U[P]),h+=R[P],P>15&&(r4(t,h,_[x]>>>5&127),h+=_[x]>>>12)}}else c=rX,g=rz,u=rZ,d=rW;for(var x=0;x<A;++x)if(s[x]>255){var P=s[x]>>>18&31;r8(t,h,c[P+257]),h+=g[P+257],P>7&&(r4(t,h,s[x]>>>23&31),h+=rk[P]);var O=31&s[x];r8(t,h,u[O]),h+=d[O],O>3&&(r8(t,h,s[x]>>>5&8191),h+=rU[O])}else r8(t,h,c[s[x]]),h+=g[s[x]];return r8(t,h,c[256]),h+g[256]},ai=new rF([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),as=new rT(0),an=function(e,t,i,s,n,r){var a=e.length,A=new rT(s+a+5*(1+Math.ceil(a/7e3))+n),o=A.subarray(s,A.length-n),l=0;if(!t||a<8)for(var h=0;h<=a;h+=65535){var c=h+65535;c<a?l=ae(o,l,e.subarray(h,c)):(o[h]=r,l=ae(o,l,e.subarray(h,a)))}else{for(var g=ai[t-1],u=g>>>13,d=8191&g,p=(1<<i)-1,m=new rL(32768),I=new rL(p+1),f=Math.ceil(i/3),E=2*f,C=function(t){return(e[t]^e[t+1]<<f^e[t+2]<<E)&p},B=new rF(25e3),Q=new rL(288),y=new rL(32),w=0,v=0,h=0,b=0,S=0,x=0;h<a;++h){var M=C(h),R=32767&h,D=I[M];if(m[R]=D,I[M]=R,S<=h){var T=a-h;if((w>7e3||b>24576)&&T>423){l=at(e,o,0,B,Q,y,v,b,x,h-x,l),b=w=v=0,x=h;for(var L=0;L<286;++L)Q[L]=0;for(var L=0;L<30;++L)y[L]=0}var F=2,k=0,U=d,N=R-D&32767;if(T>2&&M==C(h-N))for(var G=Math.min(u,T)-1,_=Math.min(32767,h),P=Math.min(258,T);N<=_&&--U&&R!=D;){if(e[h+F]==e[h+F-N]){for(var O=0;O<P&&e[h+O]==e[h+O-N];++O);if(O>F){if(F=O,k=N,O>G)break;for(var H=Math.min(N,O-2),q=0,L=0;L<H;++L){var K=h-N+L+32768&32767,J=m[K],V=K-J+32768&32767;V>q&&(q=V,D=K)}}}D=m[R=D],N+=R-D+32768&32767}if(k){B[b++]=268435456|rO[F]<<18|rK[k];var Y=31&rO[F],j=31&rK[k];v+=rk[Y]+rU[j],++Q[257+Y],++y[j],S=h+F,++w}else B[b++]=e[h],++Q[e[h]]}}l=at(e,o,r,B,Q,y,v,b,x,h-x,l),!r&&7&l&&(l=ae(o,l+1,as))}return r3(A,0,s+r2(l)+n)},ar=function(){for(var e=new rF(256),t=0;t<256;++t){for(var i=t,s=9;--s;)i=(1&i&&3988292384)^i>>>1;e[t]=i}return e}(),aa=function(){var e=-1;return{p:function(t){for(var i=e,s=0;s<t.length;++s)i=ar[255&i^t[s]]^i>>>8;e=i},d:function(){return~e}}},aA=function(e,t){var i={};for(var s in e)i[s]=e[s];for(var s in t)i[s]=t[s];return i},ao=function(e,t,i){for(;i;++t)e[t]=i,i>>>=8},al=function(e,t,i,s){for(var n in e){var r=e[n],a=t+n;r instanceof rT?i[a]=[r,s]:Array.isArray(r)?i[a]=[r[0],aA(s,r[1])]:al(r,a+"/",i,s)}},ah="undefined"!=typeof TextEncoder&&new TextEncoder,ac="undefined"!=typeof TextDecoder&&new TextDecoder;try{ac.decode(as,{stream:!0})}catch(e){}function ag(e,t){if(t){for(var i=new rT(e.length),s=0;s<e.length;++s)i[s]=e.charCodeAt(s);return i}if(ah)return ah.encode(e);for(var n=e.length,r=new rT(e.length+(e.length>>1)),a=0,A=function(e){r[a++]=e},s=0;s<n;++s){if(a+5>r.length){var o=new rT(a+8+(n-s<<1));o.set(r),r=o}var l=e.charCodeAt(s);l<128||t?A(l):(l<2048?A(192|l>>6):(l>55295&&l<57344?(A(240|(l=65536+(1047552&l)|1023&e.charCodeAt(++s))>>18),A(128|l>>12&63)):A(224|l>>12),A(128|l>>6&63)),A(128|63&l))}return r3(r,0,a)}var au=function(e){var t=0;if(e)for(var i in e){var s=e[i].length;if(s>65535)throw"extra field too long";t+=s+4}return t},ad=function(e,t,i,s,n,r,a,A){var o=s.length,l=i.extra,h=A&&A.length,c=au(l);ao(e,t,null!=a?33639248:67324752),t+=4,null!=a&&(e[t++]=20,e[t++]=i.os),e[t]=20,t+=2,e[t++]=i.flag<<1|(null==r&&8),e[t++]=n&&8,e[t++]=255&i.compression,e[t++]=i.compression>>8;var g=new Date(null==i.mtime?Date.now():i.mtime),u=g.getFullYear()-1980;if(u<0||u>119)throw"date not in range 1980-2099";if(ao(e,t,u<<25|g.getMonth()+1<<21|g.getDate()<<16|g.getHours()<<11|g.getMinutes()<<5|g.getSeconds()>>>1),t+=4,null!=r&&(ao(e,t,i.crc),ao(e,t+4,r),ao(e,t+8,i.size)),ao(e,t+12,o),ao(e,t+14,c),t+=16,null!=a&&(ao(e,t,h),ao(e,t+6,i.attrs),ao(e,t+10,a),t+=14),e.set(s,t),t+=o,c)for(var d in l){var p=l[d],m=p.length;ao(e,t,+d),ao(e,t+2,m),e.set(p,t+4),t+=4+m}return h&&(e.set(A,t),t+=h),t},ap=function(e,t,i,s,n){ao(e,t,101010256),ao(e,t+8,i),ao(e,t+10,i),ao(e,t+12,s),ao(e,t+16,n)};class am{async parse(e){let t={},i="model.usda";t[i]=null;let s=aI(),n={},r={};for(let a in e.traverseVisible(e=>{if(e.isMesh){let r=e.geometry,a=e.material;if(a.isMeshStandardMaterial){let A="geometries/Geometry_"+r.id+".usd";if(!(A in t)){var i;let e;let s=function(e){let t=function(e){var t;let i=e.attributes,s=i.position.count;return'\n    def Mesh "'.concat("Geometry",'"\n    {\n        int[] faceVertexCounts = [').concat(Array((null!==(t=e).index?t.index.count:t.attributes.position.count)/3).fill(3).join(", "),"]\n        int[] faceVertexIndices = [").concat(function(e){let t=e.index,i=[];if(null!==t)for(let e=0;e<t.count;e++)i.push(t.getX(e));else{let t=e.attributes.position.count;for(let e=0;e<t;e++)i.push(e)}return i.join(", ")}(e),"]\n        normal3f[] normals = [").concat(aC(i.normal,s),'] (\n            interpolation = "vertex"\n        )\n        point3f[] points = [').concat(aC(i.position,s),"]\n        float2[] primvars:st = [").concat(function(e,t){if(void 0===e)return console.warn("USDZExporter: UVs missing."),Array(t).fill("(0, 0)").join(", ");let i=[];for(let t=0;t<e.count;t++){let s=e.getX(t),n=e.getY(t);i.push("(".concat(s.toPrecision(7),", ").concat(1-n.toPrecision(7),")"))}return i.join(", ")}(i.uv,s),'] (\n            interpolation = "vertex"\n        )\n        uniform token subdivisionScheme = "none"\n    }\n')}(e);return'\ndef "Geometry"\n{\n  '.concat(t,"\n}\n")}(r);t[A]=(i=s,ag(aI()+i))}a.uuid in n||(n[a.uuid]=a),s+=function(e,t,i){let s="Object_"+e.id,n=af(e.matrixWorld);return 0>e.matrixWorld.determinant()&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",e),'def Xform "'.concat(s,'" (\n    prepend references = @./geometries/Geometry_').concat(t.id,".usd@</Geometry>\n)\n{\n    matrix4d xformOp:transform = ").concat(n,'\n    uniform token[] xformOpOrder = ["xformOp:transform"]\n\n    rel material:binding = </Materials/Material_').concat(i.id,">\n}\n\n")}(e,r,a)}else console.warn("THREE.USDZExporter: Unsupported material type (USDZ only supports MeshStandardMaterial)",e)}else e.isCamera&&(s+=function(e){let t=e.name?e.name:"Camera_"+e.id,i=af(e.matrixWorld);return(0>e.matrixWorld.determinant()&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",e),e.isOrthographicCamera)?'def Camera "'.concat(t,'"\n		{\n			matrix4d xformOp:transform = ').concat(i,'\n			uniform token[] xformOpOrder = ["xformOp:transform"]\n	\n			float2 clippingRange = (').concat(e.near,", ").concat(e.far,")\n			float horizontalAperture = ").concat((Math.abs(e.left)+Math.abs(e.right))*10,"\n			float verticalAperture = ").concat((Math.abs(e.top)+Math.abs(e.bottom))*10,'\n			token projection = "orthographic"\n		}\n	\n	'):'def Camera "'.concat(t,'"\n		{\n			matrix4d xformOp:transform = ').concat(i,'\n			uniform token[] xformOpOrder = ["xformOp:transform"]\n	\n			float2 clippingRange = (').concat(e.near,", ").concat(e.far,")\n			float focalLength = ").concat(e.getFocalLength(),"\n			float focusDistance = ").concat(e.focus,"\n			float horizontalAperture = ").concat(e.getFilmWidth(),'\n			token projection = "perspective"\n			float verticalAperture = ').concat(e.getFilmHeight(),"\n		}\n	\n	")}(e))}),s+=function(e,t){let i=[];for(let s in e){let n=e[s];i.push(function(e,t){let i="            ",s=[],n=[];function r(i,s,n){let r=i.id+(n?"_"+n.getHexString():""),a=1023===i.format;return t[r]=i,'\n        def Shader "Transform2d_'.concat(s,'" (\n            sdrMetadata = {\n                string role = "math"\n            }\n        )\n        {\n            uniform token info:id = "UsdTransform2d"\n            float2 inputs:in.connect = </Materials/Material_').concat(e.id,"/uvReader_st.outputs:result>\n            float2 inputs:scale = ").concat(aQ(i.repeat),"\n            float2 inputs:translation = ").concat(aQ(i.offset),'\n            float2 outputs:result\n        }\n\n        def Shader "Texture_').concat(i.id,"_").concat(s,'"\n        {\n            uniform token info:id = "UsdUVTexture"\n            asset inputs:file = @textures/Texture_').concat(r,".").concat(a?"png":"jpg","@\n            float2 inputs:st.connect = </Materials/Material_").concat(e.id,"/Transform2d_").concat(s,'.outputs:result>\n            token inputs:wrapS = "repeat"\n            token inputs:wrapT = "repeat"\n            float outputs:r\n            float outputs:g\n            float outputs:b\n            float3 outputs:rgb\n            ').concat(e.transparent||e.alphaTest>0?"float outputs:a":"","\n        }")}return e.side===en.ehD&&console.warn("THREE.USDZExporter: USDZ does not support double sided materials",e),null!==e.map?(s.push("".concat(i,"color3f inputs:diffuseColor.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.map.id,"_diffuse.outputs:rgb>")),e.transparent?s.push("".concat(i,"float inputs:opacity.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.map.id,"_diffuse.outputs:a>")):e.alphaTest>0&&(s.push("".concat(i,"float inputs:opacity.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.map.id,"_diffuse.outputs:a>")),s.push("".concat(i,"float inputs:opacityThreshold = ").concat(e.alphaTest))),n.push(r(e.map,"diffuse",e.color))):s.push("".concat(i,"color3f inputs:diffuseColor = ").concat(aB(e.color))),null!==e.emissiveMap?(s.push("".concat(i,"color3f inputs:emissiveColor.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.emissiveMap.id,"_emissive.outputs:rgb>")),n.push(r(e.emissiveMap,"emissive"))):e.emissive.getHex()>0&&s.push("".concat(i,"color3f inputs:emissiveColor = ").concat(aB(e.emissive))),null!==e.normalMap&&(s.push("".concat(i,"normal3f inputs:normal.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.normalMap.id,"_normal.outputs:rgb>")),n.push(r(e.normalMap,"normal"))),null!==e.aoMap&&(s.push("".concat(i,"float inputs:occlusion.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.aoMap.id,"_occlusion.outputs:r>")),n.push(r(e.aoMap,"occlusion"))),null!==e.roughnessMap&&1===e.roughness?(s.push("".concat(i,"float inputs:roughness.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.roughnessMap.id,"_roughness.outputs:g>")),n.push(r(e.roughnessMap,"roughness"))):s.push("".concat(i,"float inputs:roughness = ").concat(e.roughness)),null!==e.metalnessMap&&1===e.metalness?(s.push("".concat(i,"float inputs:metallic.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.metalnessMap.id,"_metallic.outputs:b>")),n.push(r(e.metalnessMap,"metallic"))):s.push("".concat(i,"float inputs:metallic = ").concat(e.metalness)),null!==e.alphaMap?(s.push("".concat(i,"float inputs:opacity.connect = </Materials/Material_").concat(e.id,"/Texture_").concat(e.alphaMap.id,"_opacity.outputs:r>")),s.push("".concat(i,"float inputs:opacityThreshold = 0.0001")),n.push(r(e.alphaMap,"opacity"))):s.push("".concat(i,"float inputs:opacity = ").concat(e.opacity)),e.isMeshPhysicalMaterial&&(s.push("".concat(i,"float inputs:clearcoat = ").concat(e.clearcoat)),s.push("".concat(i,"float inputs:clearcoatRoughness = ").concat(e.clearcoatRoughness)),s.push("".concat(i,"float inputs:ior = ").concat(e.ior))),'\n    def Material "Material_'.concat(e.id,'"\n    {\n        def Shader "PreviewSurface"\n        {\n            uniform token info:id = "UsdPreviewSurface"\n').concat(s.join("\n"),"\n            int inputs:useSpecularWorkflow = 0\n            token outputs:surface\n        }\n\n        token outputs:surface.connect = </Materials/Material_").concat(e.id,'/PreviewSurface.outputs:surface>\n        token inputs:frame:stPrimvarName = "st"\n\n        def Shader "uvReader_st"\n        {\n            uniform token info:id = "UsdPrimvarReader_float2"\n            token inputs:varname.connect = </Materials/Material_').concat(e.id,".inputs:frame:stPrimvarName>\n            float2 inputs:fallback = (0.0, 0.0)\n            float2 outputs:result\n        }\n\n").concat(n.join("\n"),"\n\n    }\n")}(n,t))}return'def "Materials"\n{\n'.concat(i.join(""),"\n}\n\n")}(n,r),t[i]=ag(s),s=null,r){let e=r[a],i=a.split("_")[1],s=1023===e.format,n=function(e,t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){let i=1024/Math.max(e.width,e.height),s=document.createElement("canvas");s.width=e.width*Math.min(1,i),s.height=e.height*Math.min(1,i);let n=s.getContext("2d");if(n.drawImage(e,0,0,s.width,s.height),void 0!==t){let e=parseInt(t,16),i=(e>>16&255)/255,r=(e>>8&255)/255,a=(255&e)/255,A=n.getImageData(0,0,s.width,s.height),o=A.data;for(let e=0;e<o.length;e+=4)o[e+0]=o[e+0]*i,o[e+1]=o[e+1]*r,o[e+2]=o[e+2]*a;n.putImageData(A,0,0)}return s}}(e.image,i),A=await new Promise(e=>n.toBlob(e,s?"image/png":"image/jpeg",1));t["textures/Texture_".concat(a,".").concat(s?"png":"jpg")]=new Uint8Array(await A.arrayBuffer())}let a=0;for(let e in t){let i=t[e],s=63&(a+=34+e.length);if(4!==s){let n=64-s,r=new Uint8Array(n);t[e]=[i,{extra:{12345:r}}]}a=i.length}return function(e,t){t||(t={});var i={},s=[];al(e,"",i,t);var n=0,r=0;for(var a in i){var A=i[a],o=A[0],l=A[1],h=0==l.level?0:8,c=ag(a),g=c.length,u=l.comment,d=u&&ag(u),p=d&&d.length,m=au(l.extra);if(g>65535)throw"filename too long";var I=h?function(e,t){var i;return an(e,null==(i=t||{}).level?6:i.level,null==i.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+i.mem,0,0,!0)}(o,l):o,f=I.length,E=aa();E.p(o),s.push(aA(l,{size:o.length,crc:E.d(),c:I,f:c,m:d,u:g!=a.length||d&&u.length!=p,o:n,compression:h})),n+=30+g+m+f,r+=76+2*(g+m)+(p||0)+f}for(var C=new rT(r+22),B=n,Q=r-n,y=0;y<s.length;++y){var c=s[y];ad(C,c.o,c,c.f,c.u,c.c.length);var w=30+c.f.length+au(c.extra);C.set(c.c,c.o+w),ad(C,n,c,c.f,c.u,c.c.length,c.o,c.m),n+=16+w+(c.m?c.m.length:0)}return ap(C,n,s.length,Q,B),C}(t,{level:0})}}function aI(){return'#usda 1.0\n(\n    customLayerData = {\n        string creator = "Three.js USDZExporter"\n    }\n    metersPerUnit = 1\n    upAxis = "Y"\n)\n\n'}function af(e){let t=e.elements;return"( ".concat(aE(t,0),", ").concat(aE(t,4),", ").concat(aE(t,8),", ").concat(aE(t,12)," )")}function aE(e,t){return"(".concat(e[t+0],", ").concat(e[t+1],", ").concat(e[t+2],", ").concat(e[t+3],")")}function aC(e,t){if(void 0===e)return console.warn("USDZExporter: Normals missing."),Array(t).fill("(0, 0, 0)").join(", ");let i=[];for(let t=0;t<e.count;t++){let s=e.getX(t),n=e.getY(t),r=e.getZ(t);i.push("(".concat(s.toPrecision(7),", ").concat(n.toPrecision(7),", ").concat(r.toPrecision(7),")"))}return i.join(", ")}function aB(e){return"(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")}function aQ(e){return"(".concat(e.x,", ").concat(e.y,")")}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ay=function(e,t,i,s){var n,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var A=e.length-1;A>=0;A--)(n=e[A])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};let aw=!1,av=!1,ab="#model-viewer-no-ar-fallback",aS=(d=["quick-look","scene-viewer","webxr","none"],e=>{try{let t=nf(e),i=(t.length?t[0].terms:[]).filter(e=>e&&"ident"===e.type).map(e=>e.value).filter(e=>d.indexOf(e)>-1),s=new Set;for(let e of i)s.add(e);return s}catch(e){}return new Set}),ax={QUICK_LOOK:"quick-look",SCENE_VIEWER:"scene-viewer",WEBXR:"webxr",NONE:"none"},aM=Symbol("arButtonContainer"),aR=Symbol("enterARWithWebXR"),aD=Symbol("openSceneViewer"),aT=Symbol("openIOSARQuickLook"),aL=Symbol("canActivateAR"),aF=Symbol("arMode"),ak=Symbol("arModes"),aU=Symbol("arAnchor"),aN=Symbol("preload"),aG=Symbol("onARButtonContainerClick"),a_=Symbol("onARStatus"),aP=Symbol("onARTracking"),aO=Symbol("onARTap"),aH=Symbol("selectARMode"),aq=Symbol("triggerLoad"),aK=Symbol("evaluate"),aJ=Symbol("lastValue");class aV{static evaluatableFor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nb;if(e instanceof aV)return e;if("number"===e.type)return"%"===e.unit?new az(e,t):e;switch(e.name.value){case"calc":return new a0(e,t);case"env":return new aX(e)}return nb}static evaluate(e){return e instanceof aV?e.evaluate():e}static isConstant(e){return!(e instanceof aV)||e.isConstant}static applyIntrinsics(e,t){let{basis:i,keywords:s}=t,{auto:n}=s;return i.map((t,i)=>{let r=null==n[i]?t:n[i],a=e[i]?e[i]:r;if("ident"===a.type){let e=a.value;e in s&&(a=s[e][i])}return((null==a||"ident"===a.type)&&(a=r),"%"===a.unit)?nI(a.number/100*t.number,t.unit):(a=nM(a,t)).unit!==t.unit?t:a})}get isConstant(){return!1}evaluate(){return this.isConstant&&null!=this[aJ]||(this[aJ]=this[aK]()),this[aJ]}constructor(){this[z]=null}}z=aJ;let aY=Symbol("percentage"),aj=Symbol("basis");class az extends aV{get isConstant(){return!0}[aK](){return nI(this[aY].number/100*this[aj].number,this[aj].unit)}constructor(e,t){super(),this[aY]=e,this[aj]=t}}let aW=Symbol("identNode");class aX extends aV{get isConstant(){return!1}[(W=aW,aK)](){return null!=this[aW]&&"window-scroll-y"===this[aW].value?{type:"number",number:window.pageYOffset/(Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)-window.innerHeight)||0,unit:null}:nb}constructor(e){super(),this[W]=null;let t=e.arguments.length?e.arguments[0].terms[0]:null;null!=t&&"ident"===t.type&&(this[aW]=t)}}let aZ=/[\*\/]/,a$=Symbol("evaluator");class a0 extends aV{get isConstant(){return null==this[a$]||aV.isConstant(this[a$])}[(X=a$,aK)](){return null!=this[a$]?aV.evaluate(this[a$]):nb}constructor(e,t=nb){if(super(),this[X]=null,1!==e.arguments.length)return;let i=e.arguments[0].terms.slice(),s=[];for(;i.length;){let e=i.shift();if(s.length>0){let i=s[s.length-1];if("operator"===i.type&&aZ.test(i.value)){let i=s.pop(),n=s.pop();if(null==n)return;s.push(new a4(i,aV.evaluatableFor(n,t),aV.evaluatableFor(e,t)));continue}}s.push("operator"===e.type?e:aV.evaluatableFor(e,t))}for(;s.length>2;){let[e,i,n]=s.splice(0,3);if("operator"!==i.type)return;s.unshift(new a4(i,aV.evaluatableFor(e,t),aV.evaluatableFor(n,t)))}1===s.length&&(this[a$]=s[0])}}let a1=Symbol("operator"),a2=Symbol("left"),a3=Symbol("right");class a4 extends aV{get isConstant(){return aV.isConstant(this[a2])&&aV.isConstant(this[a3])}[aK](){let e;let t=nM(aV.evaluate(this[a2])),i=nM(aV.evaluate(this[a3])),{number:s,unit:n}=t,{number:r,unit:a}=i;if(null!=a&&null!=n&&a!=n)return nb;switch(this[a1].value){case"+":e=s+r;break;case"-":e=s-r;break;case"/":e=s/r;break;case"*":e=s*r;break;default:return nb}return{type:"number",number:e,unit:n||a}}constructor(e,t,i){super(),this[a1]=e,this[a2]=t,this[a3]=i}}let a8=Symbol("evaluatables"),a5=Symbol("intrinsics");class a6 extends aV{get isConstant(){for(let e of this[a8])if(!aV.isConstant(e))return!1;return!0}[aK](){let e=this[a8].map(e=>aV.evaluate(e));return aV.applyIntrinsics(e,this[a5]).map(e=>e.number)}constructor(e,t){super(),this[a5]=t;let i=e[0],s=null!=i?i.terms:[];this[a8]=t.basis.map((e,t)=>{let i=s[t];return null==i?{type:"ident",value:"auto"}:"ident"===i.type?i:aV.evaluatableFor(i,e)})}}let a9=Symbol("instances"),a7=Symbol("activateListener"),Ae=Symbol("deactivateListener"),At=Symbol("notifyInstances"),Ai=Symbol("notify"),As=Symbol("callback");class An{static[At](){for(let e of An[a9])e[Ai]()}static[(Z=a9,a7)](){window.addEventListener("scroll",this[At],{passive:!0})}static[Ae](){window.removeEventListener("scroll",this[At])}observe(){0===An[a9].size&&An[a7](),An[a9].add(this)}disconnect(){An[a9].delete(this),0===An[a9].size&&An[Ae]()}[Ai](){this[As]()}constructor(e){this[As]=e}}An[Z]=new Set;let Ar=Symbol("computeStyleCallback"),Aa=Symbol("astWalker"),AA=Symbol("dependencies"),Ao=Symbol("onScroll");class Al{observeEffectsFor(e){let t={},i=this[AA];for(let s in this[Aa].walk(e,e=>{let{name:s}=e,n=e.arguments[0].terms[0];if("env"===s.value&&null!=n&&"ident"===n.type&&"window-scroll-y"===n.value&&null==t["window-scroll"]){let e="window-scroll"in i?i["window-scroll"]:new An(this[Ao]);e.observe(),delete i["window-scroll"],t["window-scroll"]=e}}),i)i[s].disconnect();this[AA]=t}dispose(){for(let e in this[AA])this[AA][e].disconnect()}constructor(e){this[$]={},this[ee]=new nv(["function"]),this[et]=()=>{this[Ar]({relatedState:"window-scroll"})},this[Ar]=e}}$=AA,ee=Aa,et=Ao;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ah=e=>{let t=e.observeEffects||!1,i=e.intrinsics instanceof Function?e.intrinsics:()=>e.intrinsics;return(s,n)=>{let r=s.updated,a=s.connectedCallback,A=s.disconnectedCallback,o=Symbol("".concat(n,"StyleEffector")),l=Symbol("".concat(n,"StyleEvaluator")),h=Symbol("".concat(n,"UpdateEvaluator")),c=Symbol("".concat(n,"EvaluateAndSync"));Object.defineProperties(s,{[o]:{value:null,writable:!0},[l]:{value:null,writable:!0},[h]:{value:function(){let e=nf(this[n]);this[l]=new a6(e,i(this)),null==this[o]&&t&&(this[o]=new Al(()=>this[c]())),null!=this[o]&&this[o].observeEffectsFor(e)}},[c]:{value:function(){if(null==this[l])return;let t=this[l].evaluate();this[e.updateHandler](t)}},updated:{value:function(e){e.has(n)&&(this[h](),this[c]()),r.call(this,e)}},connectedCallback:{value:function(){a.call(this),this.requestUpdate(n,this[n])}},disconnectedCallback:{value:function(){A.call(this),null!=this[o]&&(this[o].dispose(),this[o]=null)}}})}},Ac=new en.FM8,Ag=new en.Pa4,Au=Object.freeze({minimumRadius:0,maximumRadius:1/0,minimumPolarAngle:Math.PI/8,maximumPolarAngle:Math.PI-Math.PI/8,minimumAzimuthalAngle:-1/0,maximumAzimuthalAngle:1/0,minimumFieldOfView:10,maximumFieldOfView:45,touchAction:"none"}),Ad=Math.PI/8,Ap={USER_INTERACTION:"user-interaction",NONE:"none",AUTOMATIC:"automatic"};class Am extends en.pBf{get interactionEnabled(){return this._interactionEnabled}enableInteraction(){if(!1===this._interactionEnabled){let{element:e}=this;e.addEventListener("pointerdown",this.onPointerDown),e.addEventListener("pointercancel",this.onPointerUp),this._disableZoom||e.addEventListener("wheel",this.onWheel),e.addEventListener("keydown",this.onKeyDown),e.addEventListener("touchmove",()=>{},{passive:!1}),e.addEventListener("contextmenu",this.onContext),this.element.style.cursor="grab",this._interactionEnabled=!0,this.updateTouchActionStyle()}}disableInteraction(){if(!0===this._interactionEnabled){let{element:e}=this;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),e.removeEventListener("pointercancel",this.onPointerUp),e.removeEventListener("wheel",this.onWheel),e.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("contextmenu",this.onContext),e.style.cursor="",this.touchMode=null,this._interactionEnabled=!1,this.updateTouchActionStyle()}}get options(){return this._options}set disableZoom(e){this._disableZoom!=e&&(this._disableZoom=e,!0===e?this.element.removeEventListener("wheel",this.onWheel):this.element.addEventListener("wheel",this.onWheel),this.updateTouchActionStyle())}getCameraSpherical(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new en.$V;return e.copy(this.spherical)}getFieldOfView(){return this.camera.fov}applyOptions(e){Object.assign(this._options,e),this.setOrbit(),this.setFieldOfView(Math.exp(this.goalLogFov))}updateNearFar(e,t){this.camera.near=Math.max(e,t/1e3),this.camera.far=t,this.camera.updateProjectionMatrix()}updateAspect(e){this.camera.aspect=e,this.camera.updateProjectionMatrix()}setOrbit(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.goalSpherical.theta,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.goalSpherical.phi,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.goalSpherical.radius,{minimumAzimuthalAngle:s,maximumAzimuthalAngle:n,minimumPolarAngle:r,maximumPolarAngle:a,minimumRadius:A,maximumRadius:o}=this._options,{theta:l,phi:h,radius:c}=this.goalSpherical,g=eQ(e,s,n);isFinite(s)||isFinite(n)||(this.spherical.theta=this.wrapAngle(this.spherical.theta-g)+g);let u=eQ(t,r,a),d=eQ(i,A,o);return(g!==l||u!==h||d!==c)&&(this.goalSpherical.theta=g,this.goalSpherical.phi=u,this.goalSpherical.radius=d,this.goalSpherical.makeSafe(),!0)}setRadius(e){this.goalSpherical.radius=e,this.setOrbit()}setFieldOfView(e){let{minimumFieldOfView:t,maximumFieldOfView:i}=this._options;e=eQ(e,t,i),this.goalLogFov=Math.log(e)}setDamperDecayTime(e){this.thetaDamper.setDecayTime(e),this.phiDamper.setDecayTime(e),this.radiusDamper.setDecayTime(e),this.fovDamper.setDecayTime(e)}adjustOrbit(e,t,i){let{theta:s,phi:n,radius:r}=this.goalSpherical,{minimumRadius:a,maximumRadius:A,minimumFieldOfView:o,maximumFieldOfView:l}=this._options,h=this.spherical.theta-s,c=Math.PI-.001,g=s-eQ(e,-c-h,c-h),u=0===i?0:((i>0?A:a)-r)/(Math.log(i>0?l:o)-this.goalLogFov),d=r+i*(isFinite(u)?u:(A-a)*2);if(this.setOrbit(g,n-t,d),0!==i){let e=this.goalLogFov+i;this.setFieldOfView(Math.exp(e))}}jumpToGoal(){this.update(0,1e4)}update(e,t){if(this.isStationary())return;let{maximumPolarAngle:i,maximumRadius:s}=this._options,n=this.spherical.theta-this.goalSpherical.theta;!(Math.abs(n)>Math.PI)||isFinite(this._options.minimumAzimuthalAngle)||isFinite(this._options.maximumAzimuthalAngle)||(this.spherical.theta-=2*Math.sign(n)*Math.PI),this.spherical.theta=this.thetaDamper.update(this.spherical.theta,this.goalSpherical.theta,t,Math.PI),this.spherical.phi=this.phiDamper.update(this.spherical.phi,this.goalSpherical.phi,t,i),this.spherical.radius=this.radiusDamper.update(this.spherical.radius,this.goalSpherical.radius,t,s),this.logFov=this.fovDamper.update(this.logFov,this.goalLogFov,t,1),this.moveCamera()}updateTouchActionStyle(){let{style:e}=this.element;if(this._interactionEnabled){let{touchAction:t}=this._options;this._disableZoom&&"none"!==t?e.touchAction="manipulation":e.touchAction=t}else e.touchAction=""}isStationary(){return this.goalSpherical.theta===this.spherical.theta&&this.goalSpherical.phi===this.spherical.phi&&this.goalSpherical.radius===this.spherical.radius&&this.goalLogFov===this.logFov}dispatchChange(){this.dispatchEvent({type:"change",source:this.changeSource})}moveCamera(){this.spherical.makeSafe(),this.camera.position.setFromSpherical(this.spherical),this.camera.setRotationFromEuler(new en.USm(this.spherical.phi-Math.PI/2,this.spherical.theta,0,"YXZ")),this.camera.fov!==Math.exp(this.logFov)&&(this.camera.fov=Math.exp(this.logFov),this.camera.updateProjectionMatrix()),this.dispatchChange()}userAdjustOrbit(e,t,i){this.adjustOrbit(e*this.orbitSensitivity*this.inputSensitivity,t*this.orbitSensitivity*this.inputSensitivity,i*this.inputSensitivity),this.dispatchChange()}wrapAngle(e){let t=(e+Math.PI)/(2*Math.PI);return 2*(t-Math.floor(t))*Math.PI-Math.PI}pixelLengthToSphericalAngle(e){return 2*Math.PI*e/this.element.clientHeight}twoTouchDistance(e,t){let{clientX:i,clientY:s}=e,{clientX:n,clientY:r}=t,a=n-i,A=r-s;return Math.sqrt(a*a+A*A)}handleSinglePointerMove(e,t){let i=this.pixelLengthToSphericalAngle(e),s=this.pixelLengthToSphericalAngle(t);!1===this.isUserPointing&&(this.isUserPointing=!0,this.dispatchEvent({type:"pointer-change-start"})),this.userAdjustOrbit(i,s,0)}initializePan(){let{theta:e,phi:t}=this.spherical,i=e-this.scene.yaw;this.panPerPixel=.018/this.scene.height,this.panProjection.set(-Math.cos(i),-Math.cos(t)*Math.sin(i),0,0,Math.sin(t),0,Math.sin(i),-Math.cos(t)*Math.cos(i),0)}movePan(e,t){let{scene:i}=this,s=Ag.set(e,t,0).multiplyScalar(this.inputSensitivity),n=this.spherical.radius*Math.exp(this.logFov)*this.panPerPixel;s.multiplyScalar(n);let r=i.getTarget();r.add(s.applyMatrix3(this.panProjection)),i.boundingSphere.clampPoint(r,r),i.setTarget(r.x,r.y,r.z),this.dispatchChange()}recenter(e){if(performance.now()>this.startTime+300||Math.abs(e.clientX-this.startPointerPosition.clientX)>2||Math.abs(e.clientY-this.startPointerPosition.clientY)>2)return;let{scene:t}=this,i=t.positionAndNormalFromPoint(t.getNDC(e.clientX,e.clientY));if(null==i){let{cameraTarget:e}=t.element;t.element.cameraTarget="",t.element.cameraTarget=e,this.userAdjustOrbit(0,0,1)}else t.target.worldToLocal(i.position),t.setTarget(i.position.x,i.position.y,i.position.z)}resetRadius(){let{scene:e}=this,t=e.positionAndNormalFromPoint(Ac.set(0,0));if(null==t)return;e.target.worldToLocal(t.position);let i=e.getTarget(),{theta:s,phi:n}=this.spherical,r=s-e.yaw,a=Ag.set(Math.sin(n)*Math.sin(r),Math.cos(n),Math.sin(n)*Math.cos(r)),A=a.dot(t.position.sub(i));i.add(a.multiplyScalar(A)),e.setTarget(i.x,i.y,i.z),this.setOrbit(void 0,void 0,this.goalSpherical.radius-A)}onTouchChange(e){if(1===this.pointers.length)this.touchMode=this.touchModeRotate;else{if(this._disableZoom){this.touchMode=null,this.element.removeEventListener("touchmove",this.disableScroll);return}this.touchMode=this.touchDecided&&null===this.touchMode?null:this.touchModeZoom,this.touchDecided=!0,this.element.addEventListener("touchmove",this.disableScroll,{passive:!1}),this.lastSeparation=this.twoTouchDistance(this.pointers[0],this.pointers[1]),this.enablePan&&null!=this.touchMode&&(this.initializePan(),e.altKey||(this.scene.element[AP].style.opacity=1))}}onMouseDown(e){this.panPerPixel=0,this.enablePan&&(2===e.button||e.ctrlKey||e.metaKey||e.shiftKey)&&(this.initializePan(),this.scene.element[AP].style.opacity=1),this.element.style.cursor="grabbing"}orbitZoomKeyCodeHandler(e){let t=!0;switch(e.key){case"PageUp":this.userAdjustOrbit(0,0,.04);break;case"PageDown":this.userAdjustOrbit(0,0,-.04);break;case"ArrowUp":this.userAdjustOrbit(0,-Ad,0);break;case"ArrowDown":this.userAdjustOrbit(0,Ad,0);break;case"ArrowLeft":this.userAdjustOrbit(-Ad,0,0);break;case"ArrowRight":this.userAdjustOrbit(Ad,0,0);break;default:t=!1}return t}panKeyCodeHandler(e){this.initializePan();let t=!0;switch(e.key){case"ArrowUp":this.movePan(0,-10);break;case"ArrowDown":this.movePan(0,10);break;case"ArrowLeft":this.movePan(-10,0);break;case"ArrowRight":this.movePan(10,0);break;default:t=!1}return t}constructor(e,t,i){super(),this.camera=e,this.element=t,this.scene=i,this.orbitSensitivity=1,this.inputSensitivity=1,this.changeSource=Ap.NONE,this._interactionEnabled=!1,this._disableZoom=!1,this.isUserPointing=!1,this.enablePan=!0,this.enableTap=!0,this.panProjection=new en.Vkp,this.panPerPixel=0,this.spherical=new en.$V,this.goalSpherical=new en.$V,this.thetaDamper=new ix,this.phiDamper=new ix,this.radiusDamper=new ix,this.logFov=Math.log(Au.maximumFieldOfView),this.goalLogFov=this.logFov,this.fovDamper=new ix,this.touchMode=null,this.pointers=[],this.startTime=0,this.startPointerPosition={clientX:0,clientY:0},this.lastSeparation=0,this.touchDecided=!1,this.onContext=e=>{if(this.enablePan)e.preventDefault();else for(let e of this.pointers)this.onPointerUp(new PointerEvent("pointercancel",Object.assign(Object.assign({},this.startPointerPosition),{pointerId:e.id})))},this.touchModeZoom=(e,t)=>{if(!this._disableZoom){let e=this.twoTouchDistance(this.pointers[0],this.pointers[1]),t=.04*(this.lastSeparation-e)*50/this.scene.height;this.lastSeparation=e,this.userAdjustOrbit(0,0,t)}this.panPerPixel>0&&this.movePan(e,t)},this.disableScroll=e=>{e.preventDefault()},this.touchModeRotate=(e,t)=>{let{touchAction:i}=this._options;if(!this.touchDecided&&"none"!==i){this.touchDecided=!0;let s=Math.abs(e),n=Math.abs(t);if(this.changeSource===Ap.USER_INTERACTION&&("pan-y"===i&&n>s||"pan-x"===i&&s>n)){this.touchMode=null;return}this.element.addEventListener("touchmove",this.disableScroll,{passive:!1})}this.handleSinglePointerMove(e,t)},this.onPointerDown=e=>{if(this.pointers.length>2)return;let{element:t}=this;0===this.pointers.length&&(t.addEventListener("pointermove",this.onPointerMove),t.addEventListener("pointerup",this.onPointerUp),this.touchMode=null,this.touchDecided=!1,this.startPointerPosition.clientX=e.clientX,this.startPointerPosition.clientY=e.clientY,this.startTime=performance.now());try{t.setPointerCapture(e.pointerId)}catch(e){}this.pointers.push({clientX:e.clientX,clientY:e.clientY,id:e.pointerId}),this.isUserPointing=!1,"touch"===e.pointerType?(this.changeSource=e.altKey?Ap.AUTOMATIC:Ap.USER_INTERACTION,this.onTouchChange(e)):(this.changeSource=Ap.USER_INTERACTION,this.onMouseDown(e))},this.onPointerMove=e=>{let t=this.pointers.find(t=>t.id===e.pointerId);if(null==t)return;let i=this.pointers.length,s=(e.clientX-t.clientX)/i,n=(e.clientY-t.clientY)/i;(0!==s||0!==n)&&(t.clientX=e.clientX,t.clientY=e.clientY,"touch"===e.pointerType?(this.changeSource=e.altKey?Ap.AUTOMATIC:Ap.USER_INTERACTION,null!==this.touchMode&&this.touchMode(s,n)):(this.changeSource=Ap.USER_INTERACTION,this.panPerPixel>0?this.movePan(s,n):this.handleSinglePointerMove(s,n)))},this.onPointerUp=e=>{let{element:t}=this,i=this.pointers.findIndex(t=>t.id===e.pointerId);-1!==i&&this.pointers.splice(i,1),this.panPerPixel>0&&!e.altKey&&this.resetRadius(),0===this.pointers.length?(t.removeEventListener("pointermove",this.onPointerMove),t.removeEventListener("pointerup",this.onPointerUp),t.removeEventListener("touchmove",this.disableScroll),this.enablePan&&this.enableTap&&this.recenter(e)):null!==this.touchMode&&this.onTouchChange(e),this.scene.element[AP].style.opacity=0,t.style.cursor="grab",this.panPerPixel=0,this.isUserPointing&&this.dispatchEvent({type:"pointer-change-end"})},this.onWheel=e=>{this.changeSource=Ap.USER_INTERACTION;let t=e.deltaY*(1==e.deltaMode?18:1)*.04/30;this.userAdjustOrbit(0,0,t),e.preventDefault()},this.onKeyDown=e=>{let{changeSource:t}=this;this.changeSource=Ap.USER_INTERACTION,(e.shiftKey&&this.enablePan?this.panKeyCodeHandler(e):this.orbitZoomKeyCodeHandler(e))?e.preventDefault():this.changeSource=t},this._options=Object.assign({},Au),this.setOrbit(0,Math.PI/2,1),this.setFieldOfView(100),this.jumpToGoal()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AI=e=>e<.5?2*e*e:-1+(4-2*e)*e,Af=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:AI;return s=>e+(t-e)*i(s)},AE=(e,t)=>{var i;let s=t.map((i=0,e=>i+=e));return t=>{t=eQ(t,0,1)*s[s.length-1];let i=s.findIndex(e=>e>=t),n=i<1?0:s[i-1],r=s[i];return e[i]((t-n)/(r-n))}},AC=e=>{let t=[],i=[],s=e.initialValue;for(let n=0;n<e.keyframes.length;++n){let r=e.keyframes[n],{value:a,frames:A}=r,o=Af(s,a,r.ease||AI);t.push(o),i.push(A),s=a}return AE(t,i)};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var AB=function(e,t,i,s){var n,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var A=e.length-1;A>=0;A--)(n=e[A])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};let AQ=AC({initialValue:0,keyframes:[{frames:5,value:-1},{frames:1,value:-1},{frames:8,value:1},{frames:1,value:1},{frames:5,value:0},{frames:18,value:0}]}),Ay=AC({initialValue:0,keyframes:[{frames:1,value:1},{frames:5,value:1},{frames:1,value:0},{frames:6,value:0}]}),Aw="0deg 75deg 105%",Av=["front","right","back","left"],Ab=["upper-","","lower-"],AS={AUTO:"auto"},Ax={BASIC:"basic",WIGGLE:"wiggle"},AM=()=>({basis:[nS(nI(30,"deg"))],keywords:{auto:[null]}}),AR=()=>({basis:[nS(nI(12,"deg"))],keywords:{auto:[null]}}),AD=(()=>{let e=nf(Aw)[0].terms,t=nM(e[0]),i=nM(e[1]);return e=>({basis:[t,i,nI(e[rr].idealCameraDistance(),"m")],keywords:{auto:[null,null,nI(105,"%")]}})})(),AT=e=>{let t=2.2*e[rr].boundingSphere.radius;return{basis:[nI(-1/0,"rad"),nI(Math.PI/8,"rad"),nI(t,"m")],keywords:{auto:[null,null,null]}}},AL=e=>{let t=new a6([],AD(e)).evaluate()[2];return{basis:[nI(1/0,"rad"),nI(Math.PI-Math.PI/8,"rad"),nI(t,"m")],keywords:{auto:[null,null,null]}}},AF=e=>{let t=e[rr].boundingBox.getCenter(new en.Pa4);return{basis:[nI(t.x,"m"),nI(t.y,"m"),nI(t.z,"m")],keywords:{auto:[null,null,null]}}},Ak=Math.PI/2,AU=Math.PI/3,AN=Ak/2,AG=2*Math.PI,A_=Symbol("controls"),AP=Symbol("panElement"),AO=Symbol("promptElement"),AH=Symbol("promptAnimatedContainer"),Aq=Symbol("fingerAnimatedContainers"),AK=Symbol("deferInteractionPrompt"),AJ=Symbol("updateAria"),AV=Symbol("updateCameraForRadius"),AY=Symbol("onChange"),Aj=Symbol("onPointerChange"),Az=Symbol("waitingToPromptUser"),AW=Symbol("userHasInteracted"),AX=Symbol("promptElementVisibleTime"),AZ=Symbol("lastPromptOffset"),A$=Symbol("lastSpherical"),A0=Symbol("jumpCamera"),A1=Symbol("initialized"),A2=Symbol("maintainThetaPhi"),A3=Symbol("syncCameraOrbit"),A4=Symbol("syncFieldOfView"),A8=Symbol("syncCameraTarget"),A5=Symbol("syncMinCameraOrbit"),A6=Symbol("syncMaxCameraOrbit"),A9=Symbol("syncMinFieldOfView"),A7=Symbol("syncMaxFieldOfView");/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe=function(e,t,i,s){var n,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var A=e.length-1;A>=0;A--)(n=e[A])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};let ot={AUTO:"auto"},oi={AUTO:"auto",EAGER:"eager"},os=Symbol("defaultProgressBarElement"),on=Symbol("posterContainerElement"),or=Symbol("defaultPosterElement"),oa=Symbol("shouldDismissPoster"),oA=Symbol("hidePoster"),oo=Symbol("modelIsRevealed"),ol=Symbol("updateProgressBar"),oh=Symbol("ariaLabelCallToAction"),oc=Symbol("onProgress");/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var og=function(e,t,i,s){var n,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var A=e.length-1;A>=0;A--)(n=e[A])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};let ou={basis:[nS(nI(Math.PI/32,"rad"))],keywords:{auto:[null]}},od=Symbol("autoRotateStartTime"),op=Symbol("radiansPerSecond"),om=Symbol("syncRotationRate"),oI=Symbol("onCameraChange"),of=(e=>{var t,i,s;class n extends e{connectedCallback(){super.connectedCallback();for(let e=0;e<this.children.length;++e)this[rv](this.children[e]);let{ShadyDOM:e}=self;null==e?this[rw].observe(this,{childList:!0}):this[rw]=e.observeChildren(this,this[ry])}disconnectedCallback(){super.disconnectedCallback();let{ShadyDOM:e}=self;null==e?this[rw].disconnect():e.unobserveChildren(this[rw])}[(t=rQ,i=ry,s=rw,rA)](e,t){super[rA](e,t);let i=this[rr],{annotationRenderer:s}=i,n=i.getCamera();i.shouldRender()&&(i.updateHotspots(n.position),s.domElement.style.display="",s.render(i,n))}updateHotspot(e){let t=this[rQ].get(e.name);null!=t&&(t.updatePosition(e.position),t.updateNormal(e.normal),this[ra]())}queryHotspot(e){let t=this[rQ].get(e);if(null==t)return null;let i=rp(t.position),s=rp(t.normal),n=t.facingCamera,r=this[rr],a=r.getCamera(),A=new en.Pa4;A.setFromMatrixPosition(t.matrixWorld),A.project(a);let o=r.width/2,l=r.height/2;A.x=A.x*o+o,A.y=-(A.y*l)+l;let h=rp(new en.Pa4(A.x,A.y,A.z));return Number.isFinite(h.x)&&Number.isFinite(h.y)?{position:i,normal:s,canvasPosition:h,facingCamera:n}:null}positionAndNormalFromPoint(e,t){let i=this[rr],s=i.getNDC(e,t),n=i.positionAndNormalFromPoint(s);if(null==n)return null;rS.copy(i.target.matrixWorld).invert();let r=rp(n.position.applyMatrix4(rS));rx.getNormalMatrix(rS);let a=rp(n.normal.applyNormalMatrix(rx)),A=null;return null!=n.uv&&(A=rm(n.uv)),{position:r,normal:a,uv:A}}[rv](e){if(!(e instanceof HTMLElement&&0===e.slot.indexOf("hotspot")))return;let t=this[rQ].get(e.slot);null!=t?t.increment():(t=new nR({name:e.slot,position:e.dataset.position,normal:e.dataset.normal}),this[rQ].set(e.slot,t),this[rr].addHotspot(t)),this[rr].queueRender()}[rb](e){if(!(e instanceof HTMLElement))return;let t=this[rQ].get(e.slot);t&&(t.decrement()&&(this[rr].removeHotspot(t),this[rQ].delete(e.slot)),this[rr].queueRender())}constructor(){super(...arguments),this[t]=new Map,this[i]=e=>{e.forEach(e=>{e instanceof MutationRecord&&"childList"!==e.type||(e.addedNodes.forEach(e=>{this[rv](e)}),e.removedNodes.forEach(e=>{this[rb](e)}),this[ra]())})},this[s]=new MutationObserver(this[ry])}}return n})((e=>{var t,i,s,n;class r extends e{get model(){return this[nd]}get availableVariants(){return this.model?this.model[na]():[]}get originalGltfJson(){return this[nu]}[(t=nd,i=ng,s=nm,n=nu,np)](){return()=>{this[ra]()}}async createTexture(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png",i=this[ng],s=await new Promise(t=>this[nm].load(e,t));return i&&s?(s.encoding=en.knz,s.wrapS=en.rpg,s.wrapT=en.rpg,s.flipY=!1,s.userData.mimeType=t,new sy(this[np](),s)):null}async updated(e){if(super.updated(e),e.has("variantName")){let e=this[rc].beginActivity();e(.1);let t=this[nd],{variantName:i}=this;null!=t&&(await t[nt](i),this[ra](),this.dispatchEvent(new CustomEvent("variant-applied"))),e(1)}if(e.has("orientation")||e.has("scale")){if(!this.loaded)return;let e=this[rr];e.applyTransform(),e.updateBoundingBox(),e.updateShadow(),this[rh].arRenderer.onUpdateScene(),this[ra]()}}[ro](){super[ro]();let{currentGLTF:e}=this[rr];if(null!=e){let{correlatedSceneGraph:t}=e;null!=t&&e!==this[ng]&&(this[nd]=new nh(t,this[np]()),this[nu]=JSON.parse(JSON.stringify(t.gltf))),"variants"in e.userData&&this.requestUpdate("variantName")}this[ng]=e}async exportScene(e){let t=this[rr];return new Promise(async(i,s)=>{let n={binary:!0,onlyVisible:!0,maxTextureSize:1/0,includeCustomExtensions:!1,forceIndices:!1};Object.assign(n,e),n.animations=t.animations,n.truncateDrawRange=!0;let r=t.shadow,a=!1;null!=r&&(a=r.visible,r.visible=!1),await this[nd][ne](),new ir().register(e=>new iv(e)).parse(t.model,e=>i(new Blob([n.binary?e:JSON.stringify(e)],{type:n.binary?"application/octet-stream":"application/json"})),()=>s("glTF export failed"),n),null!=r&&(r.visible=a)})}materialFromPoint(e,t){let i=this[rr],s=i.getNDC(e,t);return i.raycaster.setFromCamera(s,i.getCamera()),this[nd][nn](i.raycaster)}constructor(){super(...arguments),this[t]=void 0,this[i]=null,this[s]=new en.dpR,this[n]=null,this.variantName=null,this.orientation="0 0 0",this.scale="1 1 1"}}return nc([(0,es.Cb)({type:String,attribute:"variant-name"})],r.prototype,"variantName",void 0),nc([(0,es.Cb)({type:String,attribute:"orientation"})],r.prototype,"orientation",void 0),nc([(0,es.Cb)({type:String,attribute:"scale"})],r.prototype,"scale",void 0),r})((e=>{var t,i,s;class n extends e{connectedCallback(){super.connectedCallback(),this.addEventListener("camera-change",this[oI]),this[od]=performance.now()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("camera-change",this[oI]),this[od]=performance.now()}updated(e){super.updated(e),e.has("autoRotate")&&(this[od]=performance.now())}[(t=od,i=op,om)](e){this[op]=e[0]}[rA](e,t){if(super[rA](e,t),!this.autoRotate||!this[ru]()||this[rh].isPresenting)return;let i=Math.min(t,e-this[od]-this.autoRotateDelay);i>0&&(this[rr].yaw=this.turntableRotation+this[op]*i*.001)}get turntableRotation(){return this[rr].yaw}resetTurntableRotation(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this[rr].yaw=e}constructor(){super(...arguments),this.autoRotate=!1,this.autoRotateDelay=3e3,this.rotationPerSecond="auto",this[t]=performance.now(),this[i]=0,this[s]=e=>{this.autoRotate&&"user-interaction"===e.detail.source&&(this[od]=performance.now())}}}return s=oI,og([(0,es.Cb)({type:Boolean,attribute:"auto-rotate"})],n.prototype,"autoRotate",void 0),og([(0,es.Cb)({type:Number,attribute:"auto-rotate-delay"})],n.prototype,"autoRotateDelay",void 0),og([Ah({intrinsics:ou,updateHandler:om}),(0,es.Cb)({type:String,attribute:"rotation-per-second"})],n.prototype,"rotationPerSecond",void 0),n})((e=>{var t,i,s;class n extends e{updated(e){super.updated(e),e.has("shadowIntensity")&&(this[rr].setShadowIntensity(.5*this.shadowIntensity),this[ra]()),e.has("shadowSoftness")&&(this[rr].setShadowSoftness(this.shadowSoftness),this[ra]()),e.has("exposure")&&(this[rr].exposure=this.exposure,this[ra]()),(e.has("environmentImage")||e.has("skyboxImage"))&&this[rd]()&&this[eR]()}hasBakedShadow(){return this[rr].bakedShadows.size>0}async [(t=ex,i=eM,s=eD,eR)](){let{skyboxImage:e,environmentImage:t}=this;null!=this[eD]&&(this[eD](),this[eD]=null);let{textureUtils:i}=this[rh];if(null==i)return;let s=this[rc].beginActivity();try{let{environmentMap:n,skybox:r}=await i.generateEnvironmentMapAndSkybox(eI(e),t,e=>s(eQ(e,0,1)));this[ex]!==n&&(this[ex]=n,this.dispatchEvent(new CustomEvent("environment-change"))),null!=r?this[eM]=r.name===n.name?n:r:this[eM]=null,this[rr].setEnvironmentAndSkybox(this[ex],this[eM]),this[rr].dispatchEvent({type:"envmap-update"})}catch(e){if(e instanceof Error)throw this[rr].setEnvironmentAndSkybox(null,null),e}finally{s(1)}}constructor(){super(...arguments),this.environmentImage=null,this.skyboxImage=null,this.shadowIntensity=0,this.shadowSoftness=1,this.exposure=1,this[t]=null,this[i]=null,this[s]=null}}return eS([(0,es.Cb)({type:String,attribute:"environment-image"})],n.prototype,"environmentImage",void 0),eS([(0,es.Cb)({type:String,attribute:"skybox-image"})],n.prototype,"skyboxImage",void 0),eS([(0,es.Cb)({type:Number,attribute:"shadow-intensity"})],n.prototype,"shadowIntensity",void 0),eS([(0,es.Cb)({type:Number,attribute:"shadow-softness"})],n.prototype,"shadowSoftness",void 0),eS([(0,es.Cb)({type:Number})],n.prototype,"exposure",void 0),n})((e=>{var t,i,s,n,r,a,A,o,l,h,c,g,u,d,p;class m extends e{get inputSensitivity(){return this[A_].inputSensitivity}set inputSensitivity(e){this[A_].inputSensitivity=e}getCameraOrbit(){let{theta:e,phi:t,radius:i}=this[A$];return{theta:e,phi:t,radius:i,toString(){return"".concat(this.theta,"rad ").concat(this.phi,"rad ").concat(this.radius,"m")}}}getCameraTarget(){return rp(this[rh].isPresenting?this[rh].arRenderer.target:this[rr].getTarget())}getFieldOfView(){return this[A_].getFieldOfView()}getMinimumFieldOfView(){return this[A_].options.minimumFieldOfView}getMaximumFieldOfView(){return this[A_].options.maximumFieldOfView}getIdealAspect(){return this[rr].idealAspect}jumpCameraToGoal(){this[A0]=!0,this.requestUpdate(A0,!1)}resetInteractionPrompt(){this[AZ]=0,this[AX]=1/0,this[AW]=!1,this[Az]=this.interactionPrompt===AS.AUTO&&this.cameraControls}zoom(e){let t=new WheelEvent("wheel",{deltaY:-30*e});this[rs].dispatchEvent(t)}connectedCallback(){super.connectedCallback(),this[A_].addEventListener("change",this[AY]),this[A_].addEventListener("pointer-change-start",this[Aj]),this[A_].addEventListener("pointer-change-end",this[Aj])}disconnectedCallback(){super.disconnectedCallback(),this[A_].removeEventListener("change",this[AY]),this[A_].removeEventListener("pointer-change-start",this[Aj]),this[A_].removeEventListener("pointer-change-end",this[Aj])}updated(e){super.updated(e);let t=this[A_],i=this[rr];if(e.has("cameraControls")&&(this.cameraControls?(t.enableInteraction(),this.interactionPrompt===AS.AUTO&&(this[Az]=!0)):(t.disableInteraction(),this[AK]()),this[rs].setAttribute("aria-label",this[n8])),e.has("disableZoom")&&(t.disableZoom=this.disableZoom),e.has("disablePan")&&(t.enablePan=!this.disablePan),e.has("disableTap")&&(t.enableTap=!this.disableTap),(e.has("interactionPrompt")||e.has("cameraControls")||e.has("src"))&&(this.interactionPrompt===AS.AUTO&&this.cameraControls&&!this[AW]?this[Az]=!0:this[AK]()),e.has("interactionPromptStyle")&&(this[AH].style.opacity=this.interactionPromptStyle==Ax.BASIC?"1":"0"),e.has("touchAction")){let e=this.touchAction;t.applyOptions({touchAction:e}),t.updateTouchActionStyle()}e.has("orbitSensitivity")&&(t.orbitSensitivity=this.orbitSensitivity),e.has("interpolationDecay")&&(t.setDamperDecayTime(this.interpolationDecay),i.setTargetDamperDecayTime(this.interpolationDecay)),!0===this[A0]&&Promise.resolve().then(()=>{t.jumpToGoal(),i.jumpToGoal(),this[A0]=!1})}async updateFraming(){let e=this[rr],t=e.adjustedFoV(e.framedFoVDeg);await e.updateFraming();let i=e.adjustedFoV(e.framedFoVDeg),s=this[A_].getFieldOfView()/t;this[A_].setFieldOfView(i*s),this[A2]=!0,this.requestUpdate("maxFieldOfView"),this.requestUpdate("fieldOfView"),this.requestUpdate("minCameraOrbit"),this.requestUpdate("maxCameraOrbit"),this.requestUpdate("cameraOrbit"),await this.updateComplete}interact(e,t,i){let s=this[rs],n=this[Aq];if("1"===n[0].style.opacity){console.warn("interact() failed because an existing interaction is running.");return}let r=[];r.push({x:AC(t.x),y:AC(t.y)});let a=[{x:r[0].x(0),y:r[0].y(0)}];null!=i&&(r.push({x:AC(i.x),y:AC(i.y)}),a.push({x:r[1].x(0),y:r[1].y(0)}));let A=performance.now(),{width:o,height:l}=this[rr],h=e=>{for(let[t,i]of a.entries()){let{style:r}=n[t];r.transform="translateX(".concat(o*i.x,"px) translateY(").concat(l*i.y,"px)"),"pointerdown"===e?r.opacity="1":"pointerup"===e&&(r.opacity="0");let a={pointerId:t-5678,pointerType:"touch",target:s,clientX:o*i.x,clientY:l*i.y,altKey:!0};s.dispatchEvent(new PointerEvent(e,a))}},c=()=>{let{changeSource:t}=this[A_];if(t!==Ap.AUTOMATIC||!s.isConnected){for(let e of this[Aq])e.style.opacity="0";h("pointercancel"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:t}})),document.removeEventListener("visibilitychange",g);return}let i=Math.min(1,(performance.now()-A)/e);for(let[e,t]of a.entries())t.x=r[e].x(i),t.y=r[e].y(i);h("pointermove"),i<1?requestAnimationFrame(c):(h("pointerup"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:t}})),document.removeEventListener("visibilitychange",g))},g=()=>{let e=0;"hidden"===document.visibilityState?e=performance.now()-A:A=performance.now()-e};document.addEventListener("visibilitychange",g),h("pointerdown"),requestAnimationFrame(c)}[(t=AO,i=AH,s=Aq,n=AP,r=AZ,a=AX,A=AW,o=Az,l=A_,h=A$,c=A0,g=A1,u=A2,A4)](e){let t=this[rr];t.framedFoVDeg=180*e[0]/Math.PI,this[A_].setFieldOfView(t.adjustedFoV(t.framedFoVDeg))}[A3](e){let t=this[A_];if(this[A2]){let{theta:t,phi:i}=this.getCameraOrbit();e[0]=t,e[1]=i,this[A2]=!1}t.changeSource=Ap.NONE,t.setOrbit(e[0],e[1],e[2])}[A5](e){this[A_].applyOptions({minimumAzimuthalAngle:e[0],minimumPolarAngle:e[1],minimumRadius:e[2]}),this.jumpCameraToGoal()}[A6](e){this[A_].applyOptions({maximumAzimuthalAngle:e[0],maximumPolarAngle:e[1],maximumRadius:e[2]}),this[AV](e[2]),this.jumpCameraToGoal()}[A9](e){this[A_].applyOptions({minimumFieldOfView:180*e[0]/Math.PI}),this.jumpCameraToGoal()}[A7](e){let t=this[rr].adjustedFoV(180*e[0]/Math.PI);this[A_].applyOptions({maximumFieldOfView:t}),this.jumpCameraToGoal()}[A8](e){let[t,i,s]=e;this[rh].arRenderer.isPresenting||this[rr].setTarget(t,i,s),this[A_].changeSource=Ap.NONE,this[rh].arRenderer.updateTarget()}[rA](e,t){if(super[rA](e,t),this[rh].isPresenting||!this[ru]())return;let i=this[A_],s=this[rr],n=performance.now();if(this[Az]&&this.loaded&&n>this[n7]+this.interactionPromptThreshold&&(this[Az]=!1,this[AX]=n,this[AO].classList.add("visible")),isFinite(this[AX])&&this.interactionPromptStyle===Ax.WIGGLE){let e=(n-this[AX])/5e3%1,t=AQ(e),r=Ay(e);if(this[AH].style.opacity="".concat(r),t!==this[AZ]){let e=t*s.width*.05,n=(t-this[AZ])*Math.PI/16;this[AH].style.transform="translateX(".concat(e,"px)"),i.changeSource=Ap.AUTOMATIC,i.adjustOrbit(n,0,0),this[AZ]=t}}i.update(e,t),s.updateTarget(t)&&this[AY]({type:"change",source:i.changeSource})}[AK](){this[Az]=!1,this[AO].classList.remove("visible"),this[AX]=1/0}[AV](e){let t=Math.max(this[rr].boundingSphere.radius,e);this[A_].updateNearFar(0,2*t)}[AJ](){let{theta:e,phi:t}=this[A_].getCameraSpherical(this[A$]),i=Av[(4+Math.floor((e%AG+AN)/Ak))%4],s=Ab[Math.floor(t/AU)];this[n9]("View from stage ".concat(s).concat(i))}get[n8](){return super[n8]+(this.cameraControls?". Use mouse, touch or arrow keys to move.":"")}async [rl](e){let t=this[A_],i=this[rr],s=i.adjustedFoV(i.framedFoVDeg);super[rl](e);let n=i.adjustedFoV(i.framedFoVDeg)/s,r=t.getFieldOfView()*(isFinite(n)?n:1);t.updateAspect(this[rr].aspect),this.requestUpdate("maxFieldOfView",this.maxFieldOfView),await this.updateComplete,this[A_].setFieldOfView(r),this.jumpCameraToGoal()}[ro](){super[ro](),this[A1]?this[A2]=!0:this[A1]=!0,this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.requestUpdate("minCameraOrbit",this.minCameraOrbit),this.requestUpdate("maxCameraOrbit",this.maxCameraOrbit),this.requestUpdate("cameraOrbit",this.cameraOrbit),this.requestUpdate("cameraTarget",this.cameraTarget),this.jumpCameraToGoal()}constructor(){super(...arguments),this.cameraControls=!1,this.cameraOrbit=Aw,this.cameraTarget="auto auto auto",this.fieldOfView="auto",this.minCameraOrbit="auto",this.maxCameraOrbit="auto",this.minFieldOfView="auto",this.maxFieldOfView="auto",this.interactionPromptThreshold=3e3,this.interactionPrompt=AS.AUTO,this.interactionPromptStyle=Ax.WIGGLE,this.orbitSensitivity=1,this.touchAction="none",this.disableZoom=!1,this.disablePan=!1,this.disableTap=!1,this.interpolationDecay=50,this[t]=this.shadowRoot.querySelector(".interaction-prompt"),this[i]=this.shadowRoot.querySelector("#prompt"),this[s]=[this.shadowRoot.querySelector("#finger0"),this.shadowRoot.querySelector("#finger1")],this[n]=this.shadowRoot.querySelector(".pan-target"),this[r]=0,this[a]=1/0,this[A]=!1,this[o]=!1,this[l]=new Am(this[rr].camera,this[rs],this[rr]),this[h]=new en.$V,this[c]=!1,this[g]=!1,this[u]=!1,this[d]=e=>{let{source:t}=e;this[AJ](),this[ra](),t===Ap.USER_INTERACTION&&(this[AW]=!0,this[AK]()),this.dispatchEvent(new CustomEvent("camera-change",{detail:{source:t}}))},this[p]=e=>{"pointer-change-start"===e.type?this[ri].classList.add("pointer-tumbling"):this[ri].classList.remove("pointer-tumbling")}}}return d=AY,p=Aj,AB([(0,es.Cb)({type:Boolean,attribute:"camera-controls"})],m.prototype,"cameraControls",void 0),AB([Ah({intrinsics:AD,observeEffects:!0,updateHandler:A3}),(0,es.Cb)({type:String,attribute:"camera-orbit",hasChanged:()=>!0})],m.prototype,"cameraOrbit",void 0),AB([Ah({intrinsics:AF,observeEffects:!0,updateHandler:A8}),(0,es.Cb)({type:String,attribute:"camera-target",hasChanged:()=>!0})],m.prototype,"cameraTarget",void 0),AB([Ah({intrinsics:AM,observeEffects:!0,updateHandler:A4}),(0,es.Cb)({type:String,attribute:"field-of-view",hasChanged:()=>!0})],m.prototype,"fieldOfView",void 0),AB([Ah({intrinsics:AT,updateHandler:A5}),(0,es.Cb)({type:String,attribute:"min-camera-orbit",hasChanged:()=>!0})],m.prototype,"minCameraOrbit",void 0),AB([Ah({intrinsics:AL,updateHandler:A6}),(0,es.Cb)({type:String,attribute:"max-camera-orbit",hasChanged:()=>!0})],m.prototype,"maxCameraOrbit",void 0),AB([Ah({intrinsics:AR,updateHandler:A9}),(0,es.Cb)({type:String,attribute:"min-field-of-view",hasChanged:()=>!0})],m.prototype,"minFieldOfView",void 0),AB([Ah({intrinsics:AM,updateHandler:A7}),(0,es.Cb)({type:String,attribute:"max-field-of-view",hasChanged:()=>!0})],m.prototype,"maxFieldOfView",void 0),AB([(0,es.Cb)({type:Number,attribute:"interaction-prompt-threshold"})],m.prototype,"interactionPromptThreshold",void 0),AB([(0,es.Cb)({type:String,attribute:"interaction-prompt"})],m.prototype,"interactionPrompt",void 0),AB([(0,es.Cb)({type:String,attribute:"interaction-prompt-style"})],m.prototype,"interactionPromptStyle",void 0),AB([(0,es.Cb)({type:Number,attribute:"orbit-sensitivity"})],m.prototype,"orbitSensitivity",void 0),AB([(0,es.Cb)({type:String,attribute:"touch-action"})],m.prototype,"touchAction",void 0),AB([(0,es.Cb)({type:Boolean,attribute:"disable-zoom"})],m.prototype,"disableZoom",void 0),AB([(0,es.Cb)({type:Boolean,attribute:"disable-pan"})],m.prototype,"disablePan",void 0),AB([(0,es.Cb)({type:Boolean,attribute:"disable-tap"})],m.prototype,"disableTap",void 0),AB([(0,es.Cb)({type:Number,attribute:"interpolation-decay"})],m.prototype,"interpolationDecay",void 0),m})((e=>{var t,i,s,n,r,a,A,o,l,h;class c extends e{get canActivateAR(){return this[aF]!==ax.NONE}connectedCallback(){super.connectedCallback(),this[rh].arRenderer.addEventListener("status",this[a_]),this.setAttribute("ar-status",iL.NOT_PRESENTING),this[rh].arRenderer.addEventListener("tracking",this[aP]),this[aU].addEventListener("message",this[aO])}disconnectedCallback(){super.disconnectedCallback(),this[rh].arRenderer.removeEventListener("status",this[a_]),this[rh].arRenderer.removeEventListener("tracking",this[aP]),this[aU].removeEventListener("message",this[aO])}update(e){super.update(e),e.has("arScale")&&(this[rr].canScale="fixed"!==this.arScale),e.has("arPlacement")&&(this[rr].updateShadow(),this[ra]()),e.has("arModes")&&(this[ak]=aS(this.arModes)),(e.has("ar")||e.has("arModes")||e.has("src")||e.has("iosSrc"))&&this[aH]()}async activateAR(){switch(this[aF]){case ax.QUICK_LOOK:this[aT]();break;case ax.WEBXR:await this[aR]();break;case ax.SCENE_VIEWER:this[aD]();break;default:console.warn("No AR Mode can be activated. This is probably due to missing configuration or device capabilities")}}async [(t=aL,i=aM,s=aU,n=ak,r=aF,a=aN,A=aG,o=a_,l=aP,h=aO,aH)](){let e=ax.NONE;if(this.ar){if(null!=this.src)for(let t of this[ak]){if("webxr"===t&&eA&&!aw&&await this[rh].arRenderer.supportsPresentation()){e=ax.WEBXR;break}if("scene-viewer"===t&&ed&&!av){e=ax.SCENE_VIEWER;break}if("quick-look"===t&&em){e=ax.QUICK_LOOK;break}}e===ax.NONE&&null!=this.iosSrc&&em&&(e=ax.QUICK_LOOK)}if(e!==ax.NONE)this[aM].classList.add("enabled"),this[aM].addEventListener("click",this[aG]);else if(this[aM].classList.contains("enabled")){this[aM].removeEventListener("click",this[aG]),this[aM].classList.remove("enabled");let e=iL.FAILED;this.setAttribute("ar-status",e),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:e}}))}this[aF]=e}async [aR](){console.log("Attempting to present in AR with WebXR..."),await this[aq]();try{this[aM].removeEventListener("click",this[aG]);let{arRenderer:e}=this[rh];e.placeOnWall="wall"===this.arPlacement,await e.present(this[rr],this.xrEnvironment)}catch(e){console.warn("Error while trying to present in AR with WebXR"),console.error(e),await this[rh].arRenderer.stopPresenting(),aw=!0,console.warn("Falling back to next ar-mode"),await this[aH](),this.activateAR()}finally{this[aH]()}}async [aq](){this.loaded||(this[aN]=!0,this[re](),await eb(this,"load"),this[aN]=!1)}[rd](){return super[rd]()||this[aN]}[aD](){let e=self.location.toString(),t=new URL(e),i=new URL(this.src,e),s=new URLSearchParams(i.search);if(t.hash=ab,s.set("mode","ar_preferred"),s.has("disable_occlusion")||s.set("disable_occlusion","true"),"fixed"===this.arScale&&s.set("resizable","false"),"wall"===this.arPlacement&&s.set("enable_vertical_placement","true"),s.has("sound")){let t=new URL(s.get("sound"),e);s.set("sound",t.toString())}if(s.has("link")){let t=new URL(s.get("link"),e);s.set("link",t.toString())}let n="intent://arvr.google.com/scene-viewer/1.0?".concat(s.toString()+"&file="+encodeURIComponent(i.toString()),"#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=").concat(encodeURIComponent(t.toString()),";end;");self.addEventListener("hashchange",()=>{self.location.hash===ab&&(av=!0,self.history.back(),console.warn("Error while trying to present in AR with Scene Viewer"),console.warn("Falling back to next ar-mode"),this[aH]())},{once:!0}),this[aU].setAttribute("href",n),console.log("Attempting to present in AR with Scene Viewer..."),this[aU].click()}async [aT](){let e=!this.iosSrc;this[aM].classList.remove("enabled");let t=e?await this.prepareUSDZ():this.iosSrc,i=new URL(t,self.location.toString());if(e){let e=self.location.toString(),t=new URL(e),s=new URL(this.src,t);s.hash&&(i.hash=s.hash)}"fixed"===this.arScale&&(i.hash&&(i.hash+="&"),i.hash+="allowsContentScaling=0");let s=this[aU];s.setAttribute("rel","ar");let n=document.createElement("img");s.appendChild(n),s.setAttribute("href",i.toString()),e&&s.setAttribute("download","model.usdz"),s.style.display="none",s.isConnected||this.shadowRoot.appendChild(s),console.log("Attempting to present in AR with Quick Look..."),s.click(),s.removeChild(n),e&&URL.revokeObjectURL(t),this[aM].classList.add("enabled")}async prepareUSDZ(){let e=this[rc].beginActivity();await this[aq]();let{model:t,shadow:i}=this[rr];if(null==t)return"";let s=!1;null!=i&&(s=i.visible,i.visible=!1),e(.2);let n=new am,r=await n.parse(t),a=new Blob([r],{type:"model/vnd.usdz+zip"}),A=URL.createObjectURL(a);return e(1),null!=i&&(i.visible=s),A}constructor(){super(...arguments),this.ar=!1,this.arScale="auto",this.arPlacement="floor",this.arModes="webxr scene-viewer quick-look",this.iosSrc=null,this.xrEnvironment=!1,this[t]=!1,this[i]=this.shadowRoot.querySelector(".ar-button"),this[s]=document.createElement("a"),this[n]=new Set,this[r]=ax.NONE,this[a]=!1,this[A]=e=>{e.preventDefault(),this.activateAR()},this[o]=e=>{let{status:t}=e;(t===iL.NOT_PRESENTING||this[rh].arRenderer.presentedScene===this[rr])&&(this.setAttribute("ar-status",t),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:t}})),t===iL.NOT_PRESENTING?this.removeAttribute("ar-tracking"):t===iL.SESSION_STARTED&&this.setAttribute("ar-tracking",iF.TRACKING))},this[l]=e=>{let{status:t}=e;this.setAttribute("ar-tracking",t),this.dispatchEvent(new CustomEvent("ar-tracking",{detail:{status:t}}))},this[h]=e=>{"_apple_ar_quicklook_button_tapped"==e.data&&this.dispatchEvent(new CustomEvent("quick-look-button-tapped"))}}}return ay([(0,es.Cb)({type:Boolean,attribute:"ar"})],c.prototype,"ar",void 0),ay([(0,es.Cb)({type:String,attribute:"ar-scale"})],c.prototype,"arScale",void 0),ay([(0,es.Cb)({type:String,attribute:"ar-placement"})],c.prototype,"arPlacement",void 0),ay([(0,es.Cb)({type:String,attribute:"ar-modes"})],c.prototype,"arModes",void 0),ay([(0,es.Cb)({type:String,attribute:"ios-src"})],c.prototype,"iosSrc",void 0),ay([(0,es.Cb)({type:Boolean,attribute:"xr-environment"})],c.prototype,"xrEnvironment",void 0),c})((e=>{var t,i,s,n,r,a,A,o;class l extends e{static set dracoDecoderLocation(e){t5.setDRACODecoderLocation(e)}static get dracoDecoderLocation(){return t5.getDRACODecoderLocation()}static set ktx2TranscoderLocation(e){t5.setKTX2TranscoderLocation(e)}static get ktx2TranscoderLocation(){return t5.getKTX2TranscoderLocation()}static set meshoptDecoderLocation(e){t5.setMeshoptDecoderLocation(e)}static get meshoptDecoderLocation(){return t5.getMeshoptDecoderLocation()}static mapURLs(e){ss.singleton.loader[t3].manager.setURLModifier(e)}dismissPoster(){this.loaded?this[oA]():(this[oa]=!0,this[re]())}showPoster(){let e=this[on];if(e.classList.contains("show"))return;e.classList.add("show"),this[rs].classList.remove("show");let t=this[or];t.removeAttribute("tabindex"),t.removeAttribute("aria-hidden");let i=this.modelIsVisible;this[oo]=!1,this[n4](i)}getDimensions(){return rp(this[rr].size)}getBoundingBoxCenter(){return rp(this[rr].boundingBox.getCenter(new en.Pa4))}connectedCallback(){super.connectedCallback(),this.showPoster(),this[rc].addEventListener("progress",this[oc])}disconnectedCallback(){super.disconnectedCallback(),this[rc].removeEventListener("progress",this[oc])}async updated(e){super.updated(e),e.has("poster")&&null!=this.poster&&(this[or].style.backgroundImage="url(".concat(this.poster,")")),e.has("alt")&&this[or].setAttribute("aria-label",this[n5]),(e.has("reveal")||e.has("loading"))&&this[re]()}[(t=oo,i=oa,s=on,n=or,r=os,a=oh,A=ol,o=oc,rd)](){return!!this.src&&(this[oa]||this.loading===oi.EAGER||this.reveal===ot.AUTO&&this[n3])}[oA](){this[oa]=!1;let e=this[on];if(!e.classList.contains("show"))return;e.classList.remove("show"),this[rs].classList.add("show");let t=this.modelIsVisible;this[oo]=!0,this[n4](t);let i=this.getRootNode();i&&i.activeElement===this&&this[rs].focus();let s=this[or];s.setAttribute("aria-hidden","true"),s.tabIndex=-1,this.dispatchEvent(new CustomEvent("poster-dismissed"))}[ru](){return super[ru]()&&this[oo]}constructor(...e){super(...e),this.poster=null,this.reveal=ot.AUTO,this.loading=oi.AUTO,this[t]=!1,this[i]=!1,this[s]=this.shadowRoot.querySelector(".slot.poster"),this[n]=this.shadowRoot.querySelector("#default-poster"),this[r]=this.shadowRoot.querySelector("#default-progress-bar > .bar"),this[a]=this[or].getAttribute("aria-label"),this[A]=eC(e=>{let t=this[os].parentNode;requestAnimationFrame(()=>{this[os].style.transform="scaleX(".concat(e,")"),0===e&&(t.removeChild(this[os]),t.appendChild(this[os])),1===e?this[os].classList.add("hide"):this[os].classList.remove("hide")})},100),this[o]=e=>{let t=e.detail.totalProgress;1===t&&(this[ol].flush(),this.loaded&&(this[oa]||this.reveal===ot.AUTO)&&this[oA]()),this[ol](t),this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:t}}))};let l=self.ModelViewerElement||{},h=l.dracoDecoderLocation||"https://www.gstatic.com/draco/versioned/decoders/1.4.1/";t5.setDRACODecoderLocation(h);let c=l.ktx2TranscoderLocation||"https://www.gstatic.com/basis-universal/versioned/2021-04-15-ba1c3e4/";t5.setKTX2TranscoderLocation(c),l.meshoptDecoderLocation&&t5.setMeshoptDecoderLocation(l.meshoptDecoderLocation)}}return oe([(0,es.Cb)({type:String})],l.prototype,"poster",void 0),oe([(0,es.Cb)({type:String})],l.prototype,"reveal",void 0),oe([(0,es.Cb)({type:String})],l.prototype,"loading",void 0),l})((e=>{var t;class i extends e{get availableAnimations(){return this.loaded?this[rr].animationNames:[]}get duration(){return this[rr].duration}get paused(){return this[rC]}get currentTime(){return this[rr].animationTime}set currentTime(e){this[rr].animationTime=e,this[ra]()}get timeScale(){return this[rr].animationTimeScale}set timeScale(e){this[rr].animationTimeScale=e}pause(){this[rC]||(this[rC]=!0,this.dispatchEvent(new CustomEvent("pause")))}play(e){this.availableAnimations.length>0&&(this[rC]=!1,this[rE](e),this.dispatchEvent(new CustomEvent("play")))}[(t=rC,ro)](){super[ro](),this[rC]=!0,this.autoplay&&this.play()}[rA](e,t){super[rA](e,t),!this[rC]&&(this[ru]()||this[rh].isPresenting)&&(this[rr].updateAnimation(t/1e3),this[ra]())}updated(e){super.updated(e),e.has("autoplay")&&this.autoplay&&this.play(),e.has("animationName")&&this[rE]()}[rE](){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rB,i=null!==(e=t.repetitions)&&void 0!==e?e:1/0,s=t.pingpong?en.uEv:1===i?en.jAl:en.YKA;this[rr].playAnimation(this.animationName,this.animationCrossfadeDuration/1e3,s,i),this[rC]&&(this[rr].updateAnimation(0),this[ra]())}constructor(...e){super(e),this.autoplay=!1,this.animationName=void 0,this.animationCrossfadeDuration=300,this[t]=!0,this[rr].subscribeMixerEvent("loop",e=>{let t=e.action._loopCount;this.dispatchEvent(new CustomEvent("loop",{detail:{count:t}}))}),this[rr].subscribeMixerEvent("finished",()=>{this[rC]=!0,this.dispatchEvent(new CustomEvent("finished"))})}}return rf([(0,es.Cb)({type:Boolean})],i.prototype,"autoplay",void 0),rf([(0,es.Cb)({type:String,attribute:"animation-name"})],i.prototype,"animationName",void 0),rf([(0,es.Cb)({type:Number,attribute:"animation-crossfade-duration"})],i.prototype,"animationCrossfadeDuration",void 0),i})((e=>{var t;let i=e=>{if(null==e.shadowRoot||e.hasAttribute("data-js-focus-visible"))return()=>{};if(self.applyFocusVisiblePolyfill)self.applyFocusVisiblePolyfill(e.shadowRoot);else{let t=()=>{self.applyFocusVisiblePolyfill(e.shadowRoot)};return self.addEventListener("focus-visible-polyfill-ready",t,{once:!0}),()=>{self.removeEventListener("focus-visible-polyfill-ready",t)}}return()=>{}},s=Symbol("endPolyfillCoordination");class n extends e{connectedCallback(){super.connectedCallback&&super.connectedCallback(),null==this[s]&&(this[s]=i(this))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),null!=this[s]&&(this[s](),this[s]=null)}constructor(){super(...arguments),this[t]=null}}return t=s,n})(rI)))))))));customElements.define("model-viewer",of);let oE=i(64090).forwardRef(function(e,t){let{src:i,alt:s,poster:n,style:r}=e;return(0,ei.jsx)("div",{style:{...r},ref:t,children:i?(0,ei.jsx)("model-viewer",{src:i,alt:s||"3D Model","camera-controls":!0,poster:n||null,style:{width:"100%",height:"100%"}}):null})});var oC=oE}}]);